!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?exports.DSValidation=b(require(void 0)):a.DSValidation=b(a.jQuery)}(this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";var d=function(a){return a&&a.__esModule?a:{"default":a}};Object.defineProperty(b,"__esModule",{value:!0});var e=c(1),f=d(e),g=c(2),h=d(g),i=[],j=function(a){var b=a.prop("tagName");return"INPUT"===b||"SELECT"===b||"TEXTAREA"===b},k=function(a,b){var c,d=f["default"]("label[for='"+a.attr("id")+"']"),e=d.find(".validation"),g=e.find(".validation__message"),i=d.height();return a.removeClass("has-success has-error has-warning shake"),g.removeClass("has-success has-error has-warning"),b.success===!0?(a.addClass("has-success"),g.addClass("has-success")):(a.addClass("has-error"),g.addClass("has-error"),j(a)&&a.addClass("shake"),h["default"].publish("Validation:InlineError",d.attr("for"))),b.message&&g.text(b.message),b.suggestion&&(g.html("Did you mean "+b.suggestion.full+"? <a href='#' data-suggestion='"+b.suggestion.full+"'class='js-mailcheck-fix'>Fix it!</a>"),h["default"].publish("Validation:Suggestion",b.suggestion.domain)),c=g.height(),c>i?d.css("height",c+"px"):d.css("height",""),e.addClass("is-showing-message"),f["default"](".js-mailcheck-fix").on("click",function(a){a.preventDefault();var b=f["default"]("#"+f["default"](this).closest("label").attr("for"));b.val(f["default"](this).data("suggestion")),b.trigger("blur"),h["default"].publish("Validation:SuggestionUsed",f["default"](this).text())}),a.on("focus",function(){a.removeClass("has-warning has-error has-success shake"),e.removeClass("is-showing-message"),d.css("height","")}),b.success},l=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return b.toString()},b}(function(a,b,c){b="undefined"!=typeof b?b:!1,c="undefined"!=typeof c?c:function(a,b){k(a,b)};var d=a.data("validate"),e=a.data("validate-trigger");if(e&&l(f["default"](e)),i[d])if(j(a)){var g=a.val();if(b||""!==g)if("match"===d){var h=f["default"](a.data("validate-match")).val();i[d].fn(g,h,function(b){c(a,b)})}else i[d].fn(g,function(b){c(a,b)})}else if("match"===d){var m=f["default"](a.data("validate-match"));i[d].fn(a,m,function(b){c(a,b)})}else i[d].fn(a,function(b){c(a,b)})}),m=function(a){if(0===a.find(".validation").length){var b=f["default"]("<div class='validation'></div>");b.append("<div class='validation__label'>"+a.html()+"</div>"),b.append("<div class='validation__message'></div>"),a.html(b)}},n=function(a){a.each(function(){var a=f["default"](this);m(f["default"]("label[for='"+a.attr("id")+"']")),a.on("blur",function(b){b.preventDefault(),l(a)})})},o=function(a,b){if(i[a])throw"A validation function with that name has already been registered";i[a]=b},p=function(a,b){var c={fn:b};o(a,c)},q=function(a){var b=a.find(":submit");b.attr("disabled",!0),b.addClass("is-loading")},r=function(a){var b=a.find(":submit");b.attr("disabled",!1),b.removeClass("is-loading is-disabled")};f["default"]("body").on("submit","form",function(a,b){var c=f["default"](this),d=c.find("[data-validate]");if(q(c),d=d.map(function(){var a=f["default"](this);return"undefined"!=typeof a.attr("data-validate-required")||""!==a.val()?a:void 0}),0===d.length)return!0;if(b===!0)return!0;a.preventDefault();var e=0,g=0,i=!1;return d.each(function(){l(f["default"](this),!0,function(a,b){e++,k(a,b),b.success&&g++,i||b.success!==!1||(i=!0,f["default"]("html,body").animate({scrollTop:a.offset().top-32},200)),e===d.length&&(g===d.length?(h["default"].publish("Validation:Submitted",c.attr("id")),c.trigger("submit",!0)):(h["default"].publish("Validation:SubmitError",c.attr("id")),r(c)))})}),!1}),p("match",function(a,b,c){return c(a===b&&""!==a?{success:!0,message:"Looks good!"}:{success:!1,message:"That doesn't match."})}),f["default"](function(){n(f["default"]("body").find("[data-validate]"))}),b["default"]={prepareFields:n,registerValidation:o,registerValidationFunction:p,validateField:l,showValidationMessage:k,Validations:i,Events:h["default"]},a.exports=b["default"]},function(b){b.exports=a},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={},d=-1,e=function(a,b){return c[a]?(setTimeout(function(){for(var d=c[a],e=d?d.length:0;e--;)d[e].func(a,b)},0),!0):!1},f=function(a,b){c[a]||(c[a]=[]);var e=(++d).toString();return c[a].push({token:e,func:b}),e},g=function(a){for(var b in c)if(c[b])for(var d=0,e=c[b].length;e>d;d++)if(c[b][d].token===a)return c[b].splice(d,1),a;return!1};b["default"]={publish:e,subscribe:f,unsubscribe:g},a.exports=b["default"]}])});