{"version":3,"file":"app.js","sources":["text.js","finder/templates/campaign.tpl.html!text","finder/Campaign.js","text!finder/templates/no-results.tpl.html","finder/ResultsView.js","finder/SolrAdapter.js","finder/templates/error.tpl.html!text","finder/FormView.js","finder/Finder.js","StripeForm.js","donate/Donate.js","revealer/Revealer.js","swapper/Swapper.js","neue/events.js","neue/modal.js","campaign/ImageCrop.js","campaign/ImageUploadBeta.js","reportback/templates/reportback.tpl.html!text","reportback/Reportback.js","neue/carousel.js","neue/jump-scroll.js","neue/media-selector.js","neue/menu.js","neue/messages.js","neue/scroll-indicator.js","neue/sticky.js","neue/validation.js","neue/main.js","campaign/SchoolFinder.js","campaign/sources.js","campaign/tips.js","campaign/tabs.js","campaign/ImageUploader.js","validation/auth.js","validation/reportback.js","validation/address.js","validation/donate.js","Analytics.js","tiles.js"],"names":[],"mappings":"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","sourcesContent":["define('text',{load: function(id){throw new Error(\"Dynamic load not allowed: \" + id);}});\n","\ndefine('text!finder/templates/campaign.tpl.html',[],function () { return '<li>\\n<article class=\"tile tile--campaign campaign-result<% if(featured) { %> big<% } %>\">\\n  <a class=\"wrapper\" href=\"<%= url %>\">\\n    <% if(staffPick) {  %><div class=\"__flag -staff-pick\"><%= Drupal.t(\"Staff Pick\") %></div><% } %>\\n    <div class=\"tile--meta\">\\n      <h1 class=\"__title\"><%= title %></h1>\\n      <p class=\"__tagline\"><%= description %></p>\\n    </div>\\n    <img src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"<%= image %>\">\\n  </a>\\n</article>\\n</li>\\n';});\n\n","define('finder/Campaign',['require','jquery','lodash','text!finder/templates/campaign.tpl.html'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n  var _ = require(\"lodash\");\n  var campaignTplSrc =  require(\"text!finder/templates/campaign.tpl.html\");\n\n  /**\n   * Campaign JS object representation\n   * @param {Object} data The raw campaign data\n   */\n  var Campaign = function (data) {\n    // Default values for a newly created campaign\n    var defaults = {\n      title: Drupal.t(\"New Campaign\"),\n      description: Drupal.t(\"Take your dad to get his blood pressure checked\"),\n      url: \"#\",\n      staffPick: false,\n      featured: false\n    };\n\n    // Merge the campaign object from data with the defaults into\n    // this campaign object\n    $.extend(this, defaults, this.convert(data));\n  };\n\n  /**\n   * Convert fields from the Solr results to relevant local, friendlier\n   * field names.\n   *\n   * @param  {Object} data The raw campaign object\n   *\n   * @return {Object} The new data translated and ignoring\n   */\n  Campaign.prototype.convert = function (data) {\n    var newData = {};\n    var map = {\n      \"label\": \"title\",\n      \"sm_field_call_to_action\": \"description\",\n      \"url\": \"url\",\n      \"bs_field_staff_pick\": \"staffPick\",\n      \"bs_sticky\": \"featured\",\n      \"ss_field_search_image_400x400\": \"image\"\n    };\n\n    // Only populate fields that we care about from the map.\n    for (var i in data) {\n      if (map[i] !== undefined) {\n        newData[map[i]] = data[i];\n      }\n    }\n\n    return newData;\n  };\n\n  /**\n   * Render a campaign\n   * @return {jQuery} The jQuery object that is the rendered representation of this Campaign\n   */\n  Campaign.prototype.render = function () {\n    var $wrapper = _.template(campaignTplSrc, {\n      \"image\": this.image,\n      \"staffPick\": this.staffPick,\n      \"featured\": this.featured,\n      \"title\": this.title,\n      \"description\": this.description,\n      \"url\": this.url\n    });\n\n    return $wrapper;\n  };\n\n  return Campaign;\n});\n\n","\ndefine('text!finder/templates/no-results.tpl.html',[],function () { return '<div class=\"no-result\">\\n  <div class=\"wrapper\">\\n    <p class=\"message\"><%= Drupal.t(\"Oh snap! We\\'ll work on that.\") %></p>\\n    <p>\\n      <a id=\"reset-filters\" href=\"/\">\\n        <%= Drupal.t(\"Want to try another combo?\") %>\\n      </a>\\n    </p>\\n  </div>\\n</div>\\n';});\n\n","define('finder/ResultsView',['require','jquery','lodash','finder/Campaign','text!finder/templates/no-results.tpl.html'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n  var _ = require(\"lodash\");\n  var Campaign = require(\"finder/Campaign\");\n  var noResultsTplSrc = require(\"text!finder/templates/no-results.tpl.html\");\n\n  /**\n   * ResultsView manages search results from Finder\n   * @type {Object}\n   */\n  var ResultsView = {\n    // The container element where the results go\n    $container: null,\n\n    // The gallery located in the container\n    $gallery: $(\"<ul class='gallery -mosaic'></ul>\"),\n\n    // The div that is shown if no filters are selected\n    $blankSlateDiv: null,\n\n    // How many slots are currently used. Full-height = 2, half-height = 1\n    slots: 0,\n\n    // How many slots are we allowing\n    maxSlots: 8,\n\n    // For tracking what page we're on\n    start: 0,\n\n    /**\n     * Construct the cloneables and set the parent div where the results go\n     * @param  {jQuery} $container        The container element where the results will live\n     * @param  {jQuery} $blankSlateDiv    The div containing initial pre-filtered state\n     * @param  {function} paginateAction  Function to query next page of results.\n     */\n    init: function ($container, $blankSlateDiv, paginateAction, clearFormAction) {\n      ResultsView.$container = $container;\n      ResultsView.$container.hide();\n\n\n      ResultsView.$paginationLink = $(\n        \"<div class='pagination-link'><a href='#' class='secondary js-finder-show-more'>\" +\n          Drupal.t(\"Show More\") +\n        \"</a></div>\"\n      );\n\n      $(\"body\").on(\"click\", \".js-finder-show-more\", function(event) {\n        event.preventDefault();\n        paginateAction(ResultsView.start);\n      });\n\n      ResultsView.$blankSlateDiv = $blankSlateDiv;\n\n      ResultsView.$container.on(\"click\", \"#reset-filters\", function(event) {\n        event.preventDefault();\n\n        ResultsView.showBlankSlate();\n\n        // TODO: Maybe allow for FormView.clear() to be called from ResultsView so\n        // it doesn't have to be passed in as an argument to the init().\n        clearFormAction();\n      });\n    },\n\n    /**\n     * Shows the blank slate div (initial state).\n     */\n    showBlankSlate: function() {\n      ResultsView.$container.hide();\n      ResultsView.$blankSlateDiv.show();\n    },\n\n    /**\n     * Shows the empty slate div (no results state).\n     */\n    showEmptyState: function() {\n      var message = _.template(noResultsTplSrc);\n\n      ResultsView.$container.append(message);\n    },\n\n    /**\n     * Replace current results with new data\n     * @param  {Object} data The raw data from the query\n     */\n    parseResults: function (data) {\n      // Remove the old results\n      ResultsView.clear();\n\n      if (data.retrieved > 0) {\n        // Results view cleared, and since we have results add the gallery into the container.\n        ResultsView.$container.append(ResultsView.$gallery);\n\n        // Loopy loop! (Like me after drinking coffeeeee)\n        for (var i in data.result.response.docs) {\n          ResultsView.add(new Campaign(data.result.response.docs[i]));\n        }\n\n        // There are more results than we've shown so far, add \"Show More\" button\n        ResultsView.showPaginationLink(data.result.response.numFound > ResultsView.start);\n      } else {\n        ResultsView.showEmptyState();\n      }\n\n      // Hey! We're done loading! I guess we can let the users know we're done.\n      ResultsView.loading(false);\n    },\n\n    /**\n     * Show or hide pagination link.\n     * @param {boolean} showLink    Should link be shown?\n     */\n    showPaginationLink: function(showLink) {\n      ResultsView.$paginationLink.remove();\n\n      if(showLink) {\n        ResultsView.$container.append(ResultsView.$paginationLink);\n        ResultsView.$paginationLink.show();\n      }\n    },\n\n    /**\n     * Append to current results with new data.\n     * @param  {Object} data The raw data from the query\n     */\n    appendResults: function (data) {\n      // Add those results to the page!\n      for (var i in data.result.response.docs) {\n        ResultsView.add(new Campaign(data.result.response.docs[i]));\n      }\n\n      // There are more results than we've shown so far, add \"Show More\" button\n      ResultsView.showPaginationLink(data.result.response.numFound > ResultsView.start);\n\n      // Hey! We're done loading! I guess we can let the users know we're done.\n      ResultsView.loading(false);\n    },\n\n    /**\n     * Toggle the loading indicator for the results div\n     * @param  {boolean} setTo Should I stay or should I go? If I go there will be trouble...or clicking.\n     */\n    loading: function (setTo) {\n      // Allow the function to be called without a parameter, since X.loading() would seem\n      // to be a logical call.\n      if (setTo === undefined) {\n        setTo = true;\n      }\n\n      // If we're loading, add a class to the results div. Otherwise, remove it.\n      ResultsView.$container.append(\"<div class='spinner'></div>\");\n      ResultsView.$container.toggleClass(\"loading\", setTo);\n    },\n\n    /**\n     * Have we run the init method?\n     */\n    checkInit: function () {\n      if (ResultsView.$container === null) {\n        // Nope. I'm gonna vomit...\n        throw Drupal.t(\"Error: ResultsView is not initialized.\");\n      }\n\n      // Yup.\n    },\n\n    /**\n     * Remove the current results and reboot this object.\n     */\n    clear: function () {\n      ResultsView.checkInit();\n      ResultsView.$container.empty();\n      ResultsView.$gallery.empty();\n\n      ResultsView.$container.show();\n      ResultsView.$blankSlateDiv.hide();\n\n\n      ResultsView.slots = 0;\n      ResultsView.start = 0;\n    },\n\n    /**\n     * Add a campaign to the results\n     * @param {Campaign} campaign The campaign to add\n     */\n    add: function (campaign) {\n      // Make sure we've initialized ourself\n      ResultsView.checkInit();\n\n      // If we're full, screw it.\n      // if (ResultsView.slots === ResultsView.maxSlots) {\n      //   return;\n      // }\n\n      // Render campaign object and append to the gallery\n      ResultsView.$gallery.append(campaign.render());\n      ResultsView.slots++;\n\n      // Track where we are for paging\n      ResultsView.start++;\n\n      // Lazy-load in images\n      ResultsView.$container.find(\"img\").unveil(200, function() {\n        $(this).load(function() {\n          this.style.opacity = 1;\n        });\n      });\n    }\n  };\n\n  return ResultsView;\n});\n\n","define('finder/SolrAdapter',['require','jquery','lodash'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n  var _ = require(\"lodash\");\n\n  // Create a callback function for caching the jsonp response.\n  /* jshint ignore:start */\n  window.solrResponse = function(response) {};\n  /* jshint ignore:end */\n\n  /**\n   * SolrAdapter acts as a mediator between Solr and the Campaign Finder.\n   *\n   * @type {Object}\n   */\n  var SolrAdapter = {\n    /*\n     * Sets how long after a user interaction we run the Solr query. As the\n     * name implies, this is a throttling mechanism that prevents the browser\n     * from pinging Solr every...single...time...a checkbox is changed.\n     **/\n    throttleTimeout: 400,\n\n    /*\n     * Configure this too. What's the base URL of the Solr server that you want\n     * the browser pinging? And what collection?\n     **/\n    baseURL: Drupal.settings.dosomethingSearch.solrURL,\n    collection: Drupal.settings.dosomethingSearch.collection,\n\n    // The current throttle timeout identifier\n    throttle: null,\n\n    // This would be awesome with an object key:value, but Solr allows multiple of the same key\n    defaultQuery: [\n      \"fq=-sm_field_campaign_status:(closed) bundle:[campaign TO campaign_group]\",\n      //\"fq=ss_field_search_image:[* TO *]\",\n      \"wt=json\",\n      \"indent=false\",\n      \"facet=true\",\n      \"facet.field=fs_field_active_hours\",\n      \"facet.field=im_field_cause\",\n      \"facet.field=im_field_action_type\",\n      // TODO: un-hard-code the rows\n      \"rows=8\",\n      \"fl=label,tid,im_vid_1,sm_vid_Action_Type,tm_vid_1_names,im_field_cause,im_vid_2,sm_vid_Cause,tm_vid_2_names,im_field_tags,im_vid_5,sm_vid_Tags,tm_vid_5_names,fs_field_active_hours,sm_field_call_to_action,bs_field_staff_pick,ss_field_search_image_400x400,ss_field_search_image_720x720,url\"\n    ],\n\n    // Map the input field names to the Solr query fields\n    fieldMap: {\n      \"cause\": \"im_field_cause\",\n      \"time\": \"fs_field_active_hours\",\n      \"action-type\": \"im_field_action_type\"\n    },\n\n    // Inverse mapping of fieldMap (duhhh)\n    fieldMapInverse: {},\n\n\n    // Container for Ajax response data\n    responseData: null,\n\n    /**\n     * Initialize the SolrAdapter.\n     */\n    init: function() {\n      // Create an inverse mapping so we can go from Solr field name to local field name\n      SolrAdapter.fieldMapInverse = _.invert(SolrAdapter.fieldMap);\n    },\n\n    /**\n     * Run the query after a specified timeout.\n     *\n     * @param checkedFields      Array of fields selected in the interface.\n     * @param offset             Offset to start results from (used for pagination).\n     * @param responseCallback   Function called when query successfully completes.\n     */\n    throttledQuery: function(checkedFields, offset, responseCallback) {\n      // Cancel the current pending query and set a new one\n      clearTimeout(SolrAdapter.throttle);\n\n      // Set a timeout so we don't immediately ping the Solr server\n      SolrAdapter.throttle = setTimeout(function() {\n        SolrAdapter.query(checkedFields, offset, responseCallback);\n      }, SolrAdapter.throttleTimeout);\n    },\n\n    /**\n     * Run the query against the Solr server\n     *\n     * @param checkedFields      Array of fields selected in the interface.\n     * @param offset             Offset to start results from (used for pagination).\n     * @param responseCallback   Function called when query successfully completes.\n     */\n    query: function (checkedFields, offset, responseCallback) {\n      /**\n       * A clone of the default query so we don't modify it directly\n       * @type {Array}\n       */\n      var query = _.clone(SolrAdapter.defaultQuery);\n      query.push(\"start=\" + offset);\n\n      /**\n       * The \"q\" parameter passed to Solr\n       * @type {Array}\n       */\n      var q = [];\n\n      _.forOwn(checkedFields, function(fields, fieldGroup) {\n        // Don't build parameter if we're not sorting by anything in this field group.\n        if( !_.isEmpty(fields) ) {\n          // Build a param query\n          var param = \"(\" + fields.join(\") OR (\") + \")\";\n\n          /*\n           * Use a powerset to weight items. For example, given:\n           *   ☑ Animals\n           *   ☑ Disasters\n           * We should weight results that are animals AND disasters before results\n           * that are animals OR disasters.\n           **/\n          var powerset = SolrAdapter.generatePowerset(fields);\n          if (powerset.length) {\n            param += \" OR \" + powerset;\n          }\n\n          // Push the newly built parameter onto the q parameter\n          q.push(SolrAdapter.fieldMap[fieldGroup] + \":\" + \"(\" + encodeURIComponent(param) + \")\");\n        }\n      });\n\n      // If we're already running an AJAX request, cancel it\n      if (SolrAdapter.xhr) {\n        SolrAdapter.xhr.abort();\n      }\n\n      // Store the AJAX request locally\n      SolrAdapter.xhr = $.ajax({\n        dataType: \"jsonp\",\n        cache: true,\n        jsonpCallback: \"solrResponse\",\n        url: SolrAdapter.buildQuery(query, q),\n        success: function (data) {\n          responseCallback({\n            result: data,\n            retrieved: data.response.docs.length,\n          });\n        },\n        error: function(data, errorType) {\n          responseCallback({\n            result: false,\n            error: errorType\n          });\n        },\n        // We use jsonp for X-domain compatibility\n        jsonp: \"json.wrf\"\n      });\n    },\n\n    /**\n     * Build a Solr query based on a base query string (what comes after the ?)\n     * and a \"q\" which goes into the \"q=\" part of said query string.\n     *\n     * @param  {String} query The query string\n     * @param  {String} q     The string for concatting into the q= parameter\n     *\n     * @return {String} The entire URL to query against\n     */\n    buildQuery: function (query, q) {\n      // Add \"q=\" to the query array, and keep track of its position because we\"re going\n      // to need to modify it (less memory!)\n      var pos = query.push(\"q=\") - 1;\n\n      // Add a function query to bubble staff picks, sponsored, and high season to the top.\n      var bubble = \"_query_:\\\"{!func}scale(is_bubble_factor,0,100)\\\" AND \";\n\n      if (q.length > 0) {\n        // If there is a query, join that sucker together\n        if (q.length === 1) {\n          query[pos] = \"q=\" + bubble + q[0];\n        } else {\n          query[pos] = \"q=\" + bubble + \"(\" + q.join(\") AND (\") + \")\";\n        }\n      } else {\n        query[pos] = bubble;\n      }\n\n      // Join the query array together as a URL query string\n      query = query.join(\"&\");\n\n      return SolrAdapter.baseURL + SolrAdapter.collection + \"/select?\" + query;\n    },\n\n    /**\n     * This one's fun! We want to generate power sets so we can weight results in a search.\n     *\n     * Instead of reading the code, here's an example!\n     *\n     * [a, b, c]\"s powerset+weight is:\n     * - []             IGNORED (i=0)\n     * - [a]            IGNORED (length=1)\n     * - [b]            IGNORED (length=1)\n     * - [c]            IGNORED (length=1)\n     * - (a AND b)      ^200\n     * - (b AND c)      ^200\n     * - (a AND b AND c)^300\n     *\n     *\n     * @param  {Array} params Parameters to powerset-ize\n     *\n     * @return {String} A powerset-ized query string joined by OR\n     */\n    generatePowerset: function (params) {\n      // Create a powerset\n      // See: http://rosettacode.org/wiki/Power_set#JavaScript\n      function powerset(ary) {\n        var ps = [[]];\n        for (var i=0; i < ary.length; i++) {\n          for (var j = 0, len = ps.length; j < len; j++) {\n            ps.push(ps[j].concat(ary[i]));\n          }\n        }\n        return ps;\n      }\n\n      // Generate the powerset\n      var variations = powerset(params);\n\n      // The placeholder query\n      var q = [];\n\n      // Loop through and build the string query\n      for (var i = 1; i < variations.length; i++) {\n        if (variations[i].length > 1) {\n          // Generate a string of format: ((a) AND (b) AND (c OR d))^X\n          // We need the second set of parenthesis beacuse some parameters are in the format\n          // \"c OR d\" or \"[* TO 2]\"\n          q.push(\"((\" + variations[i].join(\") AND (\") + \"))^\" + (100*variations[i].length));\n        }\n      }\n\n      return q.join(\" OR \");\n    }\n  };\n\n  return SolrAdapter;\n});\n\n","\ndefine('text!finder/templates/error.tpl.html',[],function () { return '<div class=\"messages error\">\\n  <%= Drupal.t(\"Ooof! We\\'re not sure what\\'s up? Maybe it\\'s us, or it could be your internet connection. Want to try again in a few minutes?\") %>\\n</div>\\n';});\n\n","define('finder/FormView',['require','jquery','lodash','finder/ResultsView','finder/SolrAdapter','text!finder/templates/error.tpl.html'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n  var _ = require(\"lodash\");\n  var ResultsView = require(\"finder/ResultsView\");\n  var SolrAdapter = require(\"finder/SolrAdapter\");\n  var errorTplSrc = require(\"text!finder/templates/error.tpl.html\");\n\n  /**\n   * FormView manages the filter form for Finder\n   * @type {Object}\n   */\n  var FormView = {\n    // The div where the form goes\n    $div: null,\n\n    // <button> that mobile users click to initiate the search\n    $searchButton: null,\n\n    // The field groups that contain the checkmarks\n    $fields: {},\n\n    // The last field group that was changed (by name)\n    lastChanged: null,\n\n    // TODO: Can we get this from CSS somewhere instead so it's not hard-coded?\n    cssBreakpoint: 768,\n\n    /**\n     * Construct the cloneables and set the parent div where the results go\n     * @param  {jQuery} $div The div where the results will live\n     */\n    init: function ($div, queryCallback) {\n      FormView.$div = $div;\n\n      // Prepare toggles\n      $div.find(\"[data-toggle]\").click(function () {\n        var $this = $(this),\n          toggleClass = $this.data(\"toggle\"),\n          $parent = $this.parent(\".\" + toggleClass),\n          $siblings = $parent.siblings();\n\n        $parent.toggleClass(\"open\");\n\n        // Need to treat siblings slightly differently to safeguard when going from mobile to desktop.\n        if ($(window).outerWidth() >= FormView.cssBreakpoint) {\n          if ($parent.hasClass(\"open\")) {\n            $siblings.addClass(\"open\");\n          } else {\n            $siblings.removeClass(\"open\");\n          }\n        }\n      });\n\n      // Store the inputs so we can access them later\n      FormView.$fields.cause = $div.find(\"input[name='cause']\");\n      FormView.$fields.time = $div.find(\"input[name='time']\");\n      FormView.$fields[\"action-type\"] = $div.find(\"input[name='action-type']\");\n\n      // Hook up to the DOM\n      FormView.$searchButton = $div.find(\".campaign-search\");\n\n      // Loop through each field selector\n      // @TODO This is tightly coupled.\n      _.each(FormView.$fields, function(fieldGroup) {\n        // For each field selector, we need to add a Facet query so we can get counts to\n        // disable the checkbox.\n        fieldGroup.each(function(idx, element) {\n          /**\n           * The Solr field name that we're going to query against\n           * @type {String}\n           */\n          var field = SolrAdapter.fieldMap[$(element).prop(\"name\")];\n\n          /**\n           * The value of the field that we're passing in to the query\n           * @type {String}\n           */\n          var val = $(element).val();\n\n          // Add the facet query\n          SolrAdapter.defaultQuery.push(\"facet.query=\" + field + \":\" + val);\n        });\n      });\n\n      // Now attach events:\n      _.each(FormView.$fields, function(fieldGroup) {\n        // Attach ourselves to the \"change\" event on the input fields\n        fieldGroup.change(function () {\n          // check this guy\n          $(this).parents(\"li\").toggleClass(\"checked\", $(this).is(\":checked\"));\n\n          // Save the last checkbox that we checked so we don\"t disable any of\n          // those fields if we\"re trying to select multiple\n          FormView.lastChanged = $(this).attr(\"name\");\n\n          // If we're not on mobile...\n          queryCallback();\n        });\n      });\n\n      // Search button appears on mobile in lieu of live filtering\n      FormView.$searchButton.click(function () {\n        queryCallback();\n        $(\"html,body\").animate({\n          scrollTop: ResultsView.$div.offset().scrollTop\n        }, 1000);\n      });\n    },\n\n    /**\n     * Have we run the init method?\n     */\n    checkInit: function () {\n      if (FormView.$div === null) {\n        // Nope. I'm gonna vomit...\n        throw Drupal.t(\"Error: FormView is not initialized.\");\n      }\n\n      // Yup.\n    },\n\n\n    /**\n     * Shows an error message for network issues\n     **/\n    showErrorMessage: function() {\n      var message = _.template(errorTplSrc);\n\n      if ($(\".error\").length < 1) {\n        FormView.$div.parents(\".finder--form\").after(message);\n      }\n\n    },\n\n\n    /**\n     * Returns Boolean if any fields are checked\n     **/\n    hasCheckedFields: function() {\n      var hasChecked = false;\n\n      // Loop through each of the field groups\n      _.each(FormView.$fields, function(fieldGroup) {\n        if (fieldGroup.filter(\":checked\").length > 0) {\n          hasChecked = true;\n        }\n      });\n\n      return hasChecked;\n    },\n\n    /**\n     * Returns an object with arrays of checked fields grouped by fieldGroup.\n     **/\n    getCheckedFields: function() {\n      var checkedFields = [];\n\n      // Loop through each of the field groups\n      _.each(FormView.$fields, function(fieldGroup, groupName) {\n        var checked = fieldGroup.filter(\":checked\");\n        checkedFields[groupName] = [];\n\n        // Only add this to the query if there are fields checked in this field group\n        if (checked.length > 0) {\n          // For each checked box, add it to the search query\n          checked.each(function (index, e) {\n            checkedFields[groupName].push($(e).val());\n          });\n        }\n      });\n\n      return checkedFields;\n    },\n\n\n    /**\n     * Disable fields that have no results available for the given selection\n     *\n     * @param  {Object} results The Solr facet_queries result\n     */\n    disableFields: function(results) {\n      // Make sure we've initialized ourself\n      FormView.checkInit();\n\n      // @TODO: This is super inefficient. We should be storing state in memory\n      // rather than in the DOM, and then rendering the form based on that state.\n\n      // for each of the facet queries\n      _.each(results, function(query, key) {\n        // Solr returns results in the format field_label:count instead of a nice\n        // associative array. :( Let\"s parse that out.\n        var keyArr = key.split(\":\");\n        var field = keyArr[0],\n            value = keyArr[1];\n\n        // If we've checked something in this group, disable 'em all. Otherwise, use facets\n        // to disable impossible choices.\n        var $checkboxes = $(\"input[name='\" + SolrAdapter.fieldMapInverse[field] + \"']\");\n\n        if( !_.isEmpty($checkboxes.filter(\":checked\")) ) {\n          $checkboxes.filter(\":not(:checked)\").prop(\"disabled\", true);\n          $checkboxes.filter(\":not(:checked)\").parents(\"li\").addClass(\"disabled\");\n        } else {\n          // Should we disable this field? Whelp, if there are no results, the answer is yes!\n          var disabled = results[key] === 0;\n          var $checkbox = $checkboxes.filter(\"[value='\" + value + \"']\");\n\n          // Set the disabled attribute if we need to (note: disabled is a variable!)\n          $checkbox.prop(\"disabled\", disabled);\n\n          if (disabled) {\n            // Let\"s uncheck it if we can't select it. It would be confusing otherwise.\n            $checkbox.prop(\"checked\", !disabled);\n\n            // And add a class so we can make it look purdy.\n            $checkbox.parents(\"li\").addClass(\"disabled\");\n          } else {\n            // Oh, hey! It's re-enabled! Let\"s make it look purdier than it was.\n            $checkbox.parents(\"li\").removeClass(\"disabled\");\n          }\n        }\n      });\n    },\n\n    /**\n     * Remove the current results and reboot this object.\n     */\n    clear: function() {\n      //FormView.checkInit();\n      _.each(FormView.$fields, function(fieldGroup) {\n        var disabled = fieldGroup.filter(\":disabled\");\n        if (disabled) {\n          fieldGroup.prop(\"disabled\", false)\n            .parents(\"li\").removeClass(\"disabled\");\n        }\n      });\n    }\n  };\n\n  return FormView;\n});\n\n","define('finder/Finder',['require','finder/FormView','finder/ResultsView','finder/SolrAdapter'],function(require) {\n  \"use strict\";\n\n  var FormView = require(\"finder/FormView\");\n  var ResultsView = require(\"finder/ResultsView\");\n  var SolrAdapter = require(\"finder/SolrAdapter\");\n\n  /**\n   * Finder manages the search action\n   *\n   * @type {Object}\n   */\n  var Finder = {\n\n    /**\n     * Initialize the Campaign Finder and, by extension, the Campaign Results handler\n     *\n     * @param  {JQuery} $formContainer       The div that the filters will be shown in\n     * @param  {JQuery} $resultsContainer    The container element that the results will be injected into\n     * @param  {JQuery} $blankSlate          The div that will be shown when no filter is selected\n     */\n    init: function ($formContainer, $resultsContainer, $blankSlate) {\n      // Initialize the ResultsView\n      FormView.init($formContainer, Finder.query);\n      ResultsView.init($resultsContainer, $blankSlate, Finder.query, FormView.clear);\n\n      // Prepare the Solr adapter\n      SolrAdapter.init();\n    },\n\n    /**\n     * Run the query against the Solr server\n     * @param  {int} offset   Offset to start results at (used for pagination).\n     */\n    query: function(offset) {\n      var queryOffset = offset || 0;\n      var checkedFields = FormView.getCheckedFields();\n\n      // Run the Solr query\n      if(!queryOffset) {\n        // If no offset, we display a new set of results\n        SolrAdapter.throttledQuery(checkedFields, queryOffset, Finder.displayResults);\n      } else {\n        // Otherwise, append to existing result set\n        SolrAdapter.throttledQuery(checkedFields, queryOffset, ResultsView.appendResults);\n      }\n\n      // Mark the results pane as loading\n      ResultsView.loading();\n    },\n\n    /**\n     * Displays results after querying Solr.\n     * @param data  Results from SolrAdapter\n     **/\n    displayResults: function(data) {\n      if (data.result) {\n        if(FormView.hasCheckedFields()) {\n          ResultsView.parseResults(data);\n          /* jshint ignore:start */\n          // Using that underscore variable notation for Solr.\n          FormView.disableFields(data.result[\"facet_counts\"][\"facet_queries\"]);\n          /* jshint ignore:end */\n        } else {\n          ResultsView.showBlankSlate();\n          FormView.clear();\n        }\n      } else {\n        FormView.showErrorMessage();\n      }\n    }\n  };\n\n  return Finder;\n});\n\n","define('StripeForm',['require','jquery'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\"),\n    Stripe = window.Stripe || {};\n\n  /**\n    * Creates an instance of StripeForm.\n    *\n    * @constructor\n    * @this {StripeForm}\n    * @param {jQuery} $form The payment form\n    * @param {String} publishKey Publishable Stripe key.\n  */\n  var StripeForm = function ($form, publishKey) {\n    if ($form === undefined || !$($form.length)) { return; }\n    if (publishKey === undefined) { return; }\n    if (!this instanceof StripeForm) { return new StripeForm($form, publishKey); }\n    this.$form = $($form);\n    this.$parent = this.$form.parent();\n    this.publishKey = publishKey;\n    this.init();\n  };\n  StripeForm.prototype = {\n    /**\n      * Sets the publishable key to Stripe and adds event listeners to the form\n    */\n    init: function () {\n      var _this = this;\n      Stripe.setPublishableKey(this.publishKey);\n\n      this.$form.on(\"submit\", function (ev) {\n        ev.preventDefault();\n      });\n\n      // attach event listener to submit button to avoid double binding\n      this.$form.find(\".form-submit\").on(\"click\", function () {\n        // Timeout needed so errors (if any) can render first\n        setTimeout(function () {\n          var isValid = _this.isValid();\n          if (isValid) {\n            Stripe.card.createToken(_this.$form, function (status, response) {\n              _this.onFormSubmit(status, response);\n            });\n          }\n        }, 100);\n      });\n    },\n\n    /**\n      * Callback method when form is submitted\n      * @param {String} Response status code\n      * @param {object} JSON response from submitted token\n    */\n    onFormSubmit: function (status, response) {\n      var $form = this.$form;\n      if (response.error) {\n        // Show the errors on the form\n        $form.find(\".payment-errors\").text(response.error.message);\n      } else {\n        // response contains id and card, which contains additional card details\n        var token = response.id;\n        $form.find(\"input[name='token']\").val(token);\n        $form.get(0).submit();\n      }\n    },\n\n    /**\n      * Checks for invalid form fields\n      * @returns {boolean} Whether form contains zero errors or not\n    */\n    isValid: function () {\n      return this.$form.find(\".error\").length === 0;\n    }\n  };\n\n  return StripeForm;\n\n});\n\n","define('donate/Donate',['require','jquery','StripeForm'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n  var StripeForm = require(\"StripeForm\");\n  var $donateForm = $(\"#dosomething-payment-form\");\n\n  var Donate = {\n    init: function () {\n      try {\n        var stripeAPIPublishKey = Drupal.settings.dosomethingPayment.stripeAPIPublish;\n        new StripeForm($donateForm, stripeAPIPublishKey);\n      } catch(e) {\n        $donateForm.html(\"<div class='messages'>Whoops! Something's not right. Please email us!</div>\");\n      }\n    }\n  };\n\n  return Donate;\n\n});\n\n","define('revealer/Revealer',['require','jquery'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n\n  /**\n   * Allows for specified grouping of elements to be hidden and then revealed \n   * via an interactive \"Show More\" button.\n   * \n   * @param {jQuery} $container The container element object that encloses the items to hide.\n   * @param {jQuery} $content   A collection of objects to hide.\n   * @param {string} category   Specify a category type for the content to provide more unique behavior.\n   */\n  var Revealer = function($container, $content, category) {\n    this.$container = $container;\n    this.$content   = $content;\n    this.$button    = $(\"<button class=\\\"btn tertiary\\\">\" + Drupal.t(\"Show More\") + \"</button>\");\n    this.category   = category;\n    this.steps      = {\n      // Array of step items to include with each button interaction.\n      items: [],\n\n      // Number of steps.\n      count: 0\n    };\n\n    this.init();\n  };\n\n\n  Revealer.prototype.init = function () {\n    if (this.category === \"gallery\") {\n      this.prepGalleryItems();\n    }\n    else {\n      this.steps.items.push(this.$content);\n    }\n\n    this.steps.count = this.steps.items.length;\n\n    this.detachContent();\n    this.enableButton();\n  };\n\n\n  Revealer.prototype.detachContent = function () {\n    this.$content.detach();\n  };\n\n\n  Revealer.prototype.reattachContent = function (content) {\n    this.$container.append(content);\n  };\n\n\n  Revealer.prototype.enableButton = function () {\n    this.$button.insertAfter(this.$container);\n\n    var _this = this;\n\n    this.$button.on(\"click\", function () {\n\n      if (_this.steps.count > 0) {\n        _this.reattachContent(_this.steps.items.shift());\n        _this.steps.count--;\n      }\n\n      if (_this.steps.count === 0) {\n        _this.$button.remove();\n      }\n\n    });\n  };\n\n\n  Revealer.prototype.prepGalleryItems = function () {\n    this.$content = this.$content.slice(5);\n    var collection = $.makeArray(this.$content);\n\n    // Multiple step reveals.\n    if (this.$content.length > 8) {\n      while (collection.length > 0) {\n        this.steps.items.push(collection.splice(0, 8));\n      }\n    }\n    else {\n      this.steps.items.push(collection);\n    }\n    \n    collection = null;\n  };\n\n\n  return Revealer;\n\n});\n\n","define('swapper/Swapper',[],function() {\n  \"use strict\";\n\n  var Swapper = function ($content) {\n    this.$image   = $content.find(\"img\");\n\n    this.init();\n  };\n\n\n  Swapper.prototype.init = function () {\n    var srcLarge = this.$image.data(\"src-large\") || null;\n\n    this.exchange(srcLarge);\n  };\n\n\n  Swapper.prototype.exchange = function (url) {\n    if (url) {\n      this.$image.attr(\"src\", url);\n    }\n  };\n\n\n  return Swapper;\n\n});\n\n","/**\n * @module neue/events\n * Pub/Sub events: Allows modules to communicate via publishing\n * and subscribing to events.\n *\n * Based on Addy Osmani's Pubsubz, licensed under the GPL.\n * https://github.com/addyosmani/pubsubz\n * http://jsfiddle.net/LxPrq/\n */\n\ndefine('neue/events',[],function() {\n  \"use strict\";\n\n  var topics = {};\n  var subUid = -1;\n\n  var publish = function(topic, args) {\n    if (!topics[topic]) {\n      return false;\n    }\n\n    setTimeout(function() {\n      var subscribers = topics[topic],\n      len = subscribers ? subscribers.length : 0;\n\n      while(len--) {\n        subscribers[len].func(topic, args);\n      }\n    }, 0);\n\n    return true;\n  };\n\n  var subscribe = function(topic, func) {\n    if (!topics[topic]) {\n      topics[topic] = [];\n    }\n\n    var token = (++subUid).toString();\n    topics[topic].push({\n      token: token,\n      func: func\n    });\n\n    return token;\n  };\n\n  var unsubscribe = function(token) {\n    for (var m in topics) {\n      if (topics[m]) {\n        for (var i = 0, j = topics[m].length; i < j; i++) {\n          if (topics[m][i].token === token) {\n            topics[m].splice(i, 1);\n            return token;\n          }\n        }\n      }\n    }\n\n    return false;\n  };\n\n  // Export public API\n  return {\n    publish: publish,\n    subscribe: subscribe,\n    unsubscribe: unsubscribe\n  };\n});\n\n","/**\n * @module neue/modal\n * Show/hide modals. To link to a modal, add a `data-modal-href` attribute\n * pointing to the selector for the modal you want to show.\n *\n * @example\n * // <a href=\"http://www.example.com\" data-modal-href=\"#modal--example\">Click!</a>\n * // <div data-modal id=\"modal--example\" role=\"dialog\">\n * //   <!-- content -->\n * // </div>\n *\n */\n\ndefine('neue/modal',['require','./events'],function(require) {\n  \"use strict\";\n\n  var $ = window.jQuery;\n  var Modernizr = window.Modernizr;\n  var Events = require(\"./events\");\n\n  var modalReady = false;\n  var queuedModal = null; // Modals queued to be shown on document.ready\n\n  // Cache commonly used jQuery objects\n  var $document = $(document);\n  var $chrome = $(\".chrome\");\n  var $modalContainer = null;\n\n  // UI elements:\n  var $skipLink = $(\"<a href='#' class='js-close-modal js-modal-generated modal-close-button -alt'>skip</a>\");\n  var $closeLink = $(\"<a href='#' class='js-close-modal js-modal-generated modal-close-button'>&#215;</a>\");\n\n  // The currently open modal\n  var $modal = null;\n\n  // Whether this modal can be closed by the user\n  var closeable = false;\n\n  // Return a boolean if modal is open or not\n  var isOpen = function() {\n    return ($modal !== null);\n  };\n\n  // Programmatically add close button to modal.\n  var _addCloseButton = function($el, type, skipForm) {\n    switch(type) {\n      case \"skip\":\n        // Add a skip button, which delegates to the submitting the form with the given ID\n        $el.prepend( $skipLink );\n        $skipLink.on(\"click\", function(event) {\n          event.preventDefault();\n          $(skipForm).submit();\n        });\n        closeable = false;\n        break;\n\n      case \"false\":\n      case \"0\":\n        closeable = false;\n        break;\n\n      default:\n        $el.prepend($closeLink);\n        closeable = true;\n    }\n  };\n\n  /**\n   * Open a new modal\n   * @param {jQuery}  $el                         Element that will be placed inside the modal.\n   * @param {boolean} [options.animated=true]     Use animation for opening the modal.\n   * @param {boolean} [options.closeButton]       Override `data-modal-close` attribute.\n   * @param {boolean} [options.skipForm]          Override `data-modal-skip-form` attribute.\n   */\n  var open = function($el, options) {\n    options = options || {};\n    options.animated = typeof options.animated === \"boolean\" ? options.animated : true;\n    options.closeButton = typeof options.closeButton !== \"undefined\" ? options.closeButton : $el.attr(\"data-modal-close\");\n    options.skipForm = typeof options.skipForm !== \"undefined\" ? options.skipForm : $el.attr(\"data-modal-skip-form\");\n\n    if($el.length === 0) {\n      // If modal does not exist, don't try to open it.\n      return false;\n    }\n\n    // If modal markup isn't initialized, save and display once it is.\n    if(!modalReady) {\n      queuedModal = {\"$el\": $el, \"options\": options};\n      return false;\n    }\n\n    // Read from DOM\n    var offsetTop = \"-\" + $document.scrollTop() + \"px\";\n\n    // Add generated content\n    _addCloseButton($el, options.closeButton, options.skipForm);\n\n    if(!isOpen()) {\n      // Set up overlay and show modal\n      $chrome.css(\"top\", offsetTop);\n      $chrome.addClass(\"modal-open\");\n      $modalContainer.css(\"display\", \"block\");\n      if(options.animated && Modernizr.cssanimations) {\n        $modalContainer.addClass(\"animated-open\");\n      }\n      $el.css(\"display\", \"block\");\n    } else {\n      // Modal is already open, so just replace current content\n      $modal.hide();\n      $el.show();\n    }\n\n    // Make sure we're scrolled to the top of the modal.\n    setTimeout(function() {\n      $document.scrollTop(0);\n    }, 50);\n\n    // We provide an event that other modules can hook into to perform custom functionality when\n    // a modal opens (such as preparing things that are added to the DOM, etc.)\n    Events.publish(\"Modal:Open\", $el);\n\n    // Keep track of whether modal is open or not\n    $modal = $el;\n  };\n\n  // Cleanup after modal animates out\n  var _cleanup = function(scrollOffset) {\n    $modalContainer.css(\"display\", \"none\");\n    $modalContainer.removeClass(\"animated-close\");\n    $modal.css(\"display\", \"none\");\n\n    // Remove any generated content\n    $modal.find(\".js-modal-generated\").remove();\n\n    // Remove overlay and reset scroll position\n    $chrome.removeClass(\"modal-open\");\n    $chrome.css(\"top\", \"\");\n    $document.scrollTop(scrollOffset);\n\n    // Get rid of reference to closed modal\n    $modal = null;\n  };\n\n  /**\n   * Close the active modal.\n   * @param {boolean} [options.animated=true] Use animation for closing the modal.\n   */\n  var close = function(options) {\n    options = options || {};\n    options.animated = typeof options.animated !== \"undefined\" ? options.animated : true;\n\n    var scrollOffset = parseInt($chrome.css(\"top\")) * -1;\n\n    if(options.animated && Modernizr.cssanimations) {\n      $modalContainer.addClass(\"animated-close\");\n      $modalContainer.one(\"webkitAnimationEnd oanimationend msAnimationEnd animationend\", function() {\n        _cleanup(scrollOffset);\n      });\n    } else {\n      _cleanup(scrollOffset);\n    }\n\n    // Remove URL hash for modal from browser\n    if(window.location.hash === \"#\" + $modal.attr(\"id\")) {\n      window.location.hash = \"/\";\n    }\n\n    // We provide an event that other modules can hook into to perform custom functionality when\n    // a modal opens (such as preparing things that are added to the DOM, etc.)\n    Events.publish(\"Modal:Close\", $modal);\n  };\n\n  // Click handler for opening a new modal\n  var _openHandler = function(event) {\n    event.preventDefault();\n    var href = $(this).data(\"modal-href\");\n\n    open($(href));\n  };\n\n  // Click handler for closing a modal\n  var _closeHandler = function(event) {\n    // Don't let the event bubble.\n    if(event.target !== this) {\n      return;\n    }\n\n    // Only close on clicking overlay if this modal has a \"x\" close button\n    if( $(this).hasClass(\"js-close-modal\") || closeable ) {\n      // Override default link behavior.\n      event.preventDefault();\n      close();\n    }\n  };\n\n  $document.ready(function() {\n    var $body = $(\"body\");\n\n    // Create container for modals\n    $modalContainer = $(\"<div class='modal-container'></div>\");\n    $body.append($modalContainer);\n\n    // Prepare the DOM!\n    $(\"[data-modal]\").each(function() {\n      $(this).appendTo($modalContainer);\n      $(this).attr(\"hidden\", true);\n    });\n\n    //If there's a hash in the URL, check if it's a modal and load it\n    var hash = window.location.hash;\n    if(hash && hash !== \"#/\" && $(hash) && typeof $(hash).data(\"modal\") !== \"undefined\") {\n      open($(hash));\n    }\n\n    modalReady = true;\n    if(queuedModal !== null) {\n      open(queuedModal.$el, queuedModal.options);\n    }\n\n    // Bind events to open & close modal\n    $body.on(\"click\", \"[data-modal-href]\", _openHandler);\n    $body.on(\"click\", \".modal-container\", _closeHandler);\n    $body.on(\"click\", \".js-close-modal\", _closeHandler);\n  });\n\n\n  // Return public API for controlling modals\n  return {\n    isOpen: isOpen,\n    open: open,\n    close: close\n  };\n});\n\n","// Move to new folder.\n\ndefine('campaign/ImageCrop',['require','jquery'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n  // Initialize variables.\n  var resizeState = false;\n  var dragState = false;\n  var $cropContainer;\n  var xInitPos;\n  var yInitPos;\n  var offsetLeft;\n  var offsetTop;\n  var initialCropBoxHeight;\n  var initialCropBoxWidth;\n  var previewImageWidth;\n  var previewImageHeight;\n  var minThreshold;\n  var resizeClickPositionX = 0;\n  var resizeClickPositionY = 0;\n  var $resizeHandle = $(\"<div class='resize-handle'><div class='square'></div></div>\");\n  var $cropBox = $(\"<div>\").addClass(\"cropbox\").append($resizeHandle);\n\n  /**\n   * Returns the coordinates of a touch or mouse event.\n   */\n  var getCoords = function(e) {\n    var coords = {};\n    var eventType = e.originalEvent.type;\n\n    // Get the coordinates of a touchevent.\n    if (eventType === \"touchstart\" || eventType === \"touchmove\" || eventType === \"touchend\") {\n      coords = e.originalEvent.targetTouches[0];\n    }\n    // Get coordinates of mouse event.\n    else {\n      coords = {\n        pageX: event.pageX,\n        pageY: event.pageY,\n      };\n    }\n\n    return coords;\n  };\n\n  /**\n   * Turns on the ability to drag the crop box.\n   */\n  var dragCropBoxInit = function() {\n    // Bind touch and mouse events.\n    $cropBox.on(\"touchstart mousedown\", function(event) {\n      event.preventDefault();\n      var coords = getCoords(event);\n\n      // Set the initial position of the mouse.\n      xInitPos = coords.pageX;\n      yInitPos = coords.pageY;\n\n      // Sets the initial positioning of the crop box.\n      offsetLeft = parseInt($cropBox.css(\"left\"), 10);\n      offsetTop = parseInt($cropBox.css(\"top\"), 10);\n\n      // Turns on dragging.\n      dragState = true;\n    });\n  };\n\n  /**\n   * Turns on the ability to resize the crop box.\n   */\n  var resizeCropBoxInit = function() {\n    $(\".resize-handle\").on(\"touchstart mousedown\", function(event) {\n      event.preventDefault();\n\n      // Grab the postioning of the event.\n      var coords = getCoords(event);\n\n      // Set the initial size of the crop box.\n      initialCropBoxHeight = parseInt($cropBox.css(\"height\"), 10);\n      initialCropBoxWidth = parseInt($cropBox.css(\"width\"), 10);\n\n      // Set the position of the mouse.\n      resizeClickPositionX = coords.pageX;\n      resizeClickPositionY = coords.pageY;\n\n      // Turn on resizing.\n      resizeState = true;\n    });\n  };\n\n  /**\n  * Destroys the cropbox.\n  * Allows for resetting the cropbox position after the image has changed.\n  */\n  var dsCropperDestroy = function() {\n    if ($cropBox.length) {\n      $cropBox.remove();\n    }\n  };\n\n  /**\n   * Initiates cropping js.\n   *\n   * @param {jQuery} origImage  Image object to crop\n   */\n  var dsCropperInit = function(origImage, $form) {\n    // Get the original width of the image.\n    var origImageWidth = origImage.width;\n\n    // Get the preview image.\n    var $previewImage = $(\"#modal--crop\").find(\".preview\");\n\n    // Make sure there is a preview image on the page before proceeding.\n    if (!$previewImage.length) {\n      return;\n    }\n\n    // Get the hidden form elements.\n    var $cropX = $form.find(\"input[name='crop_x']\");\n    var $cropY = $form.find(\"input[name='crop_y']\");\n    var $cropWidth = $form.find(\"input[name='crop_width']\");\n    var $cropHeight = $form.find(\"input[name='crop_height']\");\n\n    // Wrap the image in a container and get it's dimensions to use as a boundary.\n    $previewImage.wrap($(\"<div class='crop-bounding-box'></div>\"));\n    $cropContainer = $(\".crop-bounding-box\");\n    previewImageWidth = $cropContainer.width();\n    previewImageHeight = $cropContainer.height();\n\n    // Calculate the initial dimensions of the cropbox. Add the cropbox to the page.\n    $cropBox.width(previewImageHeight / 2);\n    $cropBox.height(previewImageHeight / 2);\n    minThreshold = previewImageHeight / 2;\n    $cropBox.insertBefore($previewImage);\n\n    // Initiate dragging and resizing.\n    dragCropBoxInit();\n    resizeCropBoxInit();\n\n    // Bind move events to the document.\n    $cropBox.on(\"touchmove mousemove\", function(event) {\n      event.preventDefault();\n      var coords = getCoords(event);\n\n      var cropBoxHeight = parseInt($cropBox.css(\"height\"),10);\n      var cropBoxWidth = parseInt($cropBox.css(\"width\"),10);\n      var cropBoxTop = parseInt($cropBox.css(\"top\"), 10);\n      var cropBoxLeft = parseInt($cropBox.css(\"left\"), 10);\n\n      // If dragging, drag the crop box along.\n      if (dragState) {\n        // Calculate how far to move the box down and right based on the mouse position.\n        var moveRight = offsetLeft + (coords.pageX - xInitPos);\n        var moveDown = offsetTop + (coords.pageY - yInitPos);\n\n        // Boundary threshold tests.\n        var withinTopBounds = (previewImageHeight - cropBoxHeight) > moveDown ? true : false;\n        var withinLeftBounds = (previewImageWidth - cropBoxWidth) > moveRight ? true : false;\n\n        // Make sure we are still within the bounds of the image and then actully move the box.\n        if (withinTopBounds && (moveDown > 0)) {\n          $cropBox.css(\"top\", moveDown);\n        }\n        if (withinLeftBounds && (moveRight > 0)) {\n          $cropBox.css( \"left\", moveRight);\n        }\n      }\n      // If resizing, resize the crop box.\n      if (resizeState) {\n        dragState = false;\n        // Calculate how much to resize the cropbox.\n        var resizeHorizontal = initialCropBoxWidth + (coords.pageX - resizeClickPositionX);\n        var resizeVertical = initialCropBoxHeight + (coords.pageX - resizeClickPositionX);\n\n        // Boundary threshold tests.\n        var withinHeightBounds = (cropBoxHeight + cropBoxTop) < previewImageHeight ? true : false;\n        var withinWidthBounds = (cropBoxWidth + cropBoxLeft) < previewImageWidth ? true : false;\n        var cropBoxSizeAllowed = (cropBoxWidth > minThreshold) ? true : false;\n        var increasingSize = (coords.pageX - resizeClickPositionX) > 0 ? true : false;\n        var decreasingSize = (coords.pageX - resizeClickPositionX) < 0 ? true : false;\n\n        // Make sure we are still in the boundaries of the image, and then resize the box.\n        if (withinHeightBounds && withinWidthBounds && (cropBoxSizeAllowed || increasingSize)) {\n          $cropBox.css( \"height\", resizeVertical);\n          $cropBox.css( \"width\", resizeHorizontal);\n        }\n        else if (decreasingSize && cropBoxSizeAllowed) {\n          $cropBox.css( \"height\", resizeVertical);\n          $cropBox.css( \"width\", resizeHorizontal);\n        }\n      }\n    });\n\n    /**\n     *  When the user stops moving the mouse or touching the screen, turn of the drag and resizing events.\n     *  Get the final position and size of the crop and populate hidden form elements with them.\n     */\n    $cropBox.on(\"touchend mouseup\", function() {\n      dragState = false;\n      resizeState = false;\n\n      // Calulate how much the image has been resized.\n      var resizeAmount = origImageWidth / $previewImage.width();\n\n      // Calculate cropping information, taking into account how much the image has been scaled.\n      var finalCrop = {\n        top:    Math.round($cropBox.offset().top - $previewImage.offset().top) * resizeAmount,\n        left:   Math.round($cropBox.offset().left - $previewImage.offset().left) * resizeAmount,\n        width:  $cropBox.width() * resizeAmount,\n        height: $cropBox.height() * resizeAmount,\n      };\n\n      // populate fields.\n      $cropX.val(finalCrop.left);\n      $cropY.val(finalCrop.top);\n      $cropWidth.val(finalCrop.width);\n      $cropHeight.val(finalCrop.height);\n    });\n  };\n\n  return {\n    dsCropperInit: dsCropperInit,\n    dsCropperDestroy: dsCropperDestroy,\n  };\n});\n\n","// Move to new folder.\n\ndefine('campaign/ImageUploadBeta',['require','jquery','neue/modal','campaign/ImageCrop'],function(require) {\n  \"use strict\";\n\n  var $      = require(\"jquery\");\n  var Modal  = require(\"neue/modal\");\n\n  /**\n   * Handles the modal interface for image upload buttons.\n   * Requires a modal to be on the page with an id '#modal--crop'\n   * The modal should have a form '#dosomething-reportback-image-form'\n   * and a div to place the image preview '.image-wrapper'.\n   *\n   * @param {jQuery} $button  The file upload button\n   */\n  var ImageUploadBeta = function($button) {\n    this.$uploadButton   = $button;\n    this.$cropModal      = $(\"#modal--crop\");\n    this.$reportbackForm = $(\"#dosomething-reportback-form\");\n    this.$imageForm      = this.$cropModal.find(\"#dosomething-reportback-image-form\");\n    this.$imagePreview   = this.$cropModal.find(\".image-preview\");\n    this.imageValues     = {};\n    this.cropEnabled     = (typeof Drupal.settings.dsReportback.cropEnabled !== \"undefined\") ? Drupal.settings.dsReportback.cropEnabled : false;\n\n    this.init();\n  };\n\n  /**\n   * Initalizes event listeners\n   *\n   */\n  ImageUploadBeta.prototype.init = function () {\n    var _this = this;\n\n    this.$uploadButton.on(\"change\", function(event) {\n      event.preventDefault();\n\n      var files = !!this.files ? this.files : [];\n\n      // If no file selected/no FileReader support, we're all done\n      if (!files.length || !window.FileReader) {\n        return;\n      }\n\n      // Open the modal.\n      Modal.open(_this.$cropModal,\n        {\n          animated: false,\n        }\n      );\n\n      // Add the preview image to the modal\n      _this.previewImage(files, _this.$imagePreview);\n    });\n\n    /**\n     * On submission of the form, close the modal.\n     * This publishes a close event that other scripts can subscribe to\n     * to use the information collected in the modal.\n     */\n    this.$imageForm.submit(function(event) {\n      event.preventDefault();\n      Modal.close(false);\n    });\n  };\n\n  /**\n   * Return an object containing the information gathered in the modal form.\n   * Creates a preview image of a file and adds it to a container.\n   * If cropping is enabled, it initiates the cropping script.\n   *\n   * @param {jQuery} files           An object representing a file.\n   * @param {jQuery} $imageContainer The DOM element to put the preview image in.\n   */\n  ImageUploadBeta.prototype.previewImage = function(files, $imageContainer) {\n    var $preview = $(\"<img class='preview' src=''>\");\n    $imageContainer.html($preview);\n\n    if (/^image/.test( files[0].type)) {\n      var reader = new FileReader();\n      reader.readAsDataURL(files[0]);\n      var _this = this;\n\n      reader.onloadend = function() {\n        var result = this.result;\n        $preview.attr(\"src\", result).load(function() {\n          // Initiate cropping if it is enabled.\n          if (_this.cropEnabled) {\n            _this.cropInit(result);\n          }\n        });\n      };\n    }\n  };\n\n  /**\n   * Initiates cropping on a file.\n   *\n   * @param {jQuery} result  The result property of a file reader object.\n   */\n  ImageUploadBeta.prototype.cropInit = function(result) {\n    var ImageCrop = require(\"campaign/ImageCrop\");\n    var origImage = new Image();\n    origImage.src = result;\n\n    // Remove any cropping already on the page before initiating.\n    // @TODO - remove this check. the crop init js should be smart enough to reset itself it is already initiate.\n    ImageCrop.dsCropperDestroy();\n    ImageCrop.dsCropperInit(origImage, this.$reportbackForm);\n  };\n\n  /**\n   * Returns the value of the caption field.\n   * Should only be used after the form has been submitted and the modal has closed.\n   *\n   * @return {jQuery} An object of form values.\n   */\n  ImageUploadBeta.prototype.getImageCaption = function() {\n    return this.$imageForm.find(\"#caption\").val();\n  };\n\n  return ImageUploadBeta;\n\n});\n\n","\ndefine('text!reportback/templates/reportback.tpl.html',[],function () { return '<% if (isListItem) { %><li><% } %>\\n<figure class=\"photo -stacked -framed\">\\n  <img src=\"<%= image %>\" alt=\"<%= caption %>\" />\\n  <figcaption class=\"__copy\"><%= caption %></figcaption>\\n</figure>\\n<% if (isListItem) { %></li><% } %>\\n';});\n\n","define('reportback/Reportback',['require','jquery','lodash','neue/events','../campaign/ImageUploadBeta','text!reportback/templates/reportback.tpl.html'],function(require) {\n  \"use strict\";\n\n  var $                = require(\"jquery\");\n  var _                = require(\"lodash\");\n  var Events           = require(\"neue/events\");\n  var ImageUploadBeta  = require(\"../campaign/ImageUploadBeta\");\n  var reportbackTplSrc = require(\"text!reportback/templates/reportback.tpl.html\");\n\n\n  var Reportback = {\n\n    $initialGallery: null,\n    $extendedGallery: null,\n    $viewMoreContainer: null,\n    $viewMoreButton: null,\n\n    apiUrl: \"/api/v1/campaigns\",\n\n    nid: null,\n\n    offset: 0,\n\n    itemsPrefetched: 0,\n\n    itemsTotal: null,\n\n    bundleSize: 8,\n\n    requestSize: 20,\n\n    inventory: [],\n\n    currentIndex: 0,\n\n    galleryInDom: false,\n\n\n    /**\n     * Initialize the Reportback interface.\n     *\n     * @param  {jQuery} $container  Reportback container object.\n     */\n    init: function ($container) {\n      var _this = this;\n\n      this.reportbackContainer = $container;\n      this.$reportbackWrapper  = this.reportbackContainer.find(\".wrapper\");\n      this.$reportbackForm     = this.reportbackContainer.find(\"#dosomething-reportback-form\");\n      this.$uploadButton       = this.reportbackContainer.find(\".js-image-upload-beta\");\n      this.$initialGallery     = $container.find(\".gallery--reportback\");\n\n      this.itemsPrefetched = $container.data(\"prefetched\");\n      this.itemsTotal      = $container.data(\"total\") - this.itemsPrefetched;\n      this.nid             = $container.data(\"nid\");\n      this.offset          = this.itemsPrefetched;\n\n      if (this.itemsPrefetched < this.itemsTotal) {\n        this.apiUrl = this.buildApiUrl();\n        this.enableViewMore();\n        this.enableResponsive();\n      }\n\n      // Initializes image upload modal.\n      var imageUpload = new ImageUploadBeta(this.$uploadButton);\n\n      // Grab the image caption from the modal only when the user is done with it.\n      Events.subscribe(\"Modal:Close\", function() {\n        var $captionField = _this.$reportbackForm.find(\"input[name='caption']\");\n        $captionField.val(imageUpload.getImageCaption());\n      });\n    },\n\n\n    /**\n     * Add the reportback entries to the DOM.\n     * Adds the entire extended gallery if it does not exist already,\n     * otherwise just appends the additional entries.\n     */\n    appendEntries: function (inventoryIndex) {\n      var start   = inventoryIndex;\n      var end     = start + this.bundleSize;\n      var cluster = \"\";\n\n      if (this.outOfStock(start)) {\n        end = this.itemsTotal;\n      }\n\n      for (var i = start; i < end; i++) {\n        if (this.inventory[i] !== undefined) {\n          cluster += this.inventory[i];\n        }\n      }\n\n      if (!this.galleryInDom) {\n        this.insertGallery(cluster);\n      }\n      else {\n        this.$extendedGallery.append(cluster);\n      }\n    },\n\n\n    /**\n     * Build out the API URL with the campaign node id.\n     *\n     * @return {string}  API base url.\n     */\n    buildApiUrl: function () {\n      return this.apiUrl + '/' + this.nid + '/gallery.json';\n    },\n\n\n    /**\n     * Remove the View More button.\n     */\n    disableViewMore: function () {\n      this.$viewMoreButton.remove();\n    },\n\n\n    /**\n     * Add the View More button if there are additional reportbacks.\n     */\n    enableViewMore: function () {\n      var _this = this;\n\n      this.$viewMoreContainer = $(\"<div class=\\\"view-more\\\"></div>\");\n      this.$viewMoreButton = $(\"<button id=\\\"view-more-button\\\" class=\\\"btn btn--view-more tertiary\\\">View more</button>\");\n\n      this.$viewMoreContainer.append(this.$viewMoreButton);\n\n      if (this.isLargeMedia()) {\n        this.$viewMoreContainer.insertAfter(this.$reportbackWrapper);\n      }\n      else {\n        this.$viewMoreContainer.insertAfter(this.$initialGallery);\n      }\n\n\n      this.$viewMoreButton.on(\"click\", function () {\n        _this.evaluateInventory();\n      });\n    },\n\n\n    /**\n     * Enable Media Query check to shift around markup.\n     */\n    enableResponsive: function () {\n      var _this = this;\n\n      $(window).on(\"resize\", _.debounce(function () {\n        if (_this.isLargeMedia()) {\n          if (_this.$viewMoreContainer) {\n            _this.$viewMoreContainer.detach();\n            _this.$viewMoreContainer.insertAfter(_this.$reportbackWrapper);\n          }\n        } else {\n          if (_this.$viewMoreContainer) {\n            _this.$viewMoreContainer.detach();\n            _this.$viewMoreContainer.insertAfter(_this.$initialGallery);\n          }\n        }\n      }, 300));\n    },\n\n\n    /**\n     * Check to see if there are any reportback items currently in the\n     * inventory after each click of the View More button.\n     * If there are items already, then append them, otherwise if there are\n     * more in storage then request them to add to the inventory.\n     * If there's low inventory and no more in storage then remove the button.\n     */\n    evaluateInventory: function () {\n      if (this.inventory.length) {\n        if (this.lowInventory()) {\n          if (this.outOfStock(this.currentIndex)) {\n            this.appendEntries(this.currentIndex);\n            this.currentIndex = this.inventory.length;\n          }\n          else {\n            this.request(this.currentIndex);\n            this.currentIndex += this.bundleSize;\n          }\n        }\n        else {\n          this.appendEntries(this.currentIndex);\n          this.currentIndex += this.bundleSize;\n        }\n      }\n      else {\n        this.request(this.currentIndex);\n        this.currentIndex += this.bundleSize;\n      }\n\n      if (this.currentIndex === this.itemsTotal) {\n        this.disableViewMore();\n      }\n    },\n\n\n    /**\n     * Insert the extended gallery into the DOM.\n     *\n     * @param  {string} data  Markup of list items.\n     */\n    insertGallery: function (data) {\n      var content = data || null;\n\n      this.$extendedGallery = $(\"<ul class=\\\"gallery gallery--extended -quartet\\\"></ul>\");\n\n      if (content) {\n        this.$extendedGallery.html(content);\n      }\n\n      this.$viewMoreContainer.prepend(this.$extendedGallery);\n\n      this.galleryInDom = true;\n    },\n\n\n    /**\n     * Check to see if media size is large.\n     * @return {boolean}\n     */\n    isLargeMedia: function () {\n      return window.matchMedia(\"(min-width: 768px)\").matches;\n    },\n\n\n    /**\n     * Check to see if the stock is running low and will need to retrieve\n     * more based on the current index item we are on in the stock list.\n     *\n     * @return {boolean}\n     */\n    lowInventory: function () {\n      if ((this.currentIndex + this.bundleSize) > this.inventory.length ) {\n        return true;\n      }\n\n      return false;\n    },\n\n\n    /**\n     * Check to see if we are completely out of reportback item stock,\n     * and can not request more; if so, remove the \"View More\" button.\n     *\n     * @return {boolean}\n     */\n    outOfStock: function (quantity) {\n      if ((quantity + this.bundleSize) > this.itemsTotal) {\n        return true;\n      }\n\n      return false;\n    },\n\n\n    /**\n     * Ajax request to retrieve more reportback entries.\n     *\n     * @param {int} inventoryIndex  Value to indicate what index to start appending items from.\n     */\n    request: function (inventoryIndex) {\n      var _this = this;\n\n      $.ajax({\n        url: this.apiUrl,\n        dataType: \"json\",\n        data: {\n          offset: this.offset,\n          count: this.requestSize\n        }\n      }).done(function (response) {\n        _this.templatize(response);\n\n        _this.appendEntries(inventoryIndex);\n\n      }).fail(function () {\n        // @TODO: handle error here!\n\n      }).always(function () {\n        _this.offset += _this.inventory.length;\n      });\n    },\n\n\n    /**\n     * Use specified template to markup each reportback entry list item.\n     *\n     * @param {array} items Array of JSON objects containing reportback items.\n     */\n    templatize: function (items) {\n      for (var i = 0, count = items.length; i < count; i++) {\n        var data = {\n          \"id\": items[i].rbid,\n          \"image\": items[i].src,\n          \"caption\": items[i].caption,\n          \"status\": items[i].status,\n          \"isListItem\": true  // @TODO: probably a better way to address this... :insert shrug emoji here:\n        };\n\n        var markup = _.template(reportbackTplSrc, data);\n\n        this.inventory.push(markup);\n      }\n    }\n\n  };\n\n\n  return Reportback;\n});\n\n","/**\n * # Image Carousel\n *\n * Adds simple \"previous/next\" functionality to slide deck-style image\n * galleries with the following markup:\n *\n * @example\n * //  <div class=\"js-carousel gallery\">\n * //    <div id=\"prev\" class=\"prev-wrapper\">\n * //      <div class=\"prev-button\"><span class=\"arrow\">&#xe605;</span></div>\n * //    </div>\n * //\n * //    <div class=\"carousel-wrapper\">\n * //      <figure id=\"slide0\" class=\"slide\"><img src=\"./img/example_img0.jpg\" /></figure>\n * //      <figure id=\"slide1\" class=\"slide\"><img src=\"./img/example_img1.jpg\" /></figure>\n * //      <figure id=\"slide2\" class=\"slide\"><img src=\"./img/example_img2.jpg\" /></figure>\n * //      <figure id=\"slide3\" class=\"slide\"><img src=\"./img/example_img3.jpg\" /></figure>\n * //    </div>\n * //\n * //    <div id=\"next\" class=\"next-wrapper\">\n * //      <div class=\"next-button\"><span class=\"arrow\">&#xe60a;</span></div>\n * //    </div>\n * //  </div>\n *\n */\n\ndefine('neue/carousel',[],function() {\n  \"use strict\";\n\n  var $ = window.jQuery;\n\n  $(function() {\n    // Show first image\n    $(\"#slide0\").addClass(\"visible\");\n\n    // Make carousel stateful\n    var counter = 0,\n        totalCount = $(\".slide\").length - 1;\n\n    // Cache carousel buttons\n    var $buttons = $(\"#prev, #next\");\n\n    // Decrement counter\n    function decrementCounter() {\n      // If first slide is shown, restart loop\n      // Else, show previous slide\n      counter === 0 ? counter = totalCount : counter--;\n    }\n\n    // Increment counter\n    function incrementCounter() {\n      // If last slide is shown, restart loop\n      // Else, show next slide\n      counter === totalCount ? counter = 0 : counter++;\n    }\n\n    // Toggle slide visibility\n    function showCurrentSlide( direction ) {\n      // Remove \"visibile\" class from the current slide\n      $(\"#slide\" + counter).removeClass(\"visible\");\n\n      // Increment or decrement slide position based on user\"s request\n      direction === \"prev\" ? decrementCounter() : incrementCounter();\n\n      // Assign \"visible\" class to the requested slide\n      $(\"#slide\" + counter).addClass(\"visible\");\n    }\n\n    // Bind click event to carousel buttons\n    $buttons.click(function() {\n      showCurrentSlide( $(this).attr(\"id\") );\n    });\n  });\n});\n\n","/**\n * Applies a smooth-scroll animation on links with the `.js-jump-scroll` class.\n */\n\ndefine('neue/jump-scroll',[],function() {\n  \"use strict\";\n\n  var $ = window.jQuery;\n\n  $(function() {\n    $(\".js-jump-scroll\").on(\"click\", function(event) {\n      event.preventDefault();\n\n      var href = $(this).attr(\"href\");\n\n      // Animate scroll position to the target of the link:\n      $(\"html,body\").animate({scrollTop: $(event.target.hash).offset().top}, \"slow\", function() {\n        // Finally, set the correct hash in the address bar.\n        window.location.hash = href;\n      });\n    });\n  });\n});\n\n","define('neue/media-selector',[],function() {\n  \"use strict\";\n\n  var $ = window.jQuery;\n\n  /**\n    * Creates an instance of MediaRadioSelector.\n    *\n    * @constructor\n    * @this {MediaRadioSelector}\n    * @param {jQuery} $container The container element for the input field and media element\n    * @param {object} opts Options.\n  */\n  var MediaRadioSelector = function ($fieldGroup, opts) {\n    if ($fieldGroup === undefined || !$($fieldGroup.length)) { return; }\n    if (!this instanceof MediaRadioSelector) { return new MediaRadioSelector($fieldGroup, opts); }\n    var _this = this;\n    opts = opts || {};\n    _this.cfg = opts = {\n      fieldClassName: (typeof opts.fieldClassName === \"string\") ? opts.fieldClassName : \"media-options\",\n      fieldSelector: (typeof opts.fieldSelector === \"string\") ? opts.fieldSelector : \".form-type-radio\",\n      optionSelector: (typeof opts.optionSelector === \"string\") ? opts.optionSelector : \"label\"\n    };\n    _this.$fieldGroup = $($fieldGroup).addClass(_this.cfg.fieldClassName);\n    _this.$checked = [];\n    _this.init();\n  };\n\n  MediaRadioSelector.prototype = {\n    /**\n      * Adds event listeners to each field\n    */\n    init: function () {\n      var _this = this,\n        cfg = _this.cfg;\n\n      _this.$fieldGroup.find(cfg.fieldSelector).each(function (idx) {\n        var $field = $(this),\n          className = (idx + 1) % 2 === 0 ? \"-second\" : \"-first\";\n\n        // add 'index' class name for legacy IE\n        $field.addClass(className);\n\n        // if default selected field exists, set to 'selected' state\n        if ($field.find(\"input[type='radio']:checked\").length > 0) {\n          _this.check($field);\n        }\n\n        // add click event to toggle 'selected' class and check/uncheck radios\n        $field.find(cfg.optionSelector).on(\"click\", function () {\n          if (_this.$checked.length > 0) {\n            _this.uncheck(_this.$checked);\n          }\n          _this.check($field);\n        });\n      });\n    },\n\n    /**\n      * Adds checked state to field\n      * @param {jQuery} $field The field.\n    */\n    check: function ($field) {\n      $field.addClass(\"selected\").find(\"input[type='radio']\").attr(\"checked\", true);\n      this.$checked = $field;\n    },\n\n    /**\n      * Removes checked state to field\n      * @param {jQuery} $field The field.\n    */\n    uncheck: function ($field) {\n      $field.removeClass(\"selected\").find(\"input[type='radio']\").attr(\"checked\", false);\n    }\n  };\n\n  $(function() {\n    // Instantiate the media radio selectors\n    $(\".js-media-options\").each(function () {\n      new MediaRadioSelector($(this));\n    });\n  });\n\n});\n\n","/**\n * Initializes site-wide menu chrome functionality.\n */\n\ndefine('neue/menu',[],function() {\n  \"use strict\";\n\n  var $ = window.jQuery;\n\n  $(function() {\n    // Toggle dropdown menu navigation on mobile:\n    $(\".js-toggle-mobile-menu\").on(\"click\", function() {\n      $(\".chrome--nav\").toggleClass(\"is-visible\");\n    });\n\n    // Hide footer on mobile until clicked\n    $(\".js-footer-col\").addClass(\"is-collapsed\");\n    $(\".js-footer-col h4\").on(\"click\", function() {\n      if( window.matchMedia(\"screen and (max-width: 768px)\").matches ) {\n        $(this).closest(\".js-footer-col\").toggleClass(\"is-collapsed\");\n      }\n    });\n  });\n});\n\n","/**\n * @module neue/messages\n * System Messages. Will create a close (\"X\") button\n * for users with JavaScript enabled that uses the following\n * syntax to hook into this function:\n *\n * @example\n * //  <div class=\"js-message\">Alert! You win.</div>\n *\n * @returns\n * // <div class=\"js-message\">Alert! You win.\n * //   <a href=\"#\" class=\"js-close-message\">x</a>\n * // </div>\n */\n\ndefine('neue/messages',[],function() {\n  \"use strict\";\n\n  var $ = window.jQuery;\n\n  var messageClose = \"<a href=\\\"#\\\" class=\\\"js-close-message message-close-button white\\\">×</a>\";\n\n  /**\n  * Adds a close button to system message banner, with optional callback.\n  *\n  * @param {jQuery}   $messages  Object containing message divs to be modified.\n  * @param {function} callback   Callback fired after message is closed.\n  */\n  var attachCloseButton = function($messages, callback) {\n    // Create message close button\n    $messages.append(messageClose);\n\n    // Close message when \"x\" is clicked:\n    $messages.on(\"click\", \".js-close-message\", function(event) {\n      event.preventDefault();\n      $(this).parent(\".messages\").slideUp();\n\n      if(callback && typeof callback === \"function\") {\n        callback();\n      }\n    });\n  };\n\n  // Prepare any messages in the DOM on load\n  $(function() {\n    attachCloseButton( $(\".messages\") );\n  });\n\n  return {\n    attachCloseButton: attachCloseButton\n  };\n});\n\n","/**\n * Indicates current section in nav on scroll. Applies an `.is-active`\n * class when the specified `href` reaches the top of the viewport.\n *\n * Triggered by a `.js-scroll-indicator` on a link.\n */\n\ndefine('neue/scroll-indicator',[],function() {\n  \"use strict\";\n\n  var $ = window.jQuery;\n  var links = [];\n\n  /**\n   * @see _.throttle\n   */\n  var throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n\n    options || (options = {});\n\n    var later = function() {\n      previous = new Date();\n      timeout = null;\n      result = func.apply(context, args);\n    };\n\n    return function() {\n      var now = new Date();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n\n      if (remaining <= 0) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n\n      return result;\n    };\n  };\n\n  /**\n   * @see _.sortedIndex\n   */\n  function sortedIndex(array, value, key) {\n    var low = 0,\n    high = array ? array.length : low;\n\n    while (low < high) {\n      var mid = (low + high) >>> 1; // jshint ignore:line\n      (array[mid][key] < value) ? low = mid + 1 : high = mid;\n    }\n\n    return low ? low - 1 : low;\n  }\n\n  /**\n   * Modified binary search. Finds target key, or next lowest if\n   * it doesn't exist.\n   * @see _.binarySearch\n   */\n  function binarySearch(array, value) {\n    var index = sortedIndex(array, value, \"offset\");\n    return array[index];\n  }\n\n  // Registers links and their targets with scroll handler\n  function prepareIndicator($link) {\n    // Calculate the element's offset from the top of the page while anchored\n    var $linkTarget = $( $link.attr(\"href\") );\n    if( $linkTarget.length ) {\n      // Add jQuery object and offset value to link map\n      links.push({ offset: $linkTarget.offset().top, link: $link });\n    }\n  }\n\n  // Prepare all `.js-scroll-indicator` links on the page.\n  function preparePage() {\n    links = [];\n\n    $(\".js-scroll-indicator\").find(\"a\").each(function(index, link) {\n      prepareIndicator( $(link) );\n    });\n  }\n\n  var oldIndicator;\n  // Scroll handler: highlights the furthest link the user has passed\n  function updateScrollIndicators() {\n    var newIndicator = binarySearch(links, $(window).scrollTop() + 40);\n    // @NOTE: We use a 40px offset to trigger indicator slightly after scroll position\n    // (so that nav switches closer to where a user will likely be reading the text)\n\n    if(newIndicator && newIndicator.link) {\n      var newIndicatorParents = newIndicator.link.parentsUntil(\".js-scroll-indicator\");\n      var oldIndicatorParents = $();\n\n      if(oldIndicator && oldIndicator !== newIndicator) {\n        oldIndicator.link.removeClass(\"is-active\");\n        oldIndicatorParents = oldIndicator.link.parentsUntil(\".js-scroll-indicator\");\n      }\n\n      newIndicator.link.addClass(\"is-active\");\n      newIndicatorParents.addClass(\"is-active\");\n      oldIndicatorParents.not(newIndicatorParents).removeClass(\"is-active\");\n\n      oldIndicator = newIndicator;\n    }\n  }\n\n  // Attach our functions to their respective events.\n  $(function() {\n    preparePage();\n\n    var throttledScroll = throttle(updateScrollIndicators, 60);\n\n    $(window).on(\"scroll\", throttledScroll);\n    $(window).on(\"resize\", preparePage);\n  });\n\n});\n\n\n","/**\n * Pins an element to the top of the screen on scroll.\n *\n * Requires pinned element to have `.js-sticky` class, and have\n * a `.is-stuck` modifier class in its CSS (which allows\n * customized sticky behavior based on media queries).\n *\n * @example\n * // .sidebar {\n * //   &.is-stuck {\n * //     position: fixed;\n * //     top: 0;\n * //   }\n * // }\n *\n */\n\ndefine('neue/sticky',[],function() {\n  \"use strict\";\n\n  var $ = window.jQuery;\n\n  var divs = [];\n\n  // Prepare all `.js-sticky` divs on the page.\n  function preparePage() {\n    divs = [];\n\n    $(\".js-sticky\").each(function(index, div) {\n      prepareSticky(div);\n    });\n  }\n\n  // Prepare markup and register divs with scroll handler\n  function prepareSticky(div) {\n    // Calculate the element's offset from the top of the page while anchored\n    var divOffset = $(div).offset().top;\n\n    // Create the data structure that we'll store this stuff in\n    var divObj = {\n      $el: $(div),\n      offset: divOffset\n    };\n\n    // Add jQuery object and offset value to divs array\n    divs.push(divObj);\n\n    // Now that we're ready, let's calculate how stickies should be displayed\n    scrollSticky();\n  }\n\n  // Scroll handler: pins/unpins divs on scroll event\n  function scrollSticky() {\n    $.each(divs, function(index, div) {\n      // Compare the distance to the top of the page with the distance scrolled.\n      // For each div: if we've scrolled past it's offset, pin it to top.\n      if ($(window).scrollTop() > div.offset) {\n        div.$el.addClass(\"is-stuck\");\n      } else {\n        div.$el.removeClass(\"is-stuck\");\n      }\n    });\n  }\n\n  // Attach our functions to their respective events.\n  $(function() {\n    preparePage();\n\n    $(window).on(\"scroll\", scrollSticky);\n    $(window).on(\"resize\", preparePage);\n  });\n});\n\n","/**\n * Client-side form validation logic. Form element is validated based\n * on `data-validate` attribute, and validation output is placed in\n * corresponding `<label>`.\n *\n * Validations can be added later by extending `NEUE.Validation.Validations`.\n * Validators can be added later by extending `NEUE.Validation.Validators`.\n *\n * finished validating with a boolean `success` and a plain-text `message`\n * value. (Alternatively, a `suggestion` value can be passed which will\n * prompt the user \"Did you mean {suggestion}?\".\n *\n * ## Usage Notes:\n * - Input field must have `data-validate` attribute.\n * - If adding input fields to the DOM after load, run `prepareFields`\n */\n\ndefine('neue/validation',['require','./events'],function(require) {\n  \"use strict\";\n\n  var $ = window.jQuery;\n  var Events = require(\"./events\");\n\n  var validations = [];\n\n  /**\n   * Prepares form label DOM to display validation messages & register event handler\n   * @param {jQuery} $fields Fields to register validation handlers to.\n   */\n  var prepareFields = function($fields) {\n    $fields.each(function() {\n      var $field = $(this);\n\n      prepareLabel( $(\"label[for='\" + $field.attr(\"id\") + \"']\") );\n\n      $field.on(\"blur\", function(event) {\n        event.preventDefault();\n        validateField( $field );\n      });\n    });\n  };\n\n  /**\n   * Prepare field label DOM to display validation messages.\n   * @param {jQuery} $label Label element to prepare.\n   */\n  var prepareLabel = function($label) {\n    // Check to make sure we haven't already prepared this before\n    if($label.find(\".inner-label\").length === 0) {\n      var $innerLabel = $(\"<div class='inner-label'></div>\");\n      $innerLabel.append(\"<div class='label'>\" + $label.html() + \"</div>\");\n      $innerLabel.append(\"<div class='message'></div>\");\n\n      $label.html($innerLabel);\n    }\n  };\n\n  /**\n   * Trigger a validation on a form element.\n   * @param {jQuery}   $field                            Form element to be validated.\n   * @param {jQuery}   [force = false]                   Force validation (even on empty fields).\n   * @param {function} [callback=showValidationMessage]  Callback function that receives validation result\n   */\n  var validateField = function($field, force, callback) {\n    // Default arguments\n    force = typeof force !== \"undefined\" ? force : false;\n    callback = typeof callback !== \"undefined\" ? callback : function($field, result) {\n      showValidationMessage($field, result);\n    };\n\n    var validation = $field.data(\"validate\");\n\n    // Trigger any other linked validation\n    var validationTrigger = $field.data(\"validate-trigger\");\n    if(validationTrigger) {\n      validateField( $(validationTrigger) );\n    }\n\n\n    // Don't validate if validation doesn't exist\n    if(!validations[validation]) {\n      console.error(\"A validation with the name \"+ validation + \" has not been registered.\");\n      return;\n    }\n\n    // For <input>, <select>, and <textarea> tags we provide\n    // the field's value as a string\n    if( isFormField($field) ) {\n      // Get field info\n      var fieldValue = $field.val();\n\n      // Finally, let's not validate blank fields unless forced to\n      if(force || fieldValue !== \"\") {\n        if(validation === \"match\") {\n          var matchFieldValue = $($field.data(\"validate-match\")).val();\n          validations[validation].fn(fieldValue, matchFieldValue, function(result) {\n            callback($field, result);\n          });\n        } else {\n          validations[validation].fn(fieldValue, function(result) {\n            callback($field, result);\n          });\n        }\n      }\n    } else {\n      // For all other tags, we pass the element directly\n      if(validation === \"match\") {\n        var $matchField = $($field.data(\"validate-match\"));\n        validations[validation].fn($field, $matchField, function(result) {\n          callback($field, result);\n        });\n      } else {\n        validations[validation].fn($field, function(result) {\n          callback($field, result);\n        });\n      }\n    }\n  };\n\n  /**\n   * Register a new validation.\n   *\n   * @param {String}    name              The name function will be referenced by in `data-validate` attribute.\n   * @param {Object}    validation        Collection of validation rules to apply\n   * @param {Function}  [validation.fn]   Custom validation\n   */\n  var registerValidation = function(name, validation) {\n    if(validations[name]) {\n      throw \"A validation function with that name has already been registered\";\n    }\n\n    validations[name] = validation;\n  };\n\n  /**\n   * @DEPRECATED: Will be removed in a future version in favor of `registerValidation`.\n   */\n  var registerValidationFunction = function(name, func) {\n    var v = {\n      fn: func\n    };\n\n    registerValidation(name, v);\n  };\n\n  /**\n   * Show validation message in markup.\n   *\n   * @param {jQuery} $field              Field to display validation message for.\n   * @param {Object} result              Object containing `success` and either `message` or `suggestion`\n   */\n  var showValidationMessage = function($field, result) {\n    var $fieldLabel = $(\"label[for='\" + $field.attr(\"id\") + \"']\");\n    var $fieldMessage = $fieldLabel.find(\".message\");\n    var fieldLabelHeight = $fieldLabel.height();\n    var fieldMessageHeight;\n\n    $field.removeClass(\"success error warning shake\");\n    $fieldMessage.removeClass(\"success error warning\");\n\n    // Highlight/animate field\n    if(result.success === true) {\n      $field.addClass(\"success\");\n      $fieldMessage.addClass(\"success\");\n    } else {\n      $field.addClass(\"error\");\n      $fieldMessage.addClass(\"error\");\n\n      if( isFormField($field) ) {\n        $field.addClass(\"shake\");\n      }\n\n      Events.publish(\"Validation:InlineError\", $fieldLabel.attr(\"for\"));\n    }\n\n    // Show validation message\n    if(result.message) {\n      $fieldMessage.text(result.message);\n    }\n\n    if(result.suggestion) {\n      $fieldMessage.html(\"Did you mean \" + result.suggestion.full + \"? <a href='#' data-suggestion='\" + result.suggestion.full + \"'class='js-mailcheck-fix'>Fix it!</a>\");\n      Events.publish(\"Validation:Suggestion\", result.suggestion.domain);\n    }\n\n    fieldMessageHeight = $fieldMessage.height();\n\n    // Set label height if it needs to be multiline.\n    if(fieldMessageHeight > fieldLabelHeight) {\n      $fieldLabel.css(\"height\", fieldMessageHeight + \"px\");\n    } else {\n      // Clear previous multiline height if no longer needed.\n      $fieldLabel.css(\"height\", \"\");\n    }\n\n    // Animate in the validation message\n    $fieldLabel.addClass(\"show-message\");\n\n    $(\".js-mailcheck-fix\").on(\"click\", function(e) {\n      e.preventDefault();\n\n      var $field = $(\"#\" + $(this).closest(\"label\").attr(\"for\"));\n      $field.val($(this).data(\"suggestion\"));\n      $field.trigger(\"blur\");\n\n      // If Google Analytics is set up, we fire an event to\n      // mark that a suggestion has been made\n      Events.publish(\"Validation:SuggestionUsed\", $(this).text() );\n    });\n\n    $field.on(\"focus\", function() {\n      $field.removeClass(\"warning error success shake\");\n      $fieldLabel.removeClass(\"show-message\");\n      $fieldLabel.css(\"height\", \"\");\n    });\n\n    return result.success;\n  };\n\n\n  /**\n   * Disable form submission.\n   * @param {jQuery} $form Form to disable submission for.\n   */\n  var disableFormSubmit = function($form) {\n    // Prevent double-submissions\n    var $submitButton = $form.find(\":submit\");\n\n    // Disable that guy\n    $submitButton.attr(\"disabled\", true);\n    $submitButton.addClass(\"loading\");\n\n    // If <button>, add a loading style\n    if($submitButton.prop(\"tagName\") === \"BUTTON\") {\n      // Neue's `.loading` class only works on <a> or <button> :(\n      $submitButton.addClass(\"loading\");\n    }\n  };\n\n\n  /**\n   * Re-enable form submission.\n   * @param {jQuery} $form Form to enable submission for.\n   */\n  var enableFormSubmit = function($form) {\n    var $submitButton = $form.find(\":submit\");\n    $submitButton.attr(\"disabled\", false);\n    $submitButton.removeClass(\"loading disabled\");\n  };\n\n  /**\n   * Returns whether element is <input>, <select>, or <textarea>.\n   * @param {jQuery} $el  Element to check type of.\n   * @return {boolean}\n   */\n  var isFormField = function($el) {\n    var tag = $el.prop(\"tagName\");\n    return ( tag === \"INPUT\" || tag === \"SELECT\" || tag === \"TEXTAREA\" );\n  };\n\n  /**\n   * Validate form on submit.\n   */\n  $(\"body\").on(\"submit\", \"form\", function(event, isValidated) {\n    var $form = $(this);\n    var $validationFields = $form.find(\"[data-validate]\");\n\n    // Disable form submission to prevent double-clicks.\n    disableFormSubmit($form);\n\n    // We want to validate all [data-validate] field that are either required, or have user input.\n    $validationFields = $validationFields.map(function() {\n      var $this = $(this);\n      if(typeof $this.attr(\"data-validate-required\") !== \"undefined\" || $this.val() !== \"\") {\n        return $this;\n      }\n    });\n\n    // If no fields should be validated, submit!\n    if($validationFields.length === 0) {\n      return true;\n    }\n\n    if(isValidated === true) {\n      // completed a previous runthrough & validated;\n      // we're ready to submit the form\n      return true;\n    } else {\n      event.preventDefault();\n\n      var validatedFields = 0;\n      var validatedResults = 0;\n      var scrolledToError = false;\n\n      $validationFields.each(function() {\n        validateField($(this), true, function($field, result) {\n          validatedFields++;\n          showValidationMessage($field, result);\n\n          if(result.success) {\n            validatedResults++;\n          }\n\n          // If this is the first error in the form, scroll to it.\n          if(!scrolledToError && result.success === false) {\n            scrolledToError = true;\n            $(\"html,body\").animate({scrollTop: $field.offset().top - 32}, 200);\n          }\n\n          // Once we're done validating all fields, check status of form\n          if(validatedFields === $validationFields.length) {\n            if(validatedResults === $validationFields.length) {\n              // we've validated all that can be validated\n              Events.publish(\"Validation:Submitted\", $(this).attr(\"id\") );\n              $form.trigger(\"submit\", true);\n            } else {\n              Events.publish(\"Validation:SubmitError\", $(this).attr(\"id\") );\n              enableFormSubmit($form);\n            }\n          }\n        });\n      });\n\n      return false; // don't submit form, wait for callback with `true` parameter\n    }\n  });\n\n  // Register the \"match\" validation.\n  registerValidationFunction(\"match\", function(string, secondString, done) {\n    if(string === secondString && string !== \"\") {\n      return done({\n        success: true,\n        message: \"Looks good!\"\n      });\n    } else {\n      return done({\n        success: false,\n        message: \"That doesn't match.\"\n      });\n    }\n  });\n\n  $(function() {\n    // Prepare the labels on any `[data-validate]` fields in the DOM at load\n    prepareFields( $(\"body\").find(\"[data-validate]\") );\n  });\n\n  return {\n    prepareFields: prepareFields,\n    registerValidation: registerValidation,\n    registerValidationFunction: registerValidationFunction,\n    validateField: validateField,\n    showValidationMessage: showValidationMessage,\n    Validations: validations\n  };\n});\n\n","/**\n * Main build script. This will compile modules into `neue.js`\n * and `neue.min.js` in dist package, and attach each module to\n * a NEUE global variable attached to the window.\n */\n\ndefine('neue/main',['require','./carousel','./events','./jump-scroll','./media-selector','./menu','./messages','./modal','./scroll-indicator','./sticky','./validation'],function(require) {\n  \"use strict\";\n\n  // Attach modules to window\n  window.NEUE = {\n    Carousel: require(\"./carousel\"),\n    Events: require(\"./events\"),\n    JumpScroll: require(\"./jump-scroll\"),\n    MediaSelector: require(\"./media-selector\"),\n    Menu: require(\"./menu\"),\n    Messages: require(\"./messages\"),\n    Modal: require(\"./modal\"),\n    ScrollIndicator: require(\"./scroll-indicator\"),\n    Sticky: require(\"./sticky\"),\n    Validation: require(\"./validation\")\n  };\n\n  return window.NEUE;\n});\n\n","define('campaign/SchoolFinder',['require','jquery','lodash','neue/validation'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n  var _ = require(\"lodash\");\n  var Validation = require(\"neue/validation\");\n\n  var shouldValidateForm = true;\n  var resultTpl = _.template(\"<li><a class='js-schoolfinder-result' data-gsid='<%- gsid %>' href='#'><span><%- name %></span> <em><%- city %>, <%- state %></em></a></li>\");\n\n  var getResults = function(state, query, limit, callback) {\n    var endpoint;\n    if(_.isEmpty(query) || _.isEmpty(state)) return callback([]);\n\n    try {\n      // Use Drupal dateFormat validation format if available\n      endpoint = Drupal.settings.dosomethingUser.schoolFinderAPIEndpoint;\n    } catch(e) {\n      endpoint = \"http://lofischools.herokuapp.com/search\";\n    }\n\n    $.ajax({\n      dataType: \"json\",\n      url: endpoint + \"?state=\" + state + \"&query=\" + query + \"&limit=\" + limit\n    }).done(function(data) {\n      callback(data.results, data.meta.more_results);\n    }).fail(function(err, status, thrown) {\n      callback(false);\n    });\n  };\n\n  var displayResults = function($el, results, canShowMore) {\n    $el.empty();\n\n    if(!results) {\n      $el.append(\"<div class='messages error'>We couldn't load schools. Check your internet connection, or try refreshing the page.</div>\");;\n      $el.show();\n      return;\n    }\n\n    _.each(results, function(result) {\n      $el.append(resultTpl(result));\n    });\n\n    if(results.length === 0) {\n      $el.append(\"<div class='messages error'>Hmm, we couldn't find your school based on how the name was entered. But it may still be there! Click on the link below for tips on finding your school.</div>\");\n    }\n\n    if(canShowMore) {\n      $el.append(\"<p class='schoolfinder-showmore'><a href='#' class='secondary js-schoolfinder-showmore'>Show More Results</a></p>\");\n    }\n\n    $el.show();\n  };\n\n  var initializeSchoolFinder = function($schoolSignupForm) {\n    var $stateField = $(\"#edit-school-administrative-area\");\n    var $schoolIDField = $schoolSignupForm.find(\"[name='school_id']\");\n    var $schoolSearchField = $schoolSignupForm.find(\".js-schoolfinder-search\");\n    var $schoolSearchResults = $schoolSignupForm.find(\".js-schoolfinder-results\");\n    var $notAffiliatedField = $(\"#edit-school-not-affiliated\");\n    var $notAffiliatedConfirmationMessage = $schoolSignupForm.find(\".js-school-not-affiliated-confirmation\");\n\n    var savedStateFieldState = \"\";\n    var getResultsThrottled = _.throttle(getResults, 1000);\n\n    // Set the form to default state.\n    $schoolSearchField.hide();\n    $schoolSearchResults.hide();\n\n    /**\n     * Event handler for the state select field.\n     */\n    $stateField.on(\"change\", function() {\n      // Show the school name field once user has chosen a state.\n      var stateSelected = $(this).val() !== \"\";\n      $schoolSignupForm.find(\".messages\").hide();\n      $schoolSearchField.val(\"\");\n      $schoolSearchField.trigger(\"keyup\");\n      $schoolSearchField.toggle(stateSelected);\n\n      if(stateSelected) {\n        $schoolSearchField.focus();\n      }\n    });\n\n    /**\n     * Event handler for school search field text input.\n     */\n    $schoolSearchField.on(\"keyup\", function() {\n      $schoolSignupForm.find(\".messages\").hide();\n      var val = $(this).val();\n\n      if(val !== \"\") {\n        $schoolSearchField.addClass(\"loading\");\n        getResultsThrottled( $stateField.val(), val, 10, function(res, moreAvailable) {\n          displayResults($schoolSearchResults, res, moreAvailable);\n          $schoolSearchField.removeClass(\"loading\");\n        });\n      } else {\n        $schoolSearchResults.hide();\n        $schoolIDField.val(\"\");\n      }\n    });\n\n    /**\n     * Event handler for clicking a result.\n     */\n    $schoolSearchResults.on(\"click\", \".js-schoolfinder-result\", function(e) {\n      e.preventDefault();\n\n      var $this = $(this);\n      $schoolIDField.val( $this.data(\"gsid\") );\n      $schoolSearchField.val( $this.find(\"span\").text() );\n\n      $this.addClass(\"is-selected\");\n      $this.parent(\"li\").siblings().hide();\n    });\n\n    /**\n     * Event handler for \"Show More\" link.\n     */\n    $schoolSignupForm.on(\"click\", \".js-schoolfinder-showmore\", function(e) {\n      e.preventDefault();\n\n      $(this).remove();\n\n      $schoolSearchField.addClass(\"loading\");\n      getResultsThrottled( $stateField.val(), $schoolSearchField.val(), 50, function(res) {\n        displayResults($schoolSearchResults, res, false);\n        $schoolSearchField.removeClass(\"loading\");\n      });\n    });\n\n    /**\n     * Event handler for the \"I'm not affiliated with a school\" checkbox.\n     */\n    $notAffiliatedField.on(\"change\", function() {\n      // If user is not entering a school, don't validate form.\n      shouldValidateForm = !this.checked;\n      $notAffiliatedConfirmationMessage.toggle(this.checked);\n\n      if(this.checked) {\n        savedStateFieldState = $stateField.val();\n        $stateField.val(\"\");\n        $schoolSearchField.val(\"\");\n        $schoolSearchField.trigger(\"keyup\");\n      } else {\n        $stateField.val(savedStateFieldState);\n        $notAffiliatedConfirmationMessage.hide();\n      }\n\n      $stateField.trigger(\"change\");\n    });\n\n    $schoolSignupForm.find(\".js-schoolfinder-help\").on(\"click\", function() {\n      $(\".js-schoolfinder-help-content\").toggle();\n    });\n  };\n\n  $(document).ready(function() {\n    var $schoolSignupForm = $(\"#dosomething-signup-user-signup-data-form\");\n    if( $schoolSignupForm ) {\n      initializeSchoolFinder($schoolSignupForm);\n    }\n  });\n\n  /**\n   * Custom validation for the School Finder.\n   */\n  Validation.registerValidationFunction(\"school_finder\", function($el, done) {\n    var $schoolID = $el.find(\"[name='school_id']\");\n\n    if(!shouldValidateForm) {\n      // User has selected \"I'm not affiliated\" checkbox. Skip validation.\n      return done({ success: true });\n    }\n\n    if($schoolID.val() === \"\") {\n      // User has not selected a school.\n      $el.addClass(\"shake\");\n\n      // Remove any existing error messages.\n      $el.find(\".messages.error\").remove();\n\n      $el.append(\"<div class='messages error'>You haven't entered your school. Find your school by entering your state and then selecting a school from the search results.</div>\");\n\n      return done({ success: false });\n    }\n\n    // User has selected a school.\n    return done({ success: true });\n  });\n\n});\n\n","define('campaign/sources',['require','jquery','neue/events'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n  var Events = require(\"neue/events\");\n\n\n  var toggleSources = function(container) {\n    var $list = container.find(\"ul, div:first\");\n\n    // Hide the fact sources list if present.\n    $list.hide();\n\n    // Toggle visibility of fact sources.\n    $(\".js-toggle-sources\").on(\"click\", function() {\n\n      // Toggle visibility of fact sources list.\n      $list.slideToggle();\n\n    });\n  };\n\n\n  var $sources = $(\".sources\") || null;\n\n  // If there's a list of sources output in a modal, activate the toggle.\n  Events.subscribe(\"Modal:opened\", function() {\n    var $sources = $(\".modal .sources\") || null;\n    toggleSources($sources);\n  });\n\n\n  // If there's a list of sources output on the page, activate the toggle.\n  if ($sources) {\n    toggleSources($sources);\n  }\n\n});\n\n","define('campaign/tips',['require','jquery'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n\n  // View other tips on click\n  $(\".js-show-tip\").on(\"click\", function(event) {\n    event.preventDefault();\n\n    // Cache $(this) and reference to parent wrapper\n    var $this = $(this);\n    var $thisParent = $this.closest(\".tips--wrapper\");\n\n    // Pass \"active\" class to move tip indicator\n    $thisParent.find(\".tip-header\").removeClass(\"active\");\n    $this.addClass(\"active\");\n\n    // Get current tip number\n    var tipNumber = $this.attr(\"href\").slice(1);\n\n    // Show current tip\n    $thisParent.find(\".tip-body\").hide();\n    $thisParent.find(\".\" + tipNumber).show();\n  });\n});\n\n","define('campaign/tabs',['require','jquery'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n\n  var $tabs = $(\".js-tabs\"),\n      $tabMenuLinks = $tabs.find(\".tabs__menu a\");\n\n  // Show the first tab in any \"js-tabs\" collection.\n  $tabs.each(function() {\n    $(this).find(\".tab\").first().addClass(\"is-active\");\n  });\n\n  // View other tabs on click.\n  $tabMenuLinks.on(\"click\", function(event) {\n    event.preventDefault();\n\n    var $this = $(this),\n        $siblings = $this.parent().siblings(),\n        selection = $this.data(\"tab\") - 1,\n        $tabs = $this.closest(\".js-tabs\").find(\".tab\"),\n        tab = $tabs.get(selection);\n\n    $siblings.removeClass(\"is-active\");\n    $this.parent().addClass(\"is-active\");\n\n    // Show selected tab.\n    $tabs.removeClass(\"is-active\");\n    $(tab).addClass(\"is-active\");\n\n  });\n\n});\n\n","define('campaign/ImageUploader',['require','jquery'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n\n  var prepareImageUploadUI = function($context) {\n    // Toggle visibility of upload button and hide that guy\n    var $imageUploads = $context.find(\".js-image-upload\");\n\n    // @TODO: Not ideal location; will be refactored during new reportback implementation.\n    // This should actually sit within the Reportback.js code, but would need to implement\n    // an event that can respond to an image being uploaded. Temporarily placed here until\n    // upcoming refactor. (2014.11.18 - Diego)\n    var $caption       = $context.find(\".form-item-caption\");\n    var submittedImage = $context.find(\".submitted-image\").length === 0 ? false : true;\n\n    // If no prior submitted image is present, caption should be hidden.\n    if (!submittedImage) {\n      $caption.hide();\n    }\n\n    $imageUploads.each(function(i, el) {\n      $(el).wrap( $(\"<div class='image-upload-container'></div>\") );\n      var $container = $(el).parent(\".image-upload-container\");\n\n      $container.wrap(\"<div style='clear: both'></div>\");\n\n      var $uploadBtn = $(\"<a href='#' class='btn secondary small'>\" + Drupal.t(\"Upload A Pic\") + \"</a>\");\n      $uploadBtn.insertAfter( $(el) );\n\n      var $imgPreview = $(\"<img class='preview' src=''>\");\n      $imgPreview.insertBefore( $container );\n      $imgPreview.hide();\n\n      var $fileName = $(\"<p class='filename'></p>\");\n      $fileName.insertAfter($uploadBtn);\n\n      // Show image preview on upload\n      $(el).on(\"change\", function(event) {\n        event.preventDefault();\n\n        // New image added, show the caption.\n        submittedImage = true;\n        $caption.show();\n\n        // Change button state\n        $uploadBtn.text(Drupal.t(\"Change Pic\"));\n\n        var files = !!this.files ? this.files : [];\n\n        // Show file name below field\n        if( files[0] && files[0].name ) {\n          $fileName.text( files[0].name );\n        } else {\n          var file = $(el).val().replace(\"C:\\\\fakepath\\\\\", \"\");\n          $fileName.text(file);\n        }\n\n        // If no file selected/no FileReader support, we're all done\n        if (!files.length || !window.FileReader) {\n          return;\n        }\n\n        if (/^image/.test( files[0].type)) {\n          var reader = new FileReader();\n          reader.readAsDataURL(files[0]);\n\n          reader.onloadend = function() {\n            $imgPreview.show();\n            $imgPreview.attr(\"src\", this.result);\n          };\n        }\n\n      });\n    });\n  };\n\n  // On DOM ready, we prepare any `.js-image-upload`s that we find on the page\n  $(function() {\n    prepareImageUploadUI( $(\"body\") );\n  });\n\n});\n\n","define('validation/auth',['require','neue/validation','mailcheck'],function(require) {\n  \"use strict\";\n\n  var Validation= require(\"neue/validation\");\n  var mailcheck = require(\"mailcheck\");\n\n  // # Helpers\n  // Basic sanity check used by email validation.\n  // This won't catch everything, but should prevent validating some simple mistakes\n  function isValidEmailSyntax(string) {\n    var email = string.toUpperCase();\n    if( email.match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]+$/) ) {\n      var lastChar = \"\";\n      for(var i = 0, len = email.length; i < len; i++) {\n        // fail if we see two dots in a row\n        if(lastChar === \".\"  && email[i] === \".\") {\n          return false;\n        }\n\n        lastChar = email[i];\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  // @TODO: This will be removed when Neue's validation gets refactored.\n  function validateNotBlank(string, done, success, failure) {\n    if( string !== \"\" ) {\n      return done({\n        success: true,\n        message: success\n      });\n    } else {\n      return done({\n        success: false,\n        message: failure\n      });\n    }\n  }\n\n  // # Add validation functions...\n\n  // ## Name\n  // Greets the user when they enter their name.\n  Validation.registerValidationFunction(\"name\", function(string, done) {\n    validateNotBlank(string, done,\n      Drupal.t(\"Hey, @name!\", {\"@name\": string}),\n      Drupal.t(\"We need your first name.\")\n    );\n  });\n\n  Validation.registerValidationFunction(\"last_name\", function(string, done) {\n    validateNotBlank(string, done,\n      Drupal.t(\"Got it, @name!\", {\"@name\": string}),\n      Drupal.t(\"We need your last name.\")\n    );\n  });\n\n  // ## Birthday\n  // Validates correct date input, reasonable birthdate, and says a nice message.\n  Validation.registerValidationFunction(\"birthday\", function(string, done) {\n    var birthday, birthMonth, birthDay, birthYear, format;\n\n    try {\n      // Use Drupal dateFormat validation format if available\n      format = Drupal.settings.dsValidation.dateFormat;\n    } catch(e) {\n      format = \"MM/DD/YYYY\";\n    }\n\n    // parse date from string\n    if( format === \"MM/DD/YYYY\" && /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/.test(string) ) {\n      // US formatting\n      birthday = string.split(\"/\");\n      birthMonth = parseInt(birthday[0]);\n      birthDay = parseInt(birthday[1]);\n      birthYear = parseInt(birthday[2]);\n    } else if( format === \"DD/MM/YYYY\" && /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/.test(string) ) {\n      // UK formatting\n      birthday = string.split(\"/\");\n      birthDay = parseInt(birthday[0]);\n      birthMonth = parseInt(birthday[1]);\n      birthYear = parseInt(birthday[2]);\n    } else {\n      return done({\n        success: false,\n        message: Drupal.t(\"Enter your birthday \" + format + \"!\")\n      });\n    }\n\n    // fail if incorrect month\n    if (birthMonth > 12 || birthMonth === 0) {\n      return done({\n        success: false,\n        message: Drupal.t(\"That doesn't seem right.\")\n      });\n    }\n\n    //list of last days in months and check for leap year\n    var endDates = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n    if(((birthYear % 4 === 0) && (birthYear % 100 !== 0)) || (birthYear % 400 === 0)){\n      endDates[2] = 29;\n    }\n\n    // fail if incorrect day\n    if (birthDay > endDates[birthMonth]) {\n      return done({\n        success: false,\n        message: Drupal.t(\"That doesn't seem right.\")\n      });\n    }\n\n    // calculate age\n    // Source: http://stackoverflow.com/questions/4060004/calculate-age-in-javascript#answer-7091965\n    var birthDate = new Date(birthYear, birthMonth - 1, birthDay);\n    var now = new Date();\n    var age = now.getFullYear() - birthDate.getFullYear();\n    var m = now.getMonth() - birthDate.getMonth();\n    if (m < 0 || (m === 0 && now.getDate() < birthDate.getDate())) {\n      age--;\n    }\n\n    if (age < 0)  {\n      return done({\n        success: false,\n        message: Drupal.t(\"Are you a time traveller?\")\n      });\n    } else if( age > 0 && age <= 25  ) {\n\n      if (birthDate.getMonth() === now.getMonth() && now.getDate() === birthDate.getDate() ) {\n        return done({\n          success: true,\n          message: Drupal.t(\"Wow, happy birthday!\")\n        });\n      } else if ( age < 10) {\n        return done({\n          success: true,\n          message: Drupal.t(\"Wow, you're @age!\", {\"@age\": age})\n        });\n      } else {\n        return done({\n          success: true,\n          message: Drupal.t(\"Cool, @age!\", {\"@age\": age})\n        });\n      }\n\n    } else if (age > 25 && age < 130) {\n      return done({\n        success: true,\n        message: Drupal.t(\"Got it!\")\n      });\n    } else if (string === \"\") {\n      return done({\n        success: false,\n        message: Drupal.t(\"We need your birthday.\")\n      });\n    } else {\n      return done({\n        success: false,\n        message: Drupal.t(\"That doesn't seem right.\")\n      });\n    }\n  });\n\n  // ## Email\n  // Performs some basic sanity checks on email format (see helper method), and\n  // uses Kicksend's mailcheck library to offer suggestions for misspellings.\n  Validation.registerValidationFunction(\"email\", function(string, done) {\n    if ( isValidEmailSyntax(string) ) {\n      // we use mailcheck.js to find some common email mispellings\n      mailcheck.run({\n        email: string,\n        domains: [\"yahoo.com\", \"google.com\", \"hotmail.com\", \"gmail.com\", \"me.com\", \"aol.com\", \"mac.com\",\n                  \"live.com\", \"comcast.net\", \"googlemail.com\", \"msn.com\", \"hotmail.co.uk\", \"yahoo.co.uk\",\n                  \"facebook.com\", \"verizon.net\", \"sbcglobal.net\", \"att.net\", \"gmx.com\", \"mail.com\", \"outlook.com\",\n                  \"aim.com\", \"ymail.com\", \"rocketmail.com\", \"bellsouth.net\", \"cox.net\", \"charter.net\", \"me.com\",\n                  \"earthlink.net\", \"optonline.net\", \"dosomething.org\"],\n        suggested: function(s) {\n          return done({\n            success: true,\n            suggestion: s\n          });\n        },\n        empty: function() {\n          return done({\n            success: true,\n            message: Drupal.t(\"Great, thanks!\")\n          });\n        }\n      });\n    } else {\n      return done({\n        success: false,\n        message: Drupal.t(\"We need a valid email.\")\n      });\n    }\n  });\n\n  // ## Password\n  // Checks that password is 6 or more characters long.\n  // Matches validation performed in dosomething_user.module.\n  Validation.registerValidationFunction(\"password\", function(string, done) {\n    if(string.length >= 6) {\n      return done({\n        success: true,\n        message: Drupal.t(\"Keep it secret, keep it safe!\")\n      });\n    } else {\n      return done({\n        success: false,\n        message: Drupal.t(\"Must be 6+ characters.\")\n      });\n    }\n  });\n\n  // ## Phone\n  // Matches validation performed in dosomething_user.module.\n  Validation.registerValidationFunction(\"phone\", function(string, done) {\n    // Matches server-side validation from `dosomething_user_valid_cell()` in `dosomething_user.module`.\n    var numberWithoutFormatting = string.replace(/[\\-\\s\\.]/g, \"\");\n    var isValidFormat = /^(?:\\+?([0-9]{1,3})([\\-\\s\\.]{1})?)?\\(?([0-9]{3})\\)?(?:[\\-\\s\\.]{1})?([0-9]{3})(?:[\\-\\s\\.]{1})?([0-9]{4})/.test(numberWithoutFormatting);\n\n    var sanitizedNumber = string.replace(/[^0-9]/g, \"\");\n    var allRepeatingDigits = /([0-9]{1})\\1{9,}/.test(sanitizedNumber);\n\n    if(isValidFormat && !allRepeatingDigits) {\n      return done({\n        success: true,\n        message: Drupal.t(\"Thanks!\")\n      });\n    } else {\n      return done({\n        success: false,\n        message: Drupal.t(\"Enter a valid telephone number.\")\n      });\n    }\n  });\n});\n\n","define('validation/reportback',['require','neue/validation'],function(require) {\n  \"use strict\";\n\n  var Validation = require(\"neue/validation\");\n\n  // validate number of items\n  Validation.registerValidationFunction(\"positiveInteger\", function(string, done) {\n    var trimmedString = string.replace(\" \", \"\");\n    if( trimmedString !== \"\" && /^[1-9]\\d*$/.test(trimmedString) ) {\n      return done({\n        success: true,\n        message: Drupal.t(\"That's great!\")\n      });\n    } else {\n      return done({\n        success: false,\n        message: Drupal.t(\"Enter a valid number!\")\n      });\n    }\n  });\n\n  // validate that string isn't blank\n  Validation.registerValidationFunction(\"reportbackReason\", function(string, done) {\n    if( string !== \"\" ) {\n      return done({\n        success: true,\n        message: Drupal.t(\"Thanks for caring!\")\n      });\n    } else {\n      return done({\n        success: false,\n        message: Drupal.t(\"Tell us why you cared!\")\n      });\n    }\n  });\n\n});\n\n","define('validation/address',['require','jquery','neue/validation'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n  var Validation= require(\"neue/validation\");\n\n  /** @NOTE: Temporary, testing out some new ideas. */\n  var requiredValidator = function(string, done, args) {\n    if( string !== \"\" ) {\n      return done({\n        success: true,\n        message: args.success\n      });\n    } else {\n      return done({\n        success: false,\n        message: args.failure\n      });\n    }\n  };\n\n  /**\n   * Validators for individual address form fields:\n   */\n  Validation.registerValidationFunction(\"fname\", function(string, done) {\n    return requiredValidator(string, done, {\n      success: Drupal.t(\"Oh hey, @fname!\", {\"@fname\": string}),\n      failure: Drupal.t(\"We need your name. We’re on a first-name basis, right?\")\n    });\n  });\n\n  Validation.registerValidationFunction(\"lname\", function(string, done) {\n    return requiredValidator(string, done, {\n      success: Drupal.t(\"The @lname-inator! People call you that, right?\", {\"@lname\": string}),\n      failure: Drupal.t(\"We need your last name.\")\n\n    });\n  });\n\n  Validation.registerValidationFunction(\"address1\", function(string, done) {\n    return requiredValidator(string, done, {\n      success: Drupal.t(\"Got it!\"),\n      failure: Drupal.t(\"We need your street name and number.\")\n    });\n  });\n\n  Validation.registerValidationFunction(\"address2\", function(string, done) {\n    return requiredValidator(string, done, {\n      success: Drupal.t(\"Got that too!\"),\n      failure: \"\"\n    });\n  });\n\n  Validation.registerValidationFunction(\"city\", function(string, done) {\n    return requiredValidator(string, done, {\n      success: Drupal.t(\"Sweet, thanks!\"),\n      failure: Drupal.t(\"We need your city.\")\n    });\n  });\n\n  Validation.registerValidationFunction(\"state\", function(string, done) {\n    return requiredValidator(string, done, {\n      success: Drupal.t(\"I \\u2764 @state\", {\"@state\": string}),\n      failure: Drupal.t(\"We need your state.\")\n    });\n  });\n\n  Validation.registerValidationFunction(\"zipcode\", function(string, done) {\n    if( string.match(/^\\d{5}(?:[-\\s]\\d{4})?$/) ) {\n      return done({\n        success: true,\n        message: Drupal.t(\"Almost done!\")\n      });\n    } else {\n      return done({\n        success: false,\n        message: Drupal.t(\"We need your zip code.\")\n      });\n    }\n  });\n\n  Validation.registerValidationFunction(\"why_signedup\", function(string, done) {\n    return requiredValidator(string, done, {\n      success: Drupal.t(\"Thanks for caring!\"),\n      failure: Drupal.t(\"Oops! Can't leave this one blank.\")\n    });\n  });\n\n\n  /**\n   * Custom validation for UPS address fieldset.\n   */\n  Validation.registerValidationFunction(\"ups_address\", function($el, done) {\n    var $sorryError = $(\n      \"<div class='messages error'>\" +\n        \"<strong>\" + Drupal.t(\"We couldn't find that address.\") + \"</strong>\" +\n        Drupal.t(\"Double check for typos and try submitting again.\") +\n      \"</div>\"\n    );\n\n    var $networkError= $(\n      \"<div class='messages error'>\" +\n        Drupal.t(\"We're having trouble submitting the form, are you sure your internet connection is working? Email us if you continue having problems.\") +\n      \"</div>\"\n    );\n\n    var addressFieldData = $el.find(\"select, input\").serializeArray();\n\n    // Remove previous messages.\n    $el.find(\".messages\").slideUp(function() { $(this).remove(); });\n\n    // Once we know we have, submit them to the AJAX endpoint\n    $.ajax({\n      type: \"POST\",\n      url: \"/user/validate/address\",\n      dataType: \"json\",\n      data: addressFieldData,\n      success: function(data) {\n\n        if(data.sorry) {\n          // Address is invalid and we don't have any suggestions\n          $el.append($sorryError).hide().slideDown();\n          return done({ success: false });\n        }\n\n        var hasFieldErrors = false;\n        for(var field in data) {\n          if(data.hasOwnProperty(field) && field !== \"ambiguous\") {\n            var suggestion = data[field];\n            var $fieldEl = $el.find(\"[name='user_address[\" + field + \"]']\");\n\n            // If just capitalizing or adding extra 4-digit to zip, don't show an error\n            if(  (field === \"postal_code\" && $fieldEl.val().slice(0,4) === suggestion.slice(0,4)) || (suggestion === $fieldEl.val().toUpperCase() ) ) {\n              $fieldEl.val( suggestion  );\n            } else {\n              // Otherwise, mark errors and ask user to correct them\n              hasFieldErrors = true;\n\n              Validation.showValidationMessage($fieldEl, {\n                success: false,\n                suggestion: {\n                  full: suggestion,\n                  domain: \"zip\"\n                }\n              });\n            }\n          }\n        }\n\n        if(hasFieldErrors) {\n          done({ success: false });\n        } else {\n          done({ success: true });\n        }\n\n      },\n      error: function() {\n        // We're having trouble getting the validation over AJAX, let's mark as\n        // validated and leave it up to the server just to be safe.\n        $el.append($networkError).hide().slideDown();\n        done({ success: false });\n      }\n    });\n  });\n\n\n  /**\n   * Validators for shirt reward fields:\n   */\n  Validation.registerValidationFunction(\"shirt_size\", function(string, done) {\n    return requiredValidator(string, done, {\n      success: Drupal.t(\"It'll fit great!\"),\n      failure: Drupal.t(\"We need a shirt size!\")\n    });\n  });\n\n  // Shirt style validor\n  // @TODO: add support to radio button validation in Neue\n  Validation.registerValidationFunction(\"shirt_style\", function($el, done) {\n    // collected checked radio's\n    var $checked = $el.find(\"input[type='radio']:checked\");\n\n    // message that will be injected upon error\n    var $errorMsg = $(\n      \"<div class='message error'>\" + Drupal.t(\"We need a shirt style!\") + \"</div>\"\n    );\n\n    // remove the error message before validation\n    $el.find(\".message\").remove();\n\n    if ($checked.length === 1) {\n      done({ success: true });\n    } else {\n      $el.find(\"label:first\").append($errorMsg);\n      done({ success: false });\n    }\n  });\n\n});\n\n","define('validation/donate',['require','neue/validation'],function(require) {\n  \"use strict\";\n\n  var Validation= require(\"neue/validation\");\n\n  // Credit card types\n  var cardTypes = {\n    Visa: {\n      name: \"Visa\",\n      numberPattern: /^4[0-9]{12}(?:[0-9]{3})?$/\n    },\n    Mastercard: {\n      name: \"MasterCard\",\n      numberPattern: /^5[1-5][0-9]{14}$/\n    },\n    AmericanExpress: {\n      name: \"American Express\",\n      numberPattern: /^3[47][0-9]{13}$/\n    },\n    DinersClub: {\n      name: \"Diners Club\",\n      numberPattern: /^3(?:0[0-5]|[68][0-9])[0-9]{11}$/\n    },\n    Discover: {\n      name: \"Discover\",\n      numberPattern: /^6(?:011|5[0-9]{2})[0-9]{12}$/\n    },\n    JCB: {\n      name: \"JCB\",\n      numberPattern: /^(?:2131|1800|35\\d{3})\\d{11}$/\n    }\n  };\n\n  /**\n  * Validates string for a number\n  *\n  * @param {String}   string  String to be test against regex\n  * @return {boolean}\n  */\n  function isDigit(string) {\n    return (/^\\d+$/).test(string);\n  }\n\n  /**\n  * Validates string for credit card cvv\n  *\n  * @param {String}   string  String to be test against regex\n  * @return {boolean}\n  */\n  function isValidCVV(string) {\n    return (/^\\d{3,4}$/).test(string);\n  }\n\n  /**\n  * Validates string for a valid month [MM]\n  *\n  * @param {String}   string  String to be test against regex\n  * @return {boolean}\n  */\n  function isValidMonth(string) {\n    return (/^(0?[1-9]|1[0-2])$/).test(string);\n  }\n\n  /**\n  * Validates string for a valid year [YYYY]\n  *\n  * @param {String}   string  String to be test against regex\n  * @return {boolean}\n  */\n  function isValidYear(string) {\n    return (/^[1-9]\\d{3,}$/).test(string);\n  }\n\n\n  // @TODO: This will be removed when Neue's validation gets refactored.\n  function validateNotBlank(string, done, success, failure) {\n    if( string !== \"\" ) {\n      return done({\n        success: true,\n        message: success\n      });\n    } else {\n      return done({\n        success: false,\n        message: failure\n      });\n    }\n  }\n\n  // @TODO: This will be removed when Neue's validation gets refactored.\n  function validateDigit(string, done, success, failure) {\n    if( isDigit(string) ) {\n      return done({\n        success: true,\n        message: success\n      });\n    } else {\n      return done({\n        success: false,\n        message: failure\n      });\n    }\n  }\n\n  /**\n  * Validates string for a valid credit card number\n  *\n  * @param {String}   string  String to be test against regex\n  * @return {boolean}\n  */\n  function validateCreditCardNumber(string, done, success, failure) {\n    var found = null;\n    for (var key in cardTypes) {\n      var card = cardTypes[key];\n      if (card.numberPattern.test(string)) {\n        found = card;\n      }\n    }\n    if (found) {\n      return done({\n        success: true,\n        message: found.name + \" \" + success\n      });\n    } else {\n      return done({\n        success: false,\n        message: failure\n      });\n    }\n  }\n\n  /**\n  * Validates string for a valid cvv\n  *\n  * @param {String}   string  String to be test against regex\n  * @return {boolean}\n  */\n  function validateCvv(string, done, success, failure) {\n    if ( isValidCVV(string) ) {\n      return done({\n        success: true,\n        message: success\n      });\n    } else {\n      return done({\n        success: false,\n        message: failure\n      });\n    }\n  }\n\n  /**\n  * Validates string for a valid expiration month\n  *\n  * @param {String}   string  String to be test against regex\n  * @return {boolean}\n  */\n  function validateExpMonth(string, done, success, failure) {\n    if ( isValidMonth(string)) {\n      return done({\n        success: true,\n        message: success\n      });\n    } else {\n      return done({\n        success: false,\n        message: failure\n      });\n    }\n  }\n\n  /**\n  * Validates string for a valid expiration year\n  *\n  * @param {String}   string  String to be test against regex\n  * @return {boolean}\n  */\n  function validateExpYear(string, done, success, failure) {\n    if ( isValidYear(string) ) {\n      return done({\n        success: true,\n        message: success\n      });\n    } else {\n      return done({\n        success: false,\n        message: failure\n      });\n    }\n  }\n\n  // # Add validation functions...\n\n  Validation.registerValidationFunction(\"full_name\", function(string, done) {\n    validateNotBlank(string, done,\n      Drupal.t(\"Hey, @name!\", {\"@name\": string}),\n      Drupal.t(\"We need your full name.\")\n    );\n  });\n\n  Validation.registerValidationFunction(\"cc_num\", function(string, done) {\n    validateCreditCardNumber(string, done,\n      Drupal.t(\"number looks good!\"),\n      Drupal.t(\"Invalid credit card number.\")\n    );\n  });\n\n  Validation.registerValidationFunction(\"cvv\", function(string, done) {\n    validateCvv(string, done,\n      Drupal.t(\"CVV looks good!\"),\n      Drupal.t(\"Invalid CVV.\")\n    );\n  });\n\n  Validation.registerValidationFunction(\"exp_month\", function(string, done) {\n    validateExpMonth(string, done,\n      Drupal.t(\"Good Month!\"),\n      Drupal.t(\"Invalid Month.\")\n    );\n  });\n\n  Validation.registerValidationFunction(\"exp_year\", function(string, done) {\n    validateExpYear(string, done,\n      Drupal.t(\"Good Year!\"),\n      Drupal.t(\"Invalid Year.\")\n    );\n  });\n\n  Validation.registerValidationFunction(\"amount\", function(string, done) {\n    validateDigit(string, done,\n      Drupal.t(\"So Generous!\"),\n      Drupal.t(\"Invalid Amount.\")\n    );\n  });\n\n});\n\n","/**\n * @module Analytics\n * Uses Google Analytics custom events API to fire events for client-side\n * Modal and Form Validation flows.\n */\ndefine('Analytics',[\"neue/events\"], function(Events) {\n  \"use strict\";\n\n  // We'll only fire GA Custom Events if the GA object exists\n  if(typeof(_gaq) !== \"undefined\" && _gaq !== null) {\n    // Validation\n    Events.subscribe(\"Validation:InlineError\", function(topic, args) {\n      _gaq.push([\"_trackEvent\", \"Form\", \"Inline Validation Error\", args, null, true]);\n    });\n\n    Events.subscribe(\"Validation:Suggestion\", function(topic, args) {\n      _gaq.push([\"_trackEvent\", \"Form\", \"Suggestion\", args, null, true]);\n    });\n\n    Events.subscribe(\"Validation:SuggestionUsed\", function(topic, args) {\n      _gaq.push([\"_trackEvent\", \"Form\", \"Suggestion Used\", args, null, true]);\n    });\n\n    Events.subscribe(\"Validation:Submitted\", function(topic, args) {\n      _gaq.push([\"_trackEvent\", \"Form\", \"Submitted\", args, null, false]);\n    });\n\n    Events.subscribe(\"Validation:SubmitError\", function(topic, args) {\n      _gaq.push([\"_trackEvent\", \"Form\", \"Validation Error on submit\", args, null, true]);\n    });\n\n    // Modals\n    Events.subscribe(\"Modal:Open\", function(topic, args) {\n      _gaq.push([\"_trackEvent\", \"Modal\", \"Open\", \"#\" + args.attr(\"id\"), null, true]);\n    });\n\n    Events.subscribe(\"Modal:Close\", function(topic, args) {\n      _gaq.push([\"_trackEvent\", \"Modal\", \"Close\", \"#\" + args.attr(\"id\"), null, true]);\n    });\n  }\n\n});\n\n","define('tiles',['require','jquery'],function(require) {\n  \"use strict\";\n\n  var $ = require(\"jquery\");\n\n  // Lazy-load in tile images\n  $(\".tile\").find(\"img\").unveil(200, function() {\n    $(this).load(function() {\n      this.style.opacity = 1;\n    });\n  });\n\n});\n\n"]}