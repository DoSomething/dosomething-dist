define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("text!finder/templates/campaign.tpl.html",[],function(){return'<li>\n<article class="tile">\n  <a class="wrapper" href="<%= url %>">\n    <% if(staffPick) {  %><div class="tile__flag -staff-pick"><%= Drupal.t("Staff Pick") %></div><% } %>\n    <div class="tile__meta">\n      <h1 class="tile__title"><%= title %></h1>\n      <p class="tile__tagline"><%= description %></p>\n    </div>\n    <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" data-src="<%= image %>">\n  </a>\n</article>\n</li>\n'}),define("finder/Campaign",["require","jquery","lodash","text!finder/templates/campaign.tpl.html"],function(e){"use strict";var t=e("jquery"),n=e("lodash"),i=e("text!finder/templates/campaign.tpl.html"),r=function(e){var n={title:"",description:"",url:"#",staffPick:!1,featured:!1};t.extend(this,n,this.convert(e))};return r.prototype.convert=function(e){var t={},n={label:"title",sm_field_call_to_action:"description",url:"url",bs_field_staff_pick:"staffPick",bs_sticky:"featured",ss_field_search_image_400x400:"image"};for(var i in e)void 0!==n[i]&&(t[n[i]]=e[i]);return t},r.prototype.render=function(){var e=n.template(i,{image:this.image,staffPick:this.staffPick,featured:this.featured,title:this.title,description:this.description,url:this.url});return e},r}),define("text!finder/templates/no-results.tpl.html",[],function(){return'<div class="no-result">\n  <div class="wrapper">\n    <p class="message"><%= Drupal.t("Oh snap! We\'ll work on that.") %></p>\n    <p>\n      <a id="reset-filters" href="/">\n        <%= Drupal.t("Want to try another combo?") %>\n      </a>\n    </p>\n  </div>\n</div>\n'}),define("finder/ResultsView",["require","jquery","lodash","finder/Campaign","text!finder/templates/no-results.tpl.html"],function(e){"use strict";var t=e("jquery"),n=e("lodash"),i=e("finder/Campaign"),r=e("text!finder/templates/no-results.tpl.html"),a={$container:null,$gallery:t("<ul class='gallery -quartet -mosaic'></ul>"),$blankSlateDiv:null,slots:0,maxSlots:8,start:0,init:function(e,n,i,r){a.$container=e,a.$container.hide(),a.$paginationLink=t("<div class='pagination-link'><a href='#' class='secondary js-finder-show-more'>"+Drupal.t("Show More")+"</a></div>"),t("body").on("click",".js-finder-show-more",function(e){e.preventDefault(),i(a.start)}),a.$blankSlateDiv=n,a.$container.on("click","#reset-filters",function(e){e.preventDefault(),a.showBlankSlate(),r()})},showBlankSlate:function(){a.$container.hide(),a.$blankSlateDiv.show()},showEmptyState:function(){var e=n.template(r);a.$container.append(e)},parseResults:function(e){if(a.clear(),e.retrieved>0){a.$container.append(a.$gallery);for(var t in e.result.response.docs)a.add(new i(e.result.response.docs[t]));a.showPaginationLink(e.result.response.numFound>a.start)}else a.showEmptyState();a.loading(!1)},showPaginationLink:function(e){a.$paginationLink.remove(),e&&(a.$container.append(a.$paginationLink),a.$paginationLink.show())},appendResults:function(e){for(var t in e.result.response.docs)a.add(new i(e.result.response.docs[t]));a.showPaginationLink(e.result.response.numFound>a.start),a.loading(!1)},loading:function(e){void 0===e&&(e=!0),a.$container.append("<div class='spinner'></div>"),a.$container.toggleClass("loading",e)},checkInit:function(){if(null===a.$container)throw Drupal.t("Error: ResultsView is not initialized.")},clear:function(){a.checkInit(),a.$container.empty(),a.$gallery.empty(),a.$container.show(),a.$blankSlateDiv.hide(),a.slots=0,a.start=0},add:function(e){a.checkInit(),a.$gallery.append(e.render()),a.slots++,a.start++,a.$container.find("img").unveil(200,function(){t(this).load(function(){this.style.opacity=1})})}};return a}),define("finder/SolrAdapter",["require","jquery","lodash"],function(e){"use strict";var t=e("jquery"),n=e("lodash");window.solrResponse=function(){};var i={throttleTimeout:400,baseURL:Drupal.settings.dosomethingSearch.solrURL,collection:Drupal.settings.dosomethingSearch.collection,throttle:null,defaultQuery:["fq=-sm_field_campaign_status:(closed) bundle:[campaign TO campaign_group]","wt=json","indent=false","facet=true","facet.field=fs_field_active_hours","facet.field=im_field_cause","facet.field=im_field_action_type","rows=8","fl=label,tid,im_vid_1,sm_vid_Action_Type,tm_vid_1_names,im_field_cause,im_vid_2,sm_vid_Cause,tm_vid_2_names,im_field_tags,im_vid_5,sm_vid_Tags,tm_vid_5_names,fs_field_active_hours,sm_field_call_to_action,bs_field_staff_pick,ss_field_search_image_400x400,ss_field_search_image_720x720,url"],fieldMap:{cause:"im_field_cause",time:"fs_field_active_hours","action-type":"im_field_action_type"},fieldMapInverse:{},responseData:null,init:function(){i.fieldMapInverse=n.invert(i.fieldMap)},throttledQuery:function(e,t,n){clearTimeout(i.throttle),i.throttle=setTimeout(function(){i.query(e,t,n)},i.throttleTimeout)},query:function(e,r,a){var o=n.clone(i.defaultQuery);o.push("start="+r);var s=[];n.forOwn(e,function(e,t){if(!n.isEmpty(e)){var r="("+e.join(") OR (")+")",a=i.generatePowerset(e);a.length&&(r+=" OR "+a),s.push(i.fieldMap[t]+":("+encodeURIComponent(r)+")")}}),i.xhr&&i.xhr.abort(),i.xhr=t.ajax({dataType:"jsonp",cache:!0,jsonpCallback:"solrResponse",url:i.buildQuery(o,s),success:function(e){a({result:e,retrieved:e.response.docs.length})},error:function(e,t){a({result:!1,error:t})},jsonp:"json.wrf"})},buildQuery:function(e,t){var n=e.push("q=")-1,r='_query_:"{!func}scale(is_bubble_factor,0,100)" AND ';return e[n]=t.length>0?1===t.length?"q="+r+t[0]:"q="+r+"("+t.join(") AND (")+")":r,e=e.join("&"),i.baseURL+i.collection+"/select?"+e},generatePowerset:function(e){function t(e){for(var t=[[]],n=0;n<e.length;n++)for(var i=0,r=t.length;r>i;i++)t.push(t[i].concat(e[n]));return t}for(var n=t(e),i=[],r=1;r<n.length;r++)n[r].length>1&&i.push("(("+n[r].join(") AND (")+"))^"+100*n[r].length);return i.join(" OR ")}};return i}),define("text!finder/templates/error.tpl.html",[],function(){return'<div class="messages error">\n  <%= Drupal.t("Ooof! We\'re not sure what\'s up? Maybe it\'s us, or it could be your internet connection. Want to try again in a few minutes?") %>\n</div>\n'}),define("finder/FormView",["require","jquery","lodash","finder/ResultsView","finder/SolrAdapter","text!finder/templates/error.tpl.html"],function(e){"use strict";var t=e("jquery"),n=e("lodash"),i=e("finder/ResultsView"),r=e("finder/SolrAdapter"),a=e("text!finder/templates/error.tpl.html"),o={$div:null,$searchButton:null,$fields:{},lastChanged:null,cssBreakpoint:768,init:function(e,a){o.$div=e,e.find("[data-toggle]").click(function(){var e=t(this),n=e.data("toggle"),i=e.parents("."+n),r=i.siblings();i.toggleClass("open"),t(window).outerWidth()>=o.cssBreakpoint&&(i.hasClass("open")?r.addClass("open"):r.removeClass("open"))}),o.$fields.cause=e.find("input[name='cause']"),o.$fields.time=e.find("input[name='time']"),o.$fields["action-type"]=e.find("input[name='action-type']"),o.$searchButton=e.find(".campaign-search"),n.each(o.$fields,function(e){e.each(function(e,n){var i=r.fieldMap[t(n).prop("name")],a=t(n).val();r.defaultQuery.push("facet.query="+i+":"+a)})}),n.each(o.$fields,function(e){e.change(function(){t(this).parents("li").toggleClass("checked",t(this).is(":checked")),o.lastChanged=t(this).attr("name"),a()})}),o.$searchButton.click(function(){a(),t("html,body").animate({scrollTop:i.$div.offset().scrollTop},1e3)})},checkInit:function(){if(null===o.$div)throw Drupal.t("Error: FormView is not initialized.")},showErrorMessage:function(){var e=n.template(a);t(".error").length<1&&o.$div.parents(".finder--form").after(e)},hasCheckedFields:function(){var e=!1;return n.each(o.$fields,function(t){t.filter(":checked").length>0&&(e=!0)}),e},getCheckedFields:function(){var e=[];return n.each(o.$fields,function(n,i){var r=n.filter(":checked");e[i]=[],r.length>0&&r.each(function(n,r){e[i].push(t(r).val())})}),e},disableFields:function(e){o.checkInit(),n.each(e,function(i,a){var o=a.split(":"),s=o[0],l=o[1],c=t("input[name='"+r.fieldMapInverse[s]+"']");if(n.isEmpty(c.filter(":checked"))){var u=0===e[a],d=c.filter("[value='"+l+"']");d.prop("disabled",u),u?(d.prop("checked",!u),d.parents("li").addClass("disabled")):d.parents("li").removeClass("disabled")}else c.filter(":not(:checked)").prop("disabled",!0),c.filter(":not(:checked)").parents("li").addClass("disabled")})},clear:function(){n.each(o.$fields,function(e){var t=e.filter(":disabled");t&&e.prop("disabled",!1).parents("li").removeClass("disabled")})}};return o}),define("finder/Finder",["require","finder/FormView","finder/ResultsView","finder/SolrAdapter"],function(e){"use strict";var t=e("finder/FormView"),n=e("finder/ResultsView"),i=e("finder/SolrAdapter"),r={init:function(e,a,o){t.init(e,r.query),n.init(a,o,r.query,t.clear),i.init()},query:function(e){var a=e||0,o=t.getCheckedFields();a?i.throttledQuery(o,a,n.appendResults):i.throttledQuery(o,a,r.displayResults),n.loading()},displayResults:function(e){e.result?t.hasCheckedFields()?(n.parseResults(e),t.disableFields(e.result.facet_counts.facet_queries)):(n.showBlankSlate(),t.clear()):t.showErrorMessage()}};return r}),define("StripeForm",["require","jquery"],function(e){"use strict";var t=e("jquery"),n=window.Stripe||{},i=function(e,n){if(void 0!==e&&t(e.length)&&void 0!==n){if(!this instanceof i)return new i(e,n);this.$form=t(e),this.$parent=this.$form.parent(),this.publishKey=n,this.init()}};return i.prototype={init:function(){var e=this;n.setPublishableKey(this.publishKey),this.$form.on("submit",function(e){e.preventDefault()}),this.$form.find(".form-submit").on("click",function(){setTimeout(function(){var t=e.isValid();t&&n.card.createToken(e.$form,function(t,n){e.onFormSubmit(t,n)})},100)})},onFormSubmit:function(e,t){var n=this.$form;if(t.error)n.find(".payment-errors").text(t.error.message);else{var i=t.id;n.find("input[name='token']").val(i),n.get(0).submit()}},isValid:function(){return 0===this.$form.find(".error").length}},i}),define("donate/Donate",["require","jquery","StripeForm"],function(e){"use strict";var t=e("jquery"),n=e("StripeForm"),i=t("#dosomething-payment-form"),r={init:function(){try{var e=Drupal.settings.dosomethingPayment.stripeAPIPublish;new n(i,e)}catch(t){i.html("<div class='messages'>Whoops! Something's not right. Please email us!</div>")}}};return r}),define("revealer/Revealer",["require","jquery"],function(e){"use strict";var t=e("jquery"),n=function(e,n,i,r,a){this.$container=e,this.$content=n,this.$button=t('<button class="button -tertiary">'+Drupal.t("Show More")+"</button>"),this.category=i,this.initialItems=r,this.stepItems=a,this.step,this.steps={items:[],count:0},this.init()};return n.prototype.init=function(){"gallery"===this.category?this.prepGalleryItems():this.steps.items.push(this.$content),this.steps.count=this.steps.items.length,this.detachContent(),this.enableButton()},n.prototype.detachContent=function(){this.$content.detach()},n.prototype.reattachContent=function(e){this.$container.append(e)},n.prototype.enableButton=function(){this.$button.insertAfter(this.$container);var e=this;this.$button.on("click",function(){e.steps.count>0&&(e.reattachContent(e.steps.items.shift()),e.steps.count--),0===e.steps.count&&e.$button.remove()})},n.prototype.prepGalleryItems=function(){this.$content=this.$content.slice(this.initialItems);var e=t.makeArray(this.$content);if(this.$content.length>this.stepItems)for(;e.length>0;)this.steps.items.push(e.splice(0,this.stepItems));else this.steps.items.push(e);e=null},n}),define("swapper/Swapper",[],function(){"use strict";var e=function(e){this.$image=e.find("img"),this.init()};return e.prototype.init=function(){var e=this.$image.data("src-large")||null;this.exchange(e)},e.prototype.exchange=function(e){e&&this.$image.attr("src",e)},e}),define("modal/events",[],function(){"use strict";var e={},t=-1,n=function(t,n){return e[t]?(setTimeout(function(){for(var i=e[t],r=i?i.length:0;r--;)i[r].func(t,n)},0),!0):!1},i=function(n,i){e[n]||(e[n]=[]);var r=(++t).toString();return e[n].push({token:r,func:i}),r},r=function(t){for(var n in e)if(e[n])for(var i=0,r=e[n].length;r>i;i++)if(e[n][i].token===t)return e[n].splice(i,1),t;return!1};return{publish:n,subscribe:i,unsubscribe:r}}),define("modal/modal",["require","./events"],function(e){"use strict";var t=window.jQuery,n=window.Modernizr,i=e("./events"),r=!1,a=null,o=t(document),s=t(".chrome"),l=null,c=t("<a href='#' class='js-close-modal js-modal-generated modal-close-button -alt'>skip</a>"),u=t("<a href='#' class='js-close-modal js-modal-generated modal-close-button'>&#215;</a>"),d=null,f=!1,p=function(){return null!==d},h=function(e,n,i){switch(n){case"skip":e.prepend(c),c.on("click",function(e){e.preventDefault(),t(i).submit()}),f=!1;break;case"false":case"0":f=!1;break;case"closeButtonOnly":e.prepend(u),f=!1;break;default:e.prepend(u),f=!0}},m=function(e,t){if(t=t||{},t.animated="boolean"==typeof t.animated?t.animated:!0,t.closeButton="undefined"!=typeof t.closeButton?t.closeButton:e.attr("data-modal-close"),t.skipForm="undefined"!=typeof t.skipForm?t.skipForm:e.attr("data-modal-skip-form"),0===e.length)return!1;if(!r)return a={$el:e,options:t},!1;var c="-"+o.scrollTop()+"px";h(e,t.closeButton,t.skipForm),p()?(d.hide(),e.show()):(s.css("top",c),s.addClass("has-modal"),l.css("display","block"),t.animated&&n.cssanimations&&l.addClass("animated-open"),e.css("display","block")),setTimeout(function(){o.scrollTop(0)},50),i.publish("Modal:Open",e),d=e},g=function(e){l.css("display","none"),l.removeClass("animated-close"),d.css("display","none"),d.find(".js-modal-generated").remove(),s.removeClass("has-modal"),s.removeClass("animated-close"),s.css("top",""),o.scrollTop(e),d=null},v=function(e){e=e||{},e.animated="undefined"!=typeof e.animated?e.animated:!0;var t=-1*parseInt(s.css("top"));window.location.hash==="#"+d.attr("id")&&(window.location.hash="/"),e.animated&&n.cssanimations?(s.addClass("animated-close"),l.addClass("animated-close"),l.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){g(t)})):g(t),i.publish("Modal:Close",d)},y=function(e){e.preventDefault();var n=t(this).data("modal-href");m(t(n))},b=function(e){e.target===this&&(t(this).hasClass("js-close-modal")||f)&&(e.preventDefault(),v())};return o.ready(function(){var e=t("body");l=t("<div class='modal-container'></div>"),e.append(l),t("[data-modal]").each(function(){t(this).appendTo(l),t(this).attr("hidden",!0)});var n=window.location.hash;n&&"#/"!==n&&t(n)&&"undefined"!=typeof t(n).data("modal")&&m(t(n)),r=!0,null!==a&&m(a.$el,a.options),e.on("click","[data-modal-href]",y),e.on("click",".modal-container",b),e.on("click",".js-close-modal",b)}),window.DS=window.DS||{},window.DS.Modal={isOpen:p,open:m,close:v,Events:i},window.DS.Modal}),define("modal",["modal/modal"],function(e){return e}),define("validation/events",[],function(){"use strict";var e={},t=-1,n=function(t,n){return e[t]?(setTimeout(function(){for(var i=e[t],r=i?i.length:0;r--;)i[r].func(t,n)},0),!0):!1},i=function(n,i){e[n]||(e[n]=[]);var r=(++t).toString();return e[n].push({token:r,func:i}),r},r=function(t){for(var n in e)if(e[n])for(var i=0,r=e[n].length;r>i;i++)if(e[n][i].token===t)return e[n].splice(i,1),t;return!1};return{publish:n,subscribe:i,unsubscribe:r}}),define("validation/validation",["require","./events"],function(e){"use strict";var t=window.jQuery,n=e("./events"),i=[],r=function(e){e.each(function(){var e=t(this);a(t("label[for='"+e.attr("id")+"']")),e.on("blur",function(t){t.preventDefault(),o(e)})})},a=function(e){if(0===e.find(".validation").length){var n=t("<div class='validation'></div>");n.append("<div class='validation__label'>"+e.html()+"</div>"),n.append("<div class='validation__message'></div>"),e.html(n)}},o=function(e,n,r){n="undefined"!=typeof n?n:!1,r="undefined"!=typeof r?r:function(e,t){c(e,t)};var a=e.data("validate"),s=e.data("validate-trigger");if(s&&o(t(s)),i[a])if(f(e)){var l=e.val();if(n||""!==l)if("match"===a){var u=t(e.data("validate-match")).val();i[a].fn(l,u,function(t){r(e,t)})}else i[a].fn(l,function(t){r(e,t)})}else if("match"===a){var d=t(e.data("validate-match"));i[a].fn(e,d,function(t){r(e,t)})}else i[a].fn(e,function(t){r(e,t)})},s=function(e,t){if(i[e])throw"A validation function with that name has already been registered";i[e]=t},l=function(e,t){var n={fn:t};s(e,n)},c=function(e,i){var r,a=t("label[for='"+e.attr("id")+"']"),o=a.find(".validation"),s=o.find(".validation__message"),l=a.height();return e.removeClass("has-success has-error has-warning shake"),s.removeClass("has-success has-error has-warning"),i.success===!0?(e.addClass("has-success"),s.addClass("has-success")):(e.addClass("has-error"),s.addClass("has-error"),f(e)&&e.addClass("shake"),n.publish("Validation:InlineError",a.attr("for"))),i.message&&s.text(i.message),i.suggestion&&(s.html("Did you mean "+i.suggestion.full+"? <a href='#' data-suggestion='"+i.suggestion.full+"'class='js-mailcheck-fix'>Fix it!</a>"),n.publish("Validation:Suggestion",i.suggestion.domain)),r=s.height(),r>l?a.css("height",r+"px"):a.css("height",""),o.addClass("is-showing-message"),t(".js-mailcheck-fix").on("click",function(e){e.preventDefault();var i=t("#"+t(this).closest("label").attr("for"));i.val(t(this).data("suggestion")),i.trigger("blur"),n.publish("Validation:SuggestionUsed",t(this).text())}),e.on("focus",function(){e.removeClass("has-warning has-error has-success shake"),o.removeClass("is-showing-message"),a.css("height","")}),i.success},u=function(e){var t=e.find(":submit");t.attr("disabled",!0),t.addClass("is-loading")},d=function(e){var t=e.find(":submit");t.attr("disabled",!1),t.removeClass("is-loading is-disabled")},f=function(e){var t=e.prop("tagName");return"INPUT"===t||"SELECT"===t||"TEXTAREA"===t};return t("body").on("submit","form",function(e,i){var r=t(this),a=r.find("[data-validate]");if(u(r),a=a.map(function(){var e=t(this);return"undefined"!=typeof e.attr("data-validate-required")||""!==e.val()?e:void 0}),0===a.length)return!0;if(i===!0)return!0;e.preventDefault();var s=0,l=0,f=!1;return a.each(function(){o(t(this),!0,function(e,i){s++,c(e,i),i.success&&l++,f||i.success!==!1||(f=!0,t("html,body").animate({scrollTop:e.offset().top-32},200)),s===a.length&&(l===a.length?(n.publish("Validation:Submitted",t(this).attr("id")),r.trigger("submit",!0)):(n.publish("Validation:SubmitError",t(this).attr("id")),d(r)))})}),!1}),l("match",function(e,t,n){return n(e===t&&""!==e?{success:!0,message:"Looks good!"}:{success:!1,message:"That doesn't match."})}),t(function(){r(t("body").find("[data-validate]"))}),window.DS=window.DS||{},window.DS.Validation={prepareFields:r,registerValidation:s,registerValidationFunction:l,validateField:o,showValidationMessage:c,Validations:i,Events:n},window.DS.Validation}),define("validation",["validation/validation"],function(e){return e}),define("images/ImageCrop",["require","jquery"],function(e){"use strict";var t,n,i,r,a,o,s,l,c,u,d,f,p,h,m,g=e("jquery"),v=!1,y=!1,b=480,w=g("<div class='cropbox'><div class='resize-handle'></div></div>"),k=0,_=0,$=1,j=0,D=function(e){var t={},n=e.originalEvent.type;return t="touchstart"===n||"touchmove"===n||"touchend"===n?e.originalEvent.targetTouches[0]:{pageX:e.pageX,pageY:e.pageY}},x=function(e,t){return e/t},C=function(e,t,n){var i,r=e>t?"landscape":"portrait";if("landscape"===r){var a=e/2;i=a>t?t:a}else{var o=t/2;i=o>e?e:o}return i>n?i:n},A=function(e,t,n){var i=e/2-t/2;return 90===n||270===n?270===n?-i:i:0},F=function(e){var s=D(e);y&&(t=s.pageX,n=s.pageY,w.length&&(i=parseInt(w.css("left"),10),r=parseInt(w.css("top"),10)),window.requestAnimationFrame(function(){I()})),v&&(w.length&&(a=parseInt(w.css("height"),10),o=parseInt(w.css("width"),10)),k=s.pageX,_=s.pageY,window.requestAnimationFrame(function(){q()}))},M=function(){y=!1,v=!1},S=function(e,s,l){var c=D(l),u=parseInt(w.css("height"),10),g=parseInt(w.css("width"),10),b=parseInt(w.css("top"),10),_=parseInt(w.css("left"),10);if(y){d=i+(c.pageX-t),f=r+(c.pageY-n);var $=e-g>d?!0:!1,j=s-u>f?!0:!1;d=$?0>d?0:d:e-g,f=j?0>f?0:f:s-u}if(v){y=!1;var x=e-_,C=s-b,A=c.pageX-k>0?!0:!1,F=c.pageX-k<0?!0:!1;p=o+(c.pageX-k),h=a+(c.pageX-k),A&&(p>=x&&(p=x,h=x),h>=C&&(h=C,p=C)),F&&m>=p&&(p=m,h=m)}},I=function(){y&&window.requestAnimationFrame(function(){I()}),w.css("top",f),w.css("left",d)},q=function(){v&&window.requestAnimationFrame(function(){q()}),w.css("height",h),w.css("width",p)},E=function(e,t){g(document).off("touchmove mousemove"),g(document).off("touchend mouseup"),w.on("touchstart mousedown",function(e){e.preventDefault(),y=!0,F(e)}),g(".resize-handle").on("touchstart mousedown",function(e){e.preventDefault(),v=!0,F(e)}),g(document).on("touchend mouseup",function(){M()}),g(document).on("touchmove mousemove",function(n){S(e,t,n)})},T=function(e,t){if(c.length){var n=c.parent(),i=C(e,t,m),r=Math.floor(e/2-i/2),a=Math.floor(t/2-i/2);n.width(e),n.height(t),w.insertBefore(c).css({left:r,top:a,width:i,height:i}),f=a,d=r,h=i,p=i,E(e,t)}},V=function(e,t){var n=e.width(),i=e.height(),r=c.parent(),a=A(n,i,t);90===t||270===t?(r.css({height:n}),T(i,n)):(r.css({height:i}),T(n,i)),e.css({transform:"rotate("+t+"deg) translate("+a+"px, "+a+"px)"})},B=function(e){var t=e.find("input[name='crop_x']"),n=e.find("input[name='crop_y']"),i=e.find("input[name='crop_width']"),r=e.find("input[name='crop_height']"),a=e.find("input[name='crop_rotate']"),o=e.find("input[name='caption']"),s=g("#dosomething-reportback-image-form").find("input[name='modal-caption']").val(),l={top:Math.round((w.offset().top-c.offset().top)*$),left:Math.round((w.offset().left-c.offset().left)*$),width:Math.round(w.outerWidth()*$),height:Math.round(w.outerHeight()*$),degrees:j};t.val(l.left),n.val(l.top),i.val(l.width),r.val(l.height),a.val(l.degrees),o.val(s)},P=function(e){if(u=e,c=g("#modal--crop").find(".preview"),c.length){s=c.width(),l=c.height(),$=u.width/c.width(),m=x(b,$),c.wrap(g("<div class='crop-bounding-box'></div>")),T(s,l);var t=g(".image-editor").find(".-rotate");t.off("click"),j=0,t.on("click",function(e){e.preventDefault(),j=360===j?90:j+90,V(c,j)})}};return{dsCropperInit:P,populateFields:B}}),define("images/ImageCropPreview",["require","jquery"],function(e){"use strict";var t=e("jquery"),n=t("<figure class='reportback__submission-cropped'></figure>"),i=t(".reportback__submissions"),r=t(".gigantor"),a=function(){return t(".reportback__submission-latest").length?!1:!0},o=function(e,t,n){var i=e/2-t/2;return 90===n||270===n?270===n?-i:i:0},s=function(e,t,i){var r=n.width(),a=i.width/r,s=i.height/r,l=e/a,c=t/s,u=o(l,c,i.degrees);return{left:-(i.x/a)+"px",top:-(i.y/s)+"px",width:l,height:c,transform:"rotate("+i.degrees+"deg) translate("+u+"px, "+u+"px)"}},l=function(){if(a())r.hide();else{var e=i.find(".reportback__submission-latest img"),n=i.find(".reportback__submissions-list");n.length||(n=t("<ul class='reportback__submissions-list gallery'></ul>"),i.append(n));var o=n.find("li").length;4===o&&t(".reportback__submissions-list li:last-child").remove(),e.prependTo(n).wrap("<li></li>")}},c=function(e,r){var a=e.height,o=e.width,c="<img src='"+e.src+"'/>";l(),n.prependTo(i).empty().append(c),n.css("height",n.width());var u=s(o,a,r);n.find("img").css(u);var d=t(".reportback__submission__copy");t(".reportback__submission__copy").length?d.text(r.caption):(d=t('<figcaption class="reportback__submission__copy">'),n.after(d.text(r.caption)))};return{cropPreview:c}}),define("images/ImageUpload",["require","jquery","modal","validation","images/ImageCrop","../images/ImageCropPreview"],function(e){"use strict";var t=e("jquery"),n=e("modal"),i=e("validation"),r=e("images/ImageCrop"),a=e("../images/ImageCropPreview"),o=function(e){this.$uploadButton=e,this.$uploadButtonLabel=this.$uploadButton.closest("label"),this.$cropModal=t("#modal--crop"),this.$reportbackForm=t("#dosomething-reportback-form"),this.$imageForm=this.$cropModal.find("#dosomething-reportback-image-form"),this.$imageCaption=this.$imageForm.find("#modal-caption"),this.$cropButton=this.$imageForm.find(".button"),this.$imagePreview=this.$cropModal.find(".image-preview"),this.$reportbackSubmissions=t(".reportback__submissions"),this.imageValues={},this.readyToSave=!1,this.fileTypes=["image/png","image/gif","image/jpeg","image/pjpeg"],this.fileSizeLimit=1e7,this.typeError="Only JPEG, PNG, and GIF images are allowed",this.dimensionsError="Please upload a larger photo. Min. size is 480px by 480px.",this.sizeError="Please upload an image under 10MB",this.init()};return o.prototype.init=function(){var e=this;this.$uploadButton.on("change",function(t){t.preventDefault();var n=this.files?this.files:[];if(n.length&&window.FileReader){if(!e.validImageType(n))return void e.showError(e.typeError);if(!e.validFileSize(n))return void e.showError(e.sizeError);var i=new FileReader;window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/iPhone/i)?(i.readAsArrayBuffer(this.files[0]),i.onload=function(){var t=e.getStrippedBlob(this.result),n=window.URL||window.webkitURL,i=n.createObjectURL(t);e.loadImage(i)}):(i.readAsDataURL(n[0]),i.onloadend=function(){var t=this.result;e.loadImage(t)})}}),n.Events.subscribe("Modal:Close",function(){e.resetFileField(),e.moveUploadButton(e.$uploadButtonLabel),e.readyToSave&&e.createEditButton()}),n.Events.subscribe("Modal:Open",function(){e.moveUploadButton(t(".-change .button"))})},o.prototype.moveUploadButton=function(e){var t=this.$uploadButton.detach();t.appendTo(e)},o.prototype.validateCaption=function(e,t){var n=this;i.validateField(this.$imageCaption,!0,function(r,a){i.showValidationMessage(r,a),a.success&&e(n,t)})},o.prototype.engageImageCrop=function(e,t){var i=e;r.populateFields(i.$reportbackForm),a.cropPreview(t,i.getCropValues()),i.readyToSave=!0,n.close()},o.prototype.openModal=function(){this.enableSubmit(),n.open(this.$cropModal,{animated:!1,closeButton:"closeButtonOnly"})},o.prototype.resetFileField=function(){var e=this.$uploadButton;this.readyToSave||e.replaceWith(this.$uploadButton=e.val("").clone(!0))},o.prototype.createEditButton=function(){var e=this;if(!this.$reportbackSubmissions.find(".button--edit").length){var n=t("<span class='button button--edit -tertiary'>edit photo</span>");this.$uploadButton.parent().hide().before(n),n.click(function(){e.openModal()})}},o.prototype.getCropValues=function(){return{x:this.$reportbackForm.find("input[name='crop_x']").val(),y:this.$reportbackForm.find("input[name='crop_y']").val(),width:this.$reportbackForm.find("input[name='crop_width']").val(),height:this.$reportbackForm.find("input[name='crop_height']").val(),degrees:parseInt(this.$reportbackForm.find("input[name='crop_rotate']").val()),caption:this.$reportbackForm.find("input[name='caption']").val()}},o.prototype.enableSubmit=function(){var e=this.$cropModal.find(".-done");e.prop("disabled")&&e.prop("disabled",!1),e.hasClass("is-loading")&&e.removeClass("is-loading")},o.prototype.validImageSize=function(e){return e.width>=480&&e.height>=480},o.prototype.validImageType=function(e){var t=e[0].type;return this.fileTypes.indexOf(t)>-1},o.prototype.validFileSize=function(e){var t=e[0].size;return t<=this.fileSizeLimit?!0:!1},o.prototype.removeError=function(){var e=this.$uploadButton.parent().siblings(".error");e.length&&e.remove()},o.prototype.showError=function(e){this.removeError();var i=t("<div class='messages error'>"+e+"</div>");n.isOpen()&&n.close(),this.$reportbackSubmissions.prepend(i)},o.prototype.resizeImage=function(e,t){var n=e.width(),i=e.height(),r=t.width(),a=n>i?"landscape":"portrait";(n>r||i>r)&&("portrait"===a?e.height(r):e.width(r))},o.prototype.previewImage=function(e,n){var i=this,a=t("<img class='preview' src=''>");n.html(a),a.attr("src",e.src).load(function(){var a=t(this);i.resizeImage(a,n),r.dsCropperInit(e)})},o.prototype.loadImage=function(e){var t=this,n=new Image;n.src=e,n.onload=function(){var e=t.validImageSize(this);t.removeError(),e?(t.openModal(),t.previewImage(n,t.$imagePreview),t.$cropButton.off("click"),t.$cropButton.on("click",function(e){e.preventDefault(),t.validateCaption(t.engageImageCrop,n)})):t.showError(t.dimensionsError)}},o.prototype.getStrippedBlob=function(e){var t,n=new DataView(e),i=0,r=0,a=[],o=0;if(65496===n.getUint16(i)){i+=2;var s=n.getUint16(i);for(i+=2;i<n.byteLength;){if(65505===s)a[o]={recess:r,offset:i-2},r=i+n.getUint16(i),o++;else if(65498===s)break;i+=n.getUint16(i),s=n.getUint16(i),i+=2}if(a.length>0){var l=[];a.forEach(function(t){l.push(e.slice(t.recess,t.offset))},this),l.push(e.slice(r)),t=new Blob(l,{type:"image/jpeg"})}else t=new Blob([n],{type:"image/jpeg"})}else t=new Blob([n],{type:"image/png"});return t},o}),define("text!images/templates/fallback-upload-interface.tpl.html",[],function(){return'<div class="file-selection">\n  <p class="file-selection__indicator">\n    <strong>Selected Photo:</strong> <span class="file-selection__name"><%= file %></span>\n  </p>\n  <label class="<%= classes %>">\n    <span>Change photo</span>\n  </label>\n</div>\n'}),define("images/ImageUploadFallback",["require","jquery","lodash","text!images/templates/fallback-upload-interface.tpl.html"],function(e){"use strict";var t=e("jquery"),n=e("lodash"),i=e("text!images/templates/fallback-upload-interface.tpl.html"),r={component:{$container:null,$fileInterface:null,$indicator:null,$input:null,fileName:null,id:null,classes:["button","button--file","-tertiary"]},init:function(e,n){e.attr("class",""),this.component.$input=e,this.component.id=e.attr("id"),this.component.$container=t(n),this.activateInput(this.component.$input)},activateInput:function(e){var t=this;e.on("change",function(e){t.component.fileName=t.getFileName(e.target.value),t.component.$fileInterface?t.updateFileSelection():t.buildUpatedComponent()})},emptyContainer:function(){this.component.$container.html("")},getFileName:function(e){var t=e.indexOf("fakepath\\");return t>=0?e.substring(t+9,e.length):e},buildUpatedComponent:function(){var e={id:this.component.id,classes:this.component.classes.join(" "),file:this.component.fileName},r=t(n.template(i,e));this.component.$input.detach(),r.find(".button--file").append(this.component.$input),this.emptyContainer(),this.component.$indicator=r.find(".file-selection__name"),this.component.$fileInterface=r,this.insertUpdatedComponent()},insertUpdatedComponent:function(){this.component.$container.prepend(this.component.$fileInterface)},updateFileSelection:function(){this.component.$indicator.text(this.component.fileName)}};return r}),define("text!reportback/templates/reportback.tpl.html",[],function(){return'<% if (isListItem) { %><li><% } %>\n<figure class="photo -stacked -framed">\n  <% if (adminLink) { %>\n  <div class="admin-edit">\n    <a class="button -secondary" href="<%= adminLink %>">Edit Status</a>\n  </div>\n  <% } %>\n  <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=" alt="<%= caption %>" data-src="<%= image %>" />\n  <figcaption class="__copy"><%= caption %></figcaption>\n</figure>\n<% if (isListItem) { %></li><% } %>\n'}),define("reportback/Reportback",["require","jquery","lodash","modal","../images/ImageUpload","../images/ImageUploadFallback","text!reportback/templates/reportback.tpl.html"],function(e){"use strict";var t=e("jquery"),n=e("lodash"),i=(e("modal"),e("../images/ImageUpload")),r=e("../images/ImageUploadFallback"),a=e("text!reportback/templates/reportback.tpl.html"),o={$initialGallery:null,$extendedGallery:null,$viewMoreContainer:null,$viewMoreButton:null,$spinner:null,apiUrl:"/api/v1/campaigns",nid:null,offset:0,itemsPrefetched:0,itemsTotal:null,bundleSize:12,requestSize:60,inventory:[],currentIndex:0,galleryInDom:!1,adminAccess:null,init:function(e){this.reportbackContainer=e,this.$reportbackWrapper=this.reportbackContainer.find(".wrapper"),this.$reportbackForm=this.reportbackContainer.find("#dosomething-reportback-form"),this.$uploadButton=this.reportbackContainer.find(".js-image-upload"),this.$captionField=this.$reportbackForm.find(".form-item-caption"),this.$initialGallery=e.find(".gallery--reportback"),this.adminAccess=e.data("admin"),this.itemsPrefetched=e.data("prefetched"),this.itemsTotal=e.data("total")-this.itemsPrefetched,this.nid=e.data("nid"),this.offset=this.itemsPrefetched,this.itemsPrefetched<this.itemsTotal&&(this.apiUrl=this.buildApiUrl(),this.enableViewMore(),this.enableResponsive()),Modernizr.filereader?this.imageUploadInit():r.init(this.$uploadButton,".reportback__submissions")
},imageUploadInit:function(){new i(this.$uploadButton);this.$captionField.hide()},appendEntries:function(e){var n=e,i=n+this.bundleSize,r=t(),a=null;this.outOfStock(i)&&(i=this.itemsTotal);for(var o=n;i>o;o++)void 0!==this.inventory[o]&&(r=r.add(this.inventory[o]));a=r.find("img"),a.unveil(100,function(){var e=t(this);e.load(function(){e.parent(".photo").addClass("-unveiled")})}),this.galleryInDom?this.$extendedGallery.append(r):this.insertGallery(r),t(window).trigger("scroll")},buildApiUrl:function(){return this.apiUrl+"/"+this.nid+"/gallery.json"},disableViewMore:function(){this.$viewMoreButton.remove()},enableViewMore:function(){var e=this;this.$viewMoreContainer=t('<div class="reportback__view-more"></div>'),this.$viewMoreButton=t('<button id="view-more-button" class="button button--view-more -tertiary inline-alt-text-color">View more</button>'),this.$viewMoreContainer.append(this.$viewMoreButton),this.$viewMoreContainer.insertAfter(this.isLargerMedia()?this.$reportbackWrapper:this.$initialGallery),this.$viewMoreButton.on("click",function(){e.evaluateInventory()})},enableResponsive:function(){var e=this;t(window).on("resize",n.debounce(function(){e.isLargerMedia()?e.$viewMoreContainer&&(e.$viewMoreContainer.detach(),e.$viewMoreContainer.insertAfter(e.$reportbackWrapper)):e.$viewMoreContainer&&(e.$viewMoreContainer.detach(),e.$viewMoreContainer.insertAfter(e.$initialGallery))},300))},evaluateInventory:function(){this.inventory.length?this.lowInventory()?(this.request(this.currentIndex),(this.currentIndex+=this.bundleSize)>=this.itemsTotal&&(this.currentIndex=this.itemsTotal)):(this.appendEntries(this.currentIndex),this.currentIndex+=this.bundleSize):(this.request(this.currentIndex),this.currentIndex+=this.bundleSize),this.outOfStock(this.currentIndex)&&this.disableViewMore()},insertGallery:function(e){var n=e||null;this.$extendedGallery=t('<ul class="gallery gallery--extended"></ul>'),n&&this.$extendedGallery.html(n),this.$viewMoreContainer.prepend(this.$extendedGallery),this.galleryInDom=!0},isLargerMedia:function(){return t(window).outerWidth()>=760},lowInventory:function(){return this.currentIndex+this.bundleSize>this.inventory.length?!0:!1},outOfStock:function(e){return e>=this.itemsTotal?!0:!1},request:function(e){var n=this;t.ajax({url:this.apiUrl,dataType:"json",data:{offset:this.offset,count:this.requestSize},beforeSend:function(){n.$spinner?n.$spinner.show():(n.$spinner=t('<div class="spinner"></div>'),n.$viewMoreContainer.append(n.$spinner))}}).done(function(t){n.templatize(t),n.$spinner.hide(),n.appendEntries(e)}).fail(function(){}).always(function(){n.offset=n.inventory.length+n.itemsPrefetched})},templatize:function(e){for(var t=0,i=e.length;i>t;t++){var r={id:e[t].rbid,image:e[t].src,caption:e[t].caption,status:e[t].status,isListItem:!0};r.adminLink=this.adminAccess?"/admin/reportback/"+e[t].rbid:!1;var o=n.template(a,r);this.inventory.push(o)}}};return o}),define("utils/Share",["require","jquery"],function(e){"use strict";var t=e("jquery"),n=function(){var e="scrollbars=yes,resizable=yes,toolbar=no,location=yes",n=550,i=420,r=screen.height,a=screen.width;t("body").on("click","a.js-share-link",function(t){t.preventDefault();var o=Math.round(a/2-n/2),s=0;r>i&&(s=Math.round(r/2-i/2)),window.open(this.href,"_blank",e+",width="+n+",height="+i+",left="+o+",top="+s)})};return{popup:n}}),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("neue",["jquery"],t):"object"==typeof exports?exports.Neue=t(require(void 0)):e.Neue=t(e.jQuery)}(this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e};n(1),n(2),n(3),n(4);var r=i(n(5));n(6),n(7),e.exports={Messages:r}},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=i(n(8));r(document).ready(function(){var e=r(".js-toggle-collapsed");e.addClass("is-collapsed is-toggleable"),e.on("click",function(){window.matchMedia("screen and (max-width: 768px)").matches&&r(this).toggleClass("is-collapsed")})})},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=i(n(8));r(document).ready(function(){r(".js-footnote-toggle").each(function(){var e=r(this).closest(".footnote").find(".js-footnote-hidden");e.hide(),r(this).wrapInner("<a href='#'></a>").on("click",function(t){t.preventDefault(),e.slideToggle()})})})},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=i(n(8));r(document).ready(function(){r("body").on("click",".js-jump-scroll",function(e){e.preventDefault();var t=r(this).attr("href");r("html,body").animate({scrollTop:r(e.target.hash).offset().top},"slow",function(){window.location.hash=t})})})},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=i(n(8));r(document).ready(function(){r(".js-navigation-toggle").on("touchstart mousedown",function(e){e.preventDefault(),r(".chrome").toggleClass("has-mobile-menu"),r(".navigation").toggleClass("is-visible")}),r(".navigation__dropdown-toggle").on("click",function(e){e.preventDefault(),r(".navigation__dropdown").toggleClass("is-visible")})})},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=i(n(8)),a='<a href="#" class="js-close-message messages__close"><span>Close</span></a>',o=function(e){var t=void 0===arguments[1]?null:arguments[1];e.append(a),e.on("click",".js-close-message",function(e){e.preventDefault(),r(this).parent(".messages").slideUp(),t&&"function"==typeof t&&t()})};r(document).ready(function(){o(r(".messages"))}),e.exports={attachCloseButton:o}},function(e,t,n){"use strict";function i(){u=[],d=[],o(".js-scroll-indicator").find("a").each(function(e,t){var n=o(t),i=o(n.attr("href"));i.length&&(u.push(i.offset().top),d.push(n))})}function r(){var e=l(u,o(window).scrollTop()+40),t=d[e];if(t){var n=t.parentsUntil(".js-scroll-indicator");if(c&&c!==t){var i=c.parentsUntil(".js-scroll-indicator").not(n);i.removeClass("is-active"),c.removeClass("is-active")}t.addClass("is-active"),n.addClass("is-active"),c=t}}var a=function(e){return e&&e.__esModule?e["default"]:e},o=a(n(8)),s=a(n(9)),l=a(n(10)),c=void 0,u=[],d=[];o(document).ready(function(){i();var e=s(r,60);o(window).on("scroll",e),o(window).on("resize",i)})},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=i(n(8));r(document).ready(function(){var e=r(".js-tabs"),t=e.find(".tabs__menu a");e.each(function(){r(this).find(".tabs__tab").first().addClass("is-active")}),t.on("click",function(e){e.preventDefault();var t=r(this).parent().siblings(),n=r(this).data("tab")-1,i=r(this).closest(".js-tabs").find(".tabs__tab"),a=i.get(n);t.removeClass("is-active"),r(this).parent().addClass("is-active"),i.removeClass("is-active"),r(a).addClass("is-active")})})},function(t){t.exports=e},function(e,t,n){function i(e,t,n){var i=!0,l=!0;if("function"!=typeof e)throw new TypeError(o);return n===!1?i=!1:a(n)&&(i="leading"in n?!!n.leading:i,l="trailing"in n?!!n.trailing:l),s.leading=i,s.maxWait=+t,s.trailing=l,r(e,t,s)}var r=n(11),a=n(12),o="Expected a function",s={leading:!1,maxWait:0,trailing:!1};e.exports=i},function(e,t,n){var i=n(13),r=i();e.exports=r},function(e,t,n){function i(e,t,n){function i(){g&&clearTimeout(g),f&&clearTimeout(f),f=g=v=void 0}function l(){var n=t-(a()-h);if(0>=n||n>t){f&&clearTimeout(f);var i=v;f=g=v=void 0,i&&(y=a(),p=e.apply(m,d),g||f||(d=m=null))}else g=setTimeout(l,n)}function c(){g&&clearTimeout(g),f=g=v=void 0,(w||b!==t)&&(y=a(),p=e.apply(m,d),g||f||(d=m=null))}function u(){if(d=arguments,h=a(),m=this,v=w&&(g||!k),b===!1)var n=k&&!g;else{f||k||(y=h);var i=b-(h-y),r=0>=i||i>b;r?(f&&(f=clearTimeout(f)),y=h,p=e.apply(m,d)):f||(f=setTimeout(c,i))}return r&&g?g=clearTimeout(g):g||t===b||(g=setTimeout(l,t)),n&&(r=!0,p=e.apply(m,d)),!r||g||f||(d=m=null),p}var d,f,p,h,m,g,v,y=0,b=!1,w=!0;if("function"!=typeof e)throw new TypeError(o);if(t=0>t?0:+t||0,n===!0){var k=!0;w=!1}else r(n)&&(k=n.leading,b="maxWait"in n&&s(+n.maxWait||0,t),w="trailing"in n?n.trailing:w);return u.cancel=i,u}var r=n(12),a=n(14),o="Expected a function",s=Math.max;e.exports=i},function(e){function t(e){var t=typeof e;return"function"==t||!!e&&"object"==t}e.exports=t},function(e,t,n){function i(e){return function(t,n,i,s){return null==i?a(t,n,e):o(t,n,r(i,s,1),e)}}var r=n(15),a=n(16),o=n(17);e.exports=i},function(e,t,n){var i=n(18),r=i(r=Date.now)&&r,a=r||function(){return(new Date).getTime()};e.exports=a},function(e,t,n){function i(e,t,n){var i=typeof e;return"function"==i?"undefined"==typeof t?e:s(e,t,n):null==e?l:"object"==i?r(e):"undefined"==typeof t?o(e+""):a(e+"",t)}var r=n(19),a=n(20),o=n(21),s=n(22),l=n(23);e.exports=i},function(e,t,n){function i(e,t,n){var i=0,o=e?e.length:i;if("number"==typeof t&&t===t&&s>=o){for(;o>i;){var l=i+o>>>1,c=e[l];(n?t>=c:t>c)?i=l+1:o=l}return o}return r(e,t,a,n)}var r=n(17),a=n(23),o=Math.pow(2,32)-1,s=o>>>1;e.exports=i},function(e){function t(e,t,r,o){t=r(t);for(var s=0,l=e?e.length:0,c=t!==t,u="undefined"==typeof t;l>s;){var d=n((s+l)/2),f=r(e[d]),p=f===f;if(c)var h=p||o;else h=u?p&&(o||"undefined"!=typeof f):o?t>=f:t>f;h?s=d+1:l=d}return i(l,a)}var n=Math.floor,i=Math.min,r=Math.pow(2,32)-1,a=r-1;e.exports=t},function(e,t,n){function i(e){return null==e?!1:u.call(e)==o?d.test(c.call(e)):a(e)&&s.test(e)}var r=n(24),a=n(25),o="[object Function]",s=/^\[object .+?Constructor\]$/,l=Object.prototype,c=Function.prototype.toString,u=l.toString,d=RegExp("^"+r(u).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){var t=s(e),n=t.length;if(!n)return a(!0);if(1==n){var i=t[0],c=e[i];if(o(c))return function(e){return null!=e&&e[i]===c&&("undefined"!=typeof c||i in l(e))}}for(var u=Array(n),d=Array(n);n--;)c=e[t[n]],u[n]=c,d[n]=o(c);return function(e){return null!=e&&r(l(e),t,u,d)}}var r=n(26),a=n(27),o=n(28),s=n(29),l=n(30);e.exports=i},function(e,t,n){function i(e,t){return a(t)?function(n){return null!=n&&n[e]===t&&("undefined"!=typeof t||e in o(n))}:function(n){return null!=n&&r(t,n[e],null,!0)}}var r=n(31),a=n(28),o=n(30);e.exports=i},function(e){function t(e){return function(t){return null==t?void 0:t[e]}}e.exports=t},function(e,t,n){function i(e,t,n){if("function"!=typeof e)return r;if("undefined"==typeof t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,a){return e.call(t,n,i,r,a)};case 5:return function(n,i,r,a,o){return e.call(t,n,i,r,a,o)}}return function(){return e.apply(t,arguments)}}var r=n(23);e.exports=i},function(e){function t(e){return e}e.exports=t},function(e,t,n){function i(e){return e=r(e),e&&o.test(e)?e.replace(a,"\\$&"):e}var r=n(32),a=/[.*+?^${}()|[\]\/\\]/g,o=RegExp(a.source);e.exports=i},function(e){function t(e){return!!e&&"object"==typeof e}e.exports=t},function(e,t,n){function i(e,t,n,i,a){for(var o=-1,s=t.length,l=!a;++o<s;)if(l&&i[o]?n[o]!==e[t[o]]:!(t[o]in e))return!1;for(o=-1;++o<s;){var c=t[o],u=e[c],d=n[o];if(l&&i[o])var f="undefined"!=typeof u||c in e;else f=a?a(u,d,c):void 0,"undefined"==typeof f&&(f=r(d,u,a,!0));if(!f)return!1}return!0}var r=n(31);e.exports=i},function(e){function t(e){return function(){return e}}e.exports=t},function(e,t,n){function i(e){return e===e&&(0===e?1/e>0:!r(e))}var r=n(12);e.exports=i},function(e,t,n){var i=n(33),r=n(18),a=n(12),o=n(34),s=r(s=Object.keys)&&s,l=s?function(e){if(e)var t=e.constructor,n=e.length;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&n&&i(n)?o(e):a(e)?s(e):[]}:o;e.exports=l},function(e,t,n){function i(e){return r(e)?e:Object(e)}var r=n(12);e.exports=i},function(e,t,n){function i(e,t,n,a,o,s){if(e===t)return 0!==e||1/e==1/t;var l=typeof e,c=typeof t;return"function"!=l&&"object"!=l&&"function"!=c&&"object"!=c||null==e||null==t?e!==e&&t!==t:r(e,t,i,n,a,o,s)}var r=n(35);e.exports=i},function(e){function t(e){return"string"==typeof e?e:null==e?"":e+""}e.exports=t},function(e){function t(e){return"number"==typeof e&&e>-1&&e%1==0&&n>=e}var n=Math.pow(2,53)-1;e.exports=t},function(e,t,n){function i(e){for(var t=l(e),n=t.length,i=n&&e.length,u=i&&s(i)&&(a(e)||c.nonEnumArgs&&r(e)),f=-1,p=[];++f<n;){var h=t[f];(u&&o(h,i)||d.call(e,h))&&p.push(h)}return p}var r=n(36),a=n(37),o=n(38),s=n(33),l=n(39),c=n(40),u=Object.prototype,d=u.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n,i,p,g,v){var y=s(e),b=s(t),w=u,k=u;y||(w=m.call(e),w==c?w=f:w!=f&&(y=l(e))),b||(k=m.call(t),k==c?k=f:k!=f&&(b=l(t)));var _=w==f||p&&w==d,$=k==f||p&&k==d,j=w==k;if(j&&!y&&!_)return a(e,t,w);if(p){if(!(j||_&&$))return!1}else{var D=_&&h.call(e,"__wrapped__"),x=$&&h.call(t,"__wrapped__");if(D||x)return n(D?e.value():e,x?t.value():t,i,p,g,v);if(!j)return!1}g||(g=[]),v||(v=[]);for(var C=g.length;C--;)if(g[C]==e)return v[C]==t;g.push(e),v.push(t);var A=(y?r:o)(e,t,n,i,p,g,v);return g.pop(),v.pop(),A}var r=n(41),a=n(42),o=n(43),s=n(37),l=n(44),c="[object Arguments]",u="[object Array]",d="[object Function]",f="[object Object]",p=Object.prototype,h=p.hasOwnProperty,m=p.toString;e.exports=i},function(e,t,n){function i(e){var t=a(e)?e.length:void 0;return r(t)&&l.call(e)==o}var r=n(33),a=n(25),o="[object Arguments]",s=Object.prototype,l=s.toString;e.exports=i},function(e,t,n){var i=n(33),r=n(18),a=n(25),o="[object Array]",s=Object.prototype,l=s.toString,c=r(c=Array.isArray)&&c,u=c||function(e){return a(e)&&i(e.length)&&l.call(e)==o};e.exports=u},function(e){function t(e,t){return e=+e,t=null==t?n:t,e>-1&&e%1==0&&t>e}var n=Math.pow(2,53)-1;e.exports=t},function(e,t,n){function i(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&s(t)&&(a(e)||c.nonEnumArgs&&r(e))&&t||0;for(var n=e.constructor,i=-1,u="function"==typeof n&&n.prototype===e,f=Array(t),p=t>0;++i<t;)f[i]=i+"";for(var h in e)p&&o(h,t)||"constructor"==h&&(u||!d.call(e,h))||f.push(h);return f}var r=n(36),a=n(37),o=n(38),s=n(33),l=n(12),c=n(40),u=Object.prototype,d=u.hasOwnProperty;e.exports=i},function(e,t){(function(t){var n=Object.prototype,i=(i=t.window)&&i.document,r=n.propertyIsEnumerable,a={};!function(){a.funcDecomp=/\bthis\b/.test(function(){return this}),a.funcNames="string"==typeof Function.name;try{a.dom=11===i.createDocumentFragment().nodeType}catch(e){a.dom=!1}try{a.nonEnumArgs=!r.call(arguments,1)}catch(e){a.nonEnumArgs=!0}}(0,0),e.exports=a}).call(t,function(){return this}())},function(e){function t(e,t,n,i,r,a,o){var s=-1,l=e.length,c=t.length,u=!0;if(l!=c&&!(r&&c>l))return!1;for(;u&&++s<l;){var d=e[s],f=t[s];if(u=void 0,i&&(u=r?i(f,d,s):i(d,f,s)),"undefined"==typeof u)if(r)for(var p=c;p--&&(f=t[p],!(u=d&&d===f||n(d,f,i,r,a,o))););else u=d&&d===f||n(d,f,i,r,a,o)}return!!u}e.exports=t},function(e){function t(e,t,l){switch(l){case n:case i:return+e==+t;case r:return e.name==t.name&&e.message==t.message;case a:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case o:case s:return e==t+""}return!1}var n="[object Boolean]",i="[object Date]",r="[object Error]",a="[object Number]",o="[object RegExp]",s="[object String]";e.exports=t},function(e,t,n){function i(e,t,n,i,a,s,l){var c=r(e),u=c.length,d=r(t),f=d.length;if(u!=f&&!a)return!1;for(var p=a,h=-1;++h<u;){var m=c[h],g=a?m in t:o.call(t,m);if(g){var v=e[m],y=t[m];g=void 0,i&&(g=a?i(y,v,m):i(v,y,m)),"undefined"==typeof g&&(g=v&&v===y||n(v,y,i,a,s,l))}if(!g)return!1;p||(p="constructor"==m)}if(!p){var b=e.constructor,w=t.constructor;if(b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w))return!1}return!0}var r=n(29),a=Object.prototype,o=a.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){return a(e)&&r(e.length)&&!!F[S.call(e)]}var r=n(33),a=n(25),o="[object Arguments]",s="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",f="[object Map]",p="[object Number]",h="[object Object]",m="[object RegExp]",g="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",w="[object Float32Array]",k="[object Float64Array]",_="[object Int8Array]",$="[object Int16Array]",j="[object Int32Array]",D="[object Uint8Array]",x="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]",F={};F[w]=F[k]=F[_]=F[$]=F[j]=F[D]=F[x]=F[C]=F[A]=!0,F[o]=F[s]=F[b]=F[l]=F[c]=F[u]=F[d]=F[f]=F[p]=F[h]=F[m]=F[g]=F[v]=F[y]=!1;var M=Object.prototype,S=M.toString;e.exports=i}])}),define("campaign/SchoolFinder",["require","jquery","lodash","validation"],function(e){"use strict";var t=e("jquery"),n=e("lodash"),i=e("validation"),r=!0,a=n.template("<li><a class='js-schoolfinder-result' data-gsid='<%- gsid %>' href='#'><span><%- name %></span> <em><%- city %>, <%- state %></em></a></li>"),o=function(e,i,r,a){var o;if(n.isEmpty(i)||n.isEmpty(e))return a([]);try{o=Drupal.settings.dosomethingUser.schoolFinderAPIEndpoint}catch(s){o="http://lofischools.herokuapp.com/search"}t.ajax({dataType:"json",url:o+"?state="+e+"&query="+i+"&limit="+r}).done(function(e){a(e.results,e.meta.more_results)}).fail(function(){a(!1)})},s=function(e,t,i){return e.empty(),t?(n.each(t,function(t){e.append(a(t))}),0===t.length&&e.append("<div class='messages error'>Hmm, we couldn't find your school based on how the name was entered. But it may still be there! Click on the link below for tips on finding your school.</div>"),i&&e.append("<p class='schoolfinder-showmore'><a href='#' class='secondary js-schoolfinder-showmore'>Show More Results</a></p>"),void e.show()):(e.append("<div class='messages error'>We couldn't load schools. Check your internet connection, or try refreshing the page.</div>"),void e.show())},l=function(e){var i=t("#edit-school-administrative-area"),a=e.find("[name='school_id']"),l=e.find(".js-schoolfinder-search"),c=e.find(".js-schoolfinder-results"),u=t("#edit-school-not-affiliated"),d=e.find(".js-school-not-affiliated-confirmation"),f="",p=n.throttle(o,1e3);l.hide(),c.hide(),i.on("change",function(){var n=""!==t(this).val();e.find(".messages").hide(),l.val(""),l.trigger("keyup"),l.toggle(n),n&&l.focus()}),l.on("keyup",function(){e.find(".messages").hide();var n=t(this).val();""!==n?(l.addClass("loading"),p(i.val(),n,10,function(e,t){s(c,e,t),l.removeClass("loading")})):(c.hide(),a.val(""))}),c.on("click",".js-schoolfinder-result",function(e){e.preventDefault();var n=t(this);a.val(n.data("gsid")),l.val(n.find("span").text()),n.addClass("is-selected"),n.parent("li").siblings().hide()}),e.on("click",".js-schoolfinder-showmore",function(e){e.preventDefault(),t(this).remove(),l.addClass("loading"),p(i.val(),l.val(),50,function(e){s(c,e,!1),l.removeClass("loading")})}),u.on("change",function(){r=!this.checked,d.toggle(this.checked),this.checked?(f=i.val(),i.val(""),l.val(""),l.trigger("keyup")):(i.val(f),d.hide()),i.trigger("change")}),e.find(".js-schoolfinder-help").on("click",function(e){e.preventDefault(),t(".js-schoolfinder-help-content").toggle()})};t(document).ready(function(){var e=t("#dosomething-signup-user-signup-data-form");e&&l(e)}),i.registerValidationFunction("school_finder",function(e,t){var n=e.find("[name='school_id']");return r&&""===n.val()?(e.addClass("shake"),e.find(".messages.error").remove(),e.append("<div class='messages error'>You haven't entered your school. Find your school by entering your state and then selecting a school from the search results.</div>"),t({success:!1})):t({success:!0})})}),define("validators/auth",["require","validation","mailcheck"],function(e){"use strict";function t(e){var t=e.toUpperCase();if(t.match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]+$/)){for(var n="",i=0,r=t.length;r>i;i++){if("."===n&&"."===t[i])return!1;n=t[i]}return!0}return!1}function n(e,t,n,i){return t(""!==e?{success:!0,message:n}:{success:!1,message:i})}var i=e("validation"),r=e("mailcheck");i.registerValidationFunction("name",function(e,t){n(e,t,Drupal.t("Hey, @name!",{"@name":e}),Drupal.t("We need your first name."))}),i.registerValidationFunction("friend_name",function(e,t){n(e,t,Drupal.t("Got it!",{"@name":e}),Drupal.t("We need your friend's name."))}),i.registerValidationFunction("last_name",function(e,t){n(e,t,Drupal.t("Got it, @name!",{"@name":e}),Drupal.t("We need your last name."))}),i.registerValidationFunction("birthday",function(e,t){var n,i,r,a,o;try{o=Drupal.settings.dsValidation.dateFormat}catch(s){o="MM/DD/YYYY"}if("MM/DD/YYYY"===o&&/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e))n=e.split("/"),i=parseInt(n[0]),r=parseInt(n[1]),a=parseInt(n[2]);else{if("DD/MM/YYYY"!==o||!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e))return t({success:!1,message:Drupal.t("Enter your birthday "+o+"!")});n=e.split("/"),r=parseInt(n[0]),i=parseInt(n[1]),a=parseInt(n[2])}if(i>12||0===i)return t({success:!1,message:Drupal.t("That doesn't seem right.")});var l=[0,31,28,31,30,31,30,31,31,30,31,30,31];if((a%4===0&&a%100!==0||a%400===0)&&(l[2]=29),r>l[i])return t({success:!1,message:Drupal.t("That doesn't seem right.")});var c=new Date(a,i-1,r),u=new Date,d=u.getFullYear()-c.getFullYear(),f=u.getMonth()-c.getMonth();return(0>f||0===f&&u.getDate()<c.getDate())&&d--,t(0>d?{success:!1,message:Drupal.t("Are you a time traveller?")}:d>0&&25>=d?c.getMonth()===u.getMonth()&&u.getDate()===c.getDate()?{success:!0,message:Drupal.t("Wow, happy birthday!")}:10>d?{success:!0,message:Drupal.t("Wow, you're @age!",{"@age":d})}:{success:!0,message:Drupal.t("Cool, @age!",{"@age":d})}:d>25&&130>d?{success:!0,message:Drupal.t("Got it!")}:""===e?{success:!1,message:Drupal.t("We need your birthday.")}:{success:!1,message:Drupal.t("That doesn't seem right.")})}),i.registerValidationFunction("email",function(e,n){return t(e)?void r.run({email:e,domains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","outlook.com","aim.com","ymail.com","rocketmail.com","bellsouth.net","cox.net","charter.net","me.com","earthlink.net","optonline.net","dosomething.org"],suggested:function(e){return n({success:!0,suggestion:e})},empty:function(){return n({success:!0,message:Drupal.t("Great, thanks!")})}}):n({success:!1,message:Drupal.t("We need a valid email.")})}),i.registerValidationFunction("password",function(e,t){return t(e.length>=6?{success:!0,message:Drupal.t("Keep it secret, keep it safe!")}:{success:!1,message:Drupal.t("Must be 6+ characters.")})}),i.registerValidationFunction("phone",function(e,t){var n=e.replace(/[\-\s\.]/g,""),i=/^(?:\+?([0-9]{1,3})([\-\s\.]{1})?)?\(?([0-9]{3})\)?(?:[\-\s\.]{1})?([0-9]{3})(?:[\-\s\.]{1})?([0-9]{4})/.test(n),r=e.replace(/[^0-9]/g,""),a=/([0-9]{1})\1{9,}/.test(r);return t(i&&!a?{success:!0,message:Drupal.t("Thanks!")}:{success:!1,message:Drupal.t("Enter a valid telephone number.")})})}),define("validators/reportback",["require","validation","jquery"],function(e){"use strict";{var t=e("validation");e("jquery")}t.registerValidationFunction("positiveInteger",function(e,t){var n=e.replace(" ","");return t(""!==n&&/^[1-9]\d*$/.test(n)?{success:!0,message:Drupal.t("That's great!")}:{success:!1,message:Drupal.t("Enter a valid number!")})}),t.registerValidationFunction("reportbackReason",function(e,t){return t(""!==e?{success:!0,message:Drupal.t("Thanks for caring!")}:{success:!1,message:Drupal.t("Tell us why you cared!")})}),t.registerValidationFunction("caption",function(e,t){return t(""!==e&&e.length<=60?{success:!0,message:Drupal.t("Sounds great!")}:{success:!1,message:Drupal.t("Tell us about your photo in 60 characters or less!")})})}),define("validators/address",["require","jquery","validation"],function(e){"use strict";var t=e("jquery"),n=e("validation"),i=function(e,t,n){return t(""!==e?{success:!0,message:n.success}:{success:!1,message:n.failure})};n.registerValidationFunction("fname",function(e,t){return i(e,t,{success:Drupal.t("Oh hey, @fname!",{"@fname":e}),failure:Drupal.t("We need your name. We’re on a first-name basis, right?")})}),n.registerValidationFunction("lname",function(e,t){return i(e,t,{success:Drupal.t("The @lname-inator! People call you that, right?",{"@lname":e}),failure:Drupal.t("We need your last name.")})}),n.registerValidationFunction("address1",function(e,t){return i(e,t,{success:Drupal.t("Got it!"),failure:Drupal.t("We need your street name and number.")})}),n.registerValidationFunction("address2",function(e,t){return i(e,t,{success:Drupal.t("Got that too!"),failure:""})}),n.registerValidationFunction("city",function(e,t){return i(e,t,{success:Drupal.t("Sweet, thanks!"),failure:Drupal.t("We need your city.")})}),n.registerValidationFunction("state",function(e,t){return i(e,t,{success:Drupal.t("I ❤ @state",{"@state":e}),failure:Drupal.t("We need your state.")})}),n.registerValidationFunction("zipcode",function(e,t){return t(e.match(/^\d{5}(?:[-\s]\d{4})?$/)?{success:!0,message:Drupal.t("Almost done!")}:{success:!1,message:Drupal.t("We need your zip code.")})}),n.registerValidationFunction("why_signedup",function(e,t){return i(e,t,{success:Drupal.t("Thanks for caring!"),failure:Drupal.t("Oops! Can't leave this one blank.")})}),n.registerValidationFunction("ups_address",function(e,i){var r=t("<div class='messages error'><strong>"+Drupal.t("We couldn't find that address.")+"</strong>"+Drupal.t("Double check for typos and try submitting again.")+"</div>"),a=t("<div class='messages error'>"+Drupal.t("We're having trouble submitting the form, are you sure your internet connection is working? Email us if you continue having problems.")+"</div>"),o=e.find("select, input").serializeArray();e.find(".messages").slideUp(function(){t(this).remove()}),t.ajax({type:"POST",url:"/user/validate/address",dataType:"json",data:o,success:function(t){if(t.sorry)return e.append(r).hide().slideDown(),i({success:!1});var a=!1;for(var o in t)if(t.hasOwnProperty(o)&&"ambiguous"!==o){var s=t[o],l=e.find("[name='user_address["+o+"]']");"postal_code"===o&&l.val().slice(0,4)===s.slice(0,4)||s===l.val().toUpperCase()?l.val(s):(a=!0,n.showValidationMessage(l,{success:!1,suggestion:{full:s,domain:"zip"}}))}i(a?{success:!1}:{success:!0})},error:function(){e.append(a).hide().slideDown(),i({success:!1})}})}),n.registerValidationFunction("shirt_size",function(e,t){return i(e,t,{success:Drupal.t("It'll fit great!"),failure:Drupal.t("We need a shirt size!")})}),n.registerValidationFunction("shirt_style",function(e,n){var i=e.find("input[type='radio']:checked"),r=t("<div class='message error'>"+Drupal.t("We need a shirt style!")+"</div>");e.find(".message").remove(),1===i.length?n({success:!0}):(e.find("label:first").append(r),n({success:!1}))})}),define("validators/donate",["require","validation"],function(e){"use strict";function t(e){return/^\d+$/.test(e)}function n(e){return/^\d{3,4}$/.test(e)}function i(e){return/^(0?[1-9]|1[0-2])$/.test(e)}function r(e){return/^[1-9]\d{3,}$/.test(e)}function a(e,t,n,i){return t(""!==e?{success:!0,message:n}:{success:!1,message:i})}function o(e,n,i,r){return n(t(e)?{success:!0,message:i}:{success:!1,message:r})}function s(e,t,n,i){var r=null;for(var a in f){var o=f[a];o.numberPattern.test(e)&&(r=o)}return t(r?{success:!0,message:r.name+" "+n}:{success:!1,message:i})}function l(e,t,i,r){return t(n(e)?{success:!0,message:i}:{success:!1,message:r})}function c(e,t,n,r){return t(i(e)?{success:!0,message:n}:{success:!1,message:r})}function u(e,t,n,i){return t(r(e)?{success:!0,message:n}:{success:!1,message:i})}var d=e("validation"),f={Visa:{name:"Visa",numberPattern:/^4[0-9]{12}(?:[0-9]{3})?$/},Mastercard:{name:"MasterCard",numberPattern:/^5[1-5][0-9]{14}$/},AmericanExpress:{name:"American Express",numberPattern:/^3[47][0-9]{13}$/},DinersClub:{name:"Diners Club",numberPattern:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/},Discover:{name:"Discover",numberPattern:/^6(?:011|5[0-9]{2})[0-9]{12}$/},JCB:{name:"JCB",numberPattern:/^(?:2131|1800|35\d{3})\d{11}$/}};d.registerValidationFunction("full_name",function(e,t){a(e,t,Drupal.t("Hey, @name!",{"@name":e}),Drupal.t("We need your full name."))}),d.registerValidationFunction("cc_num",function(e,t){s(e,t,Drupal.t("number looks good!"),Drupal.t("Invalid credit card number."))}),d.registerValidationFunction("cvv",function(e,t){l(e,t,Drupal.t("CVV looks good!"),Drupal.t("Invalid CVV."))}),d.registerValidationFunction("exp_month",function(e,t){c(e,t,Drupal.t("Good Month!"),Drupal.t("Invalid Month."))}),d.registerValidationFunction("exp_year",function(e,t){u(e,t,Drupal.t("Good Year!"),Drupal.t("Invalid Year."))}),d.registerValidationFunction("amount",function(e,t){o(e,t,Drupal.t("So Generous!"),Drupal.t("Invalid Amount."))})}),define("Analytics",["validation","modal","jquery"],function(e,t,n){"use strict";"undefined"!=typeof ga&&null!==ga&&(e.Events.subscribe("Validation:InlineError",function(e,t){ga("send","event","Form","Inline Validation Error",t)}),e.Events.subscribe("Validation:Suggestion",function(e,t){ga("send","event","Form","Suggestion",t)}),e.Events.subscribe("Validation:SuggestionUsed",function(e,t){ga("send","event","Form","Suggestion Used",t)}),e.Events.subscribe("Validation:Submitted",function(e,t){ga("send","event","Form","Submitted",t)}),e.Events.subscribe("Validation:SubmitError",function(e,t){ga("send","event","Form","Validation Error on submit",t)}),n(".js-analytics-fb-share").on("click",function(){ga("send","event","Share","Confirmation Page","Facebook")}),n(".js-analytics-tw-share").on("click",function(){ga("send","event","Share","Confirmation Page","Twitter")}),n(".js-analytics-tm-share").on("click",function(){ga("send","event","Share","Confirmation Page","Tumblr")}),t.Events.subscribe("Modal:Open",function(e,t){var n=null!==t?"#"+t.attr("id"):"";ga("send","event","Modal","Open",n)}),t.Events.subscribe("Modal:Close",function(e,t){var n=null!==t?"#"+t.attr("id"):"";ga("send","event","Modal","Close",n)}))}),define("tiles",["require","jquery"],function(e){"use strict";function t(){var e=n(this).find("img").attr("src")||n(this).attr("poster");n(this).replaceWith(n("<img>").attr("src",e))}var n=e("jquery");n(".tile").find("img").unveil(200,function(){n(this).load(function(){this.style.opacity=1})}),(window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/iPhone/i))&&n(function(){n(".tile video").each(t)})}),define("app",["require","jquery","lodash","finder/Finder","donate/Donate","revealer/Revealer","swapper/Swapper","reportback/Reportback","utils/Share","neue","modal","validation","campaign/SchoolFinder","validators/auth","validators/reportback","validators/address","validators/donate","Analytics","tiles"],function(e){"use strict";var t=e("jquery"),n=e("lodash"),i=e("finder/Finder"),r=e("donate/Donate"),a=e("revealer/Revealer"),o=e("swapper/Swapper"),s=e("reportback/Reportback"),l=e("utils/Share");e("neue"),e("modal"),e("validation"),e("campaign/SchoolFinder"),e("validators/auth"),e("validators/reportback"),e("validators/address"),e("validators/donate"),e("Analytics"),e("tiles"),t(document).ready(function(){t(".js-fixedsticky").fixedsticky();var e=t("body"),c=t(".js-finder-form");if(c.length){var u=t(".js-campaign-results"),d=t(".js-campaign-blankslate");i.init(c,u,d)}var f=t("#modal--donate-form");f.length&&r.init();var p=e.find('[data-show-more="true"]');if(p.length>0){var h=[];p.each(function(e,n){var i=t(n),r=i.find("li"),o=i.hasClass("-mosaic"),s=o?5:6,l=o?8:6;r.length>s&&(h[e]=new a(i,r,"gallery",s,l))})}var m=e.find(".gallery.-mosaic");if(m.length&&m.hasClass("-featured")){var g=[];t(window).on("resize",n.debounce(function(){window.matchMedia("(min-width: 768px)").matches&&!g.length&&m.each(function(e){var n=t(this).find("li").first();g[e]=new o(n)})},500))}var v=e.find("#reportback");v.length&&s.init(v),e.find("a.js-share-link").length&&l.popup(),$showMoreText=e.find(".js-permalink-show-more"),$showMoreText.length&&$showMoreText.click(function(e){e.preventDefault(),t(".participate").toggleClass("is-shown"),$showMoreText.html("Show More"===$showMoreText.html()?"Show Less":"Show More")
}),t("html").addClass("js-ready")})}),require(["app"]);